---
layout: post
title: "그림으로 배우는 Linux 구조 - 6 / 장치접근"
author: "Bys"
category: os
date: 2024-06-17 01:00:00
tags: book linux device
---


## 장치 관리
프로세스는 장치에 직접 접근하지 못합니다. 접근하지 못하는 이유는 다음과 같습니다.
- 여러 프로그램이 동시에 장치를 조작하면 예상할 수 없는 방식으로 작동할 위험성이 있습니다.
- 원래라면 접근해서는 안되는 데이터를 훼손하거나 훔쳐 볼 위험성이 있습니다.  

따라서 프로레스 대신해서 커널이 장치에 접근합니다. 구체적으로는 다음과 같은 인터페이스를 사용합니다.  
- 디바이스 파일이라는 특수한 파일을 조작합니다. 
- 블록 장치에 구축한 파일 시스템을 조작합니다. 
- 네트워크 인터페이스 카드(NIC)는 속도 등의 문제로 디바이스 파일을 사용하는 대신에 소켓 구조를 사용합니다. 

#### 디바이스 파일
디바이스 파일은 장치마다 존재합니다. 예를 들어 저장 장치라면 /dev/sda나 /dev/sdb 같은 파일이 디바이스 파일입니다. 
리눅스는 프로세스가 디바이스 파일을 조작하면 커널 내부의 디바이스 드라이버라고 부르는 소프트웨어가 사용자 대신에 장치에 접근합니다. 장치 0과 장치 1에 각각 /dev/AAA, /dev/BBB라는 디바이스 파일이 존재한다면 아래 그림 처럼 됩니다.

![linux6_01](/assets/book/linux/06/linux6_01.png){: width="70%" height="auto"}  

프로세스는 일반 파일과 똑같은 방식으로 디바이스 파일을 조작할 수 있습니다. 즉 open()이나 read(), write() 같은 시스템 콜을 호출해서 각각의 장치에 접근합니다. 장치 고유의 복잡한 조작은 ioctl() 시스템 콜을 사용합니다. 
디바이스 파일에 접근할 수 있는 건 보통 루트뿐입니다.  

디바이스 파일에는 다음과 같은 정보가 저장됩니다.  
- 파일 종류: 캐릭터 장치(Character device) 또는 블록 장치(Block device) 
- 디바이스 메이저 번호, 마이너 번호: 메이저 번호와 마이너 번호 조합이 같다면 동일한 장치에 해당하고, 그렇지 않으면 다른 장치라고 기억하면 됩니다. 

디바이스 파일은 보통 /dev/ 디렉토리 아래에 존재합니다. 
```bash

```


<br><br><br>

---

**Reference**  
- 그림으로 배우는 리눅스 구조 (다케우치 사토루)  
- [E-Book](https://books.google.co.kr/books?id=7djUEAAAQBAJ&pg=PA35&hl=ko&source=gbs_selected_pages&cad=1#v=onepage&q&f=false)
