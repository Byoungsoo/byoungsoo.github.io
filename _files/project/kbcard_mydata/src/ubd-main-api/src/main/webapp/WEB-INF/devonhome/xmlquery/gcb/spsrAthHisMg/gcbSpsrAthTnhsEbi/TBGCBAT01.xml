<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvLstGcbSpsrAthTnhsSttm" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::GCB책임자승인거래내역명세표목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvLstGcbSpsrAthTnhsSttm */
			       DECODE(NVL(AA.책임자승인구분코드, '0'), '0', '2', '1') 책임자승인구분코드정렬
			     , DECODE(${정렬조건_V1}, '1', AA.거래기준시각, '0') 거래기준시각정렬
			     , DECODE(${정렬조건_V1}, '2', AA.승인직원번호, '0') 승인직원번호정렬
			     , DECODE(${정렬조건_V1}, '3', AA.거래직원번호, '0') 거래직원번호정렬
			     , DECODE(${정렬조건_V1}, '4', AA.단말전표번호_V9, '0') 단말전표번호_V9정렬
			     , AA.거래기준년월일
			     , AA.부점코드
			     , AA.승인직원번호
			     , AA.책임자승인일련번호
			     , AA.취급부점코드
			     , AA.거래기준시각     
			     , AA.거래직원번호
			     , AA.거래코드
			     , AA.취소구분코드
			     , AA.거래취소정정사유구분코드
			     , AA.마감후거래여부
			     , AA.매체구분코드
			     , AA.단말번호     
			     , AA.N1차승인직원번호
			     , AA.N1차승인직원명
			     , AA.N1차책임자승인부점코드
			     , AA.N2차승인직원번호
			     , AA.N2차승인직원명
			     , AA.N2차책임자승인부점코드
			     , AA.책임자승인구분코드
			     , AA.책임자승인사유건수
			     , AA.책임자승인사유코드1
			     , AA.책임자승인사유코드2
			     , AA.책임자승인사유코드3
			     , AA.책임자승인사유코드4
			     , AA.책임자승인사유코드5
			     , AA.책임자승인사유코드6
			     , AA.책임자승인사유코드7
			     , AA.책임자승인사유코드8
			     , AA.책임자승인사유코드9
			     , AA.책임자승인사유코드10
			     , AA.회계기준년월일
			     , AA.단말전표번호_V9
			     , AA.전표번호
			     , AA.고객계좌번호
			     , AA.과목코드
			     , AA.입출금구분코드
			     , AA.고객식별자
			     , AA.고객관리번호
			     , AA.고객명
			     , AA.회계계정과목코드
			     , AA.거래금액
			     , AA.현금입금금액
			     , AA.현금출금금액
			     , AA.대체입금금액
			     , AA.대체출금금액
			     , AA.GUID번호
			     , AA.승인완료구분코드
			     , AA.전표구분코드
			     , AA.책임자승인점검확인여부
			     , AA.책임자승인점검확인년월일
			     , AA.책임자승인점검확인시각
			     , AA.책임자승인점검확인직원번호
			     , AA.책임자승인점검여부
			     , AA.책임자승인점검년월일
			     , AA.책임자승인점검시각
			     , AA.시스템최종갱신일시
			     , AA.시스템최종갱신식별자
			     , AA.시스템최종거래일시
			  FROM (SELECT A.거래기준년월일
			             , A.부점코드
			             , A.승인직원번호
			             , A.책임자승인일련번호
			             , A.취급부점코드
			             , SUBSTR(A.거래기준시각,1,6) 거래기준시각     
			             , A.거래직원번호
			             , A.거래코드
			             , A.취소구분코드
			             , A.거래취소정정사유구분코드
			             , A.마감후거래여부
			             , A.매체구분코드
			             , A.단말번호     
			             , A.N1차승인직원번호
			             , A.N1차승인직원명
			             , A.N1차책임자승인부점코드
			             , A.N2차승인직원번호
			             , A.N2차승인직원명
			             , A.N2차책임자승인부점코드
			             , A.책임자승인구분코드
			             , A.책임자승인사유건수
			             , A.책임자승인사유코드1
			             , A.책임자승인사유코드2
			             , A.책임자승인사유코드3
			             , A.책임자승인사유코드4
			             , A.책임자승인사유코드5
			             , A.책임자승인사유코드6
			             , A.책임자승인사유코드7
			             , A.책임자승인사유코드8
			             , A.책임자승인사유코드9
			             , A.책임자승인사유코드10
			             , A.회계기준년월일
			             , A.단말번호 || CASE WHEN (TRIM(A.전표번호) IS NOT NULL OR TRIM(A.전표번호) > ' ') THEN  '-'||A.전표번호 END 단말전표번호_V9
			             , A.전표번호
			             , A.고객계좌번호
			             , A.과목코드
			             , A.입출금구분코드
			             , A.고객식별자
			             , A.고객관리번호
			             , A.고객명
			             , A.회계계정과목코드
			             , A.거래금액
			             , A.현금입금금액
			             , A.현금출금금액
			             , A.대체입금금액
			             , A.대체출금금액
			             , A.GUID번호
			             , A.승인완료구분코드
			             , A.전표구분코드
			             , A.책임자승인점검확인여부
			             , A.책임자승인점검확인년월일
			             , A.책임자승인점검확인시각
			             , A.책임자승인점검확인직원번호
			             , A.책임자승인점검여부
			             , A.책임자승인점검년월일
			             , A.책임자승인점검시각
			             , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') 시스템최종갱신일시
			             , A.시스템최종갱신식별자
			             , A.시스템최종거래일시             
			          FROM INSTC.TBGCBAT01 A 
			         WHERE A.거래기준년월일        = ${거래기준년월일}
			           AND A.부점코드          = ${부점코드}
			           AND A.승인직원번호        LIKE TRIM(${승인직원번호})||'%'
			           AND A.거래직원번호        LIKE TRIM(${거래직원번호})||'%'
			           AND NVL(A.책임자승인구분코드, '0') IN ('0', '1', '2', '3', '4', '5')
			        ) AA
			ORDER BY 책임자승인구분코드정렬, 거래기준시각정렬, 승인직원번호정렬, 거래직원번호정렬, 단말전표번호_V9정렬
		]]>
    </statement>

    <!--  -->
    <statement name="retvLckGcbSpsrAthTnhs" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::GCB책임자승인거래내역락조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvLckGcbSpsrAthTnhs */ 
			       A.거래기준년월일
			     , A.부점코드
			     , A.승인직원번호
			     , A.책임자승인일련번호
			     , A.취급부점코드
			     , A.거래기준시각
			     , A.거래직원번호
			     , A.거래코드
			     , A.취소구분코드
			     , A.거래취소정정사유구분코드
			     , A.마감후거래여부
			     , A.매체구분코드
			     , A.단말번호
			     , A.N1차승인직원번호
			     , A.N1차승인직원명
			     , A.N1차책임자승인부점코드
			     , A.N2차승인직원번호
			     , A.N2차승인직원명
			     , A.N2차책임자승인부점코드
			     , A.책임자승인구분코드
			     , A.책임자승인사유건수
			     , A.책임자승인사유코드1
			     , A.책임자승인사유코드2
			     , A.책임자승인사유코드3
			     , A.책임자승인사유코드4
			     , A.책임자승인사유코드5
			     , A.책임자승인사유코드6
			     , A.책임자승인사유코드7
			     , A.책임자승인사유코드8
			     , A.책임자승인사유코드9
			     , A.책임자승인사유코드10
			     , A.회계기준년월일
			     , A.전표번호
			     , A.고객계좌번호
			     , A.과목코드
			     , A.입출금구분코드
			     , A.고객식별자
			     , A.고객관리번호
			     , A.고객명
			     , A.회계계정과목코드
			     , A.거래금액
			     , A.현금입금금액
			     , A.현금출금금액
			     , A.대체입금금액
			     , A.대체출금금액
			     , A.GUID번호
			     , A.승인완료구분코드
			     , A.전표구분코드
			     , A.책임자승인점검확인여부
			     , A.책임자승인점검확인년월일
			     , A.책임자승인점검확인시각
			     , A.책임자승인점검확인직원번호
			     , A.책임자승인점검여부
			     , A.책임자승인점검년월일
			     , A.책임자승인점검시각
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBAT01 A 
			 WHERE A.거래기준년월일        = ${거래기준년월일}
			   AND A.부점코드          = ${부점코드}
			   AND A.승인직원번호        = ${승인직원번호}
			   AND A.책임자승인일련번호     = ${책임자승인일련번호}
			FOR UPDATE WAIT 0
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbSpsrAthTnhsSttmChp" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::GCB책임자승인거래내역명세표점검수정">
		<![CDATA[
			UPDATE /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/uptGcbSpsrAthTnhsSttmChp */ 
			       INSTC.TBGCBAT01 
			   SET 책임자승인점검여부     = ${책임자승인점검여부}
			     , 책임자승인점검년월일    = ${책임자승인점검년월일}
			     , 책임자승인점검시각     = ${책임자승인점검시각}
			     , 시스템최종갱신일시     = SYSTIMESTAMP
			     , 시스템최종갱신식별자    = ${시스템최종갱신식별자}
			     , 시스템최종거래일시     = ${시스템최종거래일시}
			 WHERE 거래기준년월일        = ${거래기준년월일}
			   AND 부점코드          = ${부점코드}
			   AND 승인직원번호        = ${승인직원번호}
			   AND 책임자승인일련번호     = ${책임자승인일련번호}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbSpsrApvTg" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::GCB책임자결재대상목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvLstGcbSpsrApvTg */ 
			       A.거래기준년월일
			     , A.부점코드
			     , A.승인직원번호
			     , A.책임자승인일련번호
			     , A.취급부점코드
			     , SUBSTR(A.거래기준시각, 1, 6) 거래기준시각
			     , A.거래직원번호
			     , A.거래코드
			     , A.취소구분코드
			     , A.거래취소정정사유구분코드
			     , A.마감후거래여부
			     , A.매체구분코드
			     , A.단말번호
			     , A.N1차승인직원번호
			     , A.N1차승인직원명
			     , A.N1차책임자승인부점코드
			     , A.N2차승인직원번호
			     , A.N2차승인직원명
			     , A.N2차책임자승인부점코드
			     , A.책임자승인구분코드
			     , A.책임자승인사유건수
			     , A.책임자승인사유코드1
			     , A.책임자승인사유코드2
			     , A.책임자승인사유코드3
			     , A.책임자승인사유코드4
			     , A.책임자승인사유코드5
			     , A.책임자승인사유코드6
			     , A.책임자승인사유코드7
			     , A.책임자승인사유코드8
			     , A.책임자승인사유코드9
			     , A.책임자승인사유코드10
			     , A.회계기준년월일
			     , A.전표번호
			     , A.고객계좌번호
			     , A.과목코드
			     , A.입출금구분코드
			     , A.고객식별자
			     , A.고객관리번호
			     , A.고객명
			     , A.회계계정과목코드
			     , A.거래금액
			     , A.현금입금금액
			     , A.현금출금금액
			     , A.대체입금금액
			     , A.대체출금금액
			     , A.GUID번호
			     , A.승인완료구분코드
			     , A.전표구분코드
			     , A.책임자승인점검확인여부
			     , A.책임자승인점검확인년월일
			     , A.책임자승인점검확인시각
			     , A.책임자승인점검확인직원번호
			     , A.책임자승인점검여부
			     , A.책임자승인점검년월일
			     , A.책임자승인점검시각
			     , CASE WHEN TRIM(A.고객식별자) > ' ' THEN A.고객식별자||'-'||A.고객관리번호 END 고객식별정보_V16
			     , A.단말번호 || CASE WHEN TRIM(A.전표번호) > ' ' THEN '-'||A.전표번호 END 단말전표번호_V9
			     , CASE A.책임자승인구분코드 WHEN '2' THEN '복수' 
			                                 WHEN '3' THEN '복수(지점장)'
			                                 WHEN '4' THEN '복수(내부통제책임자)'
			                                 WHEN '6' THEN '복수'
			                                 ELSE '단수'
			       END 복수단수구분명_V20
			  FROM INSTC.TBGCBAT01 A 
			 WHERE A.거래기준년월일    = ${거래기준년월일}
			   AND A.부점코드      = ${부점코드}   
			   AND A.거래직원번호 LIKE TRIM(${거래직원번호})||'%'
			   AND NVL(A.책임자승인구분코드, '0') NOT IN ('0', '1', '5')
			ORDER BY 거래기준시각 ASC
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbSpsrApvTgChp" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::GCB책임자결재대상점검수정">
		<![CDATA[
			UPDATE /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/uptGcbSpsrApvTgChp */ 
			       INSTC.TBGCBAT01 
			   SET 책임자승인점검확인여부   = ${책임자승인점검확인여부}
			     , 책임자승인점검확인년월일  = ${책임자승인점검확인년월일}
			     , 책임자승인점검확인시각   = ${책임자승인점검확인시각}
			     , 책임자승인점검확인직원번호 = ${책임자승인점검확인직원번호}
			     , 시스템최종갱신일시     = SYSTIMESTAMP
			     , 시스템최종갱신식별자    = ${시스템최종갱신식별자}
			     , 시스템최종거래일시     = ${시스템최종거래일시}
			 WHERE 거래기준년월일    = ${거래기준년월일}
			   AND 부점코드      = ${부점코드}
			   AND 승인직원번호    = ${승인직원번호}
			   AND 책임자승인일련번호 = ${책임자승인일련번호}
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbSpsrAthTnhs" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::GCB책임자승인거래내역등록">
		<![CDATA[
			INSERT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/regtGcbSpsrAthTnhs */
			  INTO INSTC.TBGCBAT01
			(
			   거래기준년월일
			 , 부점코드
			 , 승인직원번호
			 , 책임자승인일련번호
			 , 취급부점코드
			 , 거래기준시각
			 , 거래직원번호
			 , 거래코드
			 , 취소구분코드
			 , 거래취소정정사유구분코드
			 , 마감후거래여부
			 , 매체구분코드
			 , 단말번호
			 , N1차승인직원번호
			 , N1차승인직원명
			 , N1차책임자승인부점코드
			 , N2차승인직원번호
			 , N2차승인직원명
			 , N2차책임자승인부점코드
			 , 책임자승인구분코드
			 , 책임자승인사유건수
			 , 책임자승인사유코드1
			 , 책임자승인사유코드2
			 , 책임자승인사유코드3
			 , 책임자승인사유코드4
			 , 책임자승인사유코드5
			 , 책임자승인사유코드6
			 , 책임자승인사유코드7
			 , 책임자승인사유코드8
			 , 책임자승인사유코드9
			 , 책임자승인사유코드10
			 , 회계기준년월일
			 , 전표번호
			 , 고객계좌번호
			 , 과목코드
			 , 입출금구분코드
			 , 고객식별자
			 , 고객관리번호
			 , 고객명
			 , 회계계정과목코드
			 , 거래금액
			 , 현금입금금액
			 , 현금출금금액
			 , 대체입금금액
			 , 대체출금금액
			 , GUID번호
			 , 승인완료구분코드
			 , 전표구분코드
			 , 책임자승인점검확인여부
			 , 책임자승인점검확인년월일
			 , 책임자승인점검확인시각
			 , 책임자승인점검확인직원번호
			 , 책임자승인점검여부
			 , 책임자승인점검년월일
			 , 책임자승인점검시각
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${거래기준년월일}
			 ,${부점코드}
			 ,${승인직원번호}
			 ,(SELECT NVL(MAX(B.책임자승인일련번호), 0) + 1 
			     FROM INSTC.TBGCBAT01 B 
			    WHERE B.거래기준년월일 = ${거래기준년월일}
			      AND B.부점코드 = ${부점코드}
			      AND B.승인직원번호 = ${승인직원번호})
			 ,${취급부점코드}
			 ,${거래기준시각}
			 ,${거래직원번호}
			 ,${거래코드}
			 ,${취소구분코드}
			 ,${거래취소정정사유구분코드}
			 ,${마감후거래여부}
			 ,${매체구분코드}
			 ,${단말번호}
			 ,${N1차승인직원번호}
			 ,${N1차승인직원명}
			 ,${N1차책임자승인부점코드}
			 ,${N2차승인직원번호}
			 ,${N2차승인직원명}
			 ,${N2차책임자승인부점코드}
			 ,${책임자승인구분코드}
			 ,${책임자승인사유건수}
			 ,${책임자승인사유코드1}
			 ,${책임자승인사유코드2}
			 ,${책임자승인사유코드3}
			 ,${책임자승인사유코드4}
			 ,${책임자승인사유코드5}
			 ,${책임자승인사유코드6}
			 ,${책임자승인사유코드7}
			 ,${책임자승인사유코드8}
			 ,${책임자승인사유코드9}
			 ,${책임자승인사유코드10}
			 ,${회계기준년월일}
			 ,${전표번호}
			 ,${고객계좌번호}
			 ,${과목코드}
			 ,${입출금구분코드}
			 ,${고객식별자}
			 ,${고객관리번호}
			 ,${고객명}
			 ,${회계계정과목코드}
			 ,${거래금액}
			 ,${현금입금금액}
			 ,${현금출금금액}
			 ,${대체입금금액}
			 ,${대체출금금액}
			 ,${GUID번호}
			 ,${승인완료구분코드}
			 ,${전표구분코드}
			 ,${책임자승인점검확인여부}
			 ,${책임자승인점검확인년월일}
			 ,${책임자승인점검확인시각}
			 ,${책임자승인점검확인직원번호}
			 ,${책임자승인점검여부}
			 ,${책임자승인점검년월일}
			 ,${책임자승인점검시각}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbSpsrAthTnhs" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::GCB책임자승인거래내역조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvGcbSpsrAthTnhs */ 
			       A.거래기준년월일
			     , A.부점코드
			     , A.승인직원번호
			     , A.책임자승인일련번호
			     , A.취급부점코드
			     , A.거래기준시각
			     , A.거래직원번호
			     , A.거래코드
			     , A.취소구분코드
			     , A.거래취소정정사유구분코드
			     , A.마감후거래여부
			     , A.매체구분코드
			     , A.단말번호
			     , A.N1차승인직원번호
			     , A.N1차승인직원명
			     , A.N1차책임자승인부점코드
			     , A.N2차승인직원번호
			     , A.N2차승인직원명
			     , A.N2차책임자승인부점코드
			     , A.책임자승인구분코드
			     , A.책임자승인사유건수
			     , A.책임자승인사유코드1
			     , A.책임자승인사유코드2
			     , A.책임자승인사유코드3
			     , A.책임자승인사유코드4
			     , A.책임자승인사유코드5
			     , A.책임자승인사유코드6
			     , A.책임자승인사유코드7
			     , A.책임자승인사유코드8
			     , A.책임자승인사유코드9
			     , A.책임자승인사유코드10
			     , A.회계기준년월일
			     , A.전표번호
			     , A.고객계좌번호
			     , A.과목코드
			     , A.입출금구분코드
			     , A.고객식별자
			     , A.고객관리번호
			     , A.고객명
			     , A.회계계정과목코드
			     , A.거래금액
			     , A.현금입금금액
			     , A.현금출금금액
			     , A.대체입금금액
			     , A.대체출금금액
			     , A.GUID번호
			     , A.승인완료구분코드
			     , A.전표구분코드
			     , A.책임자승인점검확인여부
			     , A.책임자승인점검확인년월일
			     , A.책임자승인점검확인시각
			     , A.책임자승인점검확인직원번호
			     , A.책임자승인점검여부
			     , A.책임자승인점검년월일
			     , A.책임자승인점검시각
			  FROM INSTC.TBGCBAT01 A 
			 WHERE A.거래기준년월일   = ${거래기준년월일}
			   AND A.부점코드      = ${부점코드}
			   AND A.승인직원번호    = ${승인직원번호}
			   AND A.책임자승인일련번호 = ${책임자승인일련번호}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstSpsrAthTrCrdOccHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::책임자승인거래카드발생내역목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvLstSpsrAthTrCrdOccHis */ 
			       C.순번_N10
			     , C.예비_V27
			     , C.책임자승인일련번호
			     , C.N1차승인직원번호
			     , C.N1차책임자승인부점코드
			     , C.N2차승인직원번호
			     , C.N2차책임자승인부점코드
			     , C.거래직원번호
			     , C.취급부점코드
			     , C.거래기준시각
			     , C.단말번호
			     , C.전표번호
			     , C.고객계좌번호
			     , C.고객명
			     , C.입출금구분코드
			     , C.거래금액
			     , C.과목코드
			     , C.거래코드
			     , C.취소구분코드
			     , C.거래취소정정사유구분코드
			     , C.책임자승인구분코드
			     , C.N1차승인직원명
			     , C.N2차승인직원명
			     , C.고객식별자
			     , C.고객관리번호     
			  FROM (SELECT ROW_NUMBER() OVER(ORDER BY B.예비_V27 ASC) 순번_N10
			             , B.예비_V27
			             , B.책임자승인일련번호
			             , B.N1차승인직원번호
			             , B.N1차책임자승인부점코드
			             , B.N2차승인직원번호
			             , B.N2차책임자승인부점코드
			             , B.거래직원번호
			             , B.취급부점코드
			             , B.거래기준시각
			             , B.단말번호
			             , B.전표번호
			             , B.고객계좌번호
			             , B.고객명
			             , B.입출금구분코드
			             , B.거래금액
			             , B.과목코드
			             , B.거래코드
			             , B.취소구분코드
			             , B.거래취소정정사유구분코드
			             , B.책임자승인구분코드
			             , B.N1차승인직원명
			             , B.N2차승인직원명
			             , B.고객식별자
			             , B.고객관리번호     
			          FROM (SELECT /*+INDEX_SS(A) OPT_PARAM('_OPTIMIZER_SKIP_SCAN_ENABLED','TRUE')*/
			                       CASE WHEN ${정렬조건_V1} = '1' THEN NVL(A.N1차승인직원번호, '0000000')||A.거래기준시각||A.거래기준년월일
			                            WHEN ${정렬조건_V1} = '2' THEN A.거래직원번호||A.거래기준시각||A.거래기준년월일 
			                            ELSE                         A.거래기준시각||A.거래기준년월일||A.거래직원번호 
			                       END 예비_V27
			                     , A.책임자승인일련번호
			                     , A.N1차승인직원번호
			                     , A.N1차책임자승인부점코드
			                     , A.N2차승인직원번호
			                     , A.N2차책임자승인부점코드
			                     , A.거래직원번호
			                     , A.취급부점코드
			                     , A.거래기준시각
			                     , A.단말번호
			                     , A.전표번호
			                     , A.고객계좌번호
			                     , A.고객명
			                     , A.입출금구분코드
			                     , A.거래금액
			                     , A.과목코드
			                     , A.거래코드
			                     , A.취소구분코드
			                     , A.거래취소정정사유구분코드
			                     , NVL(A.책임자승인구분코드, '0') 책임자승인구분코드
			                     , A.N1차승인직원명
			                     , A.N2차승인직원명
			                     , A.고객식별자
			                     , A.고객관리번호
			                  FROM INSTC.TBGCBAT01 A
			                 WHERE A.부점코드 = ${부점코드}
			                   AND (A.책임자승인구분코드 IN ('0','1','2','3','4','5') OR A.책임자승인구분코드 IS NULL)
			                   AND (A.승인직원번호 = ${승인직원번호}
			                        OR ${승인직원번호} IS NULL)
			                   AND A.거래기준년월일 = ${거래기준년월일}
			                   AND (A.거래직원번호 = ${거래직원번호}
			                        OR ${거래직원번호} IS NULL)
			                ) B
			         WHERE B.예비_V27 >= NVL(${예비_V27}, '000000000000000000000000000')
			        ) C         
			 WHERE C.순번_N10 < 97
		]]>
    </statement>

    <!--  -->
    <statement name="retvSpsrAthTrCrdOccHisTtNcn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::책임자승인거래카드발생내역총건수조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvSpsrAthTrCrdOccHisTtNcn */
			       /*+INDEX_SS(A) OPT_PARAM('_OPTIMIZER_SKIP_SCAN_ENABLED','TRUE')*/ 
			       COUNT(*) 조회건수_N5
			  FROM INSTC.TBGCBAT01 A
			 WHERE A.부점코드 = ${부점코드}
			   AND NVL(A.책임자승인구분코드, '0') IN ('0','1','2','3','4','5')
			   AND (A.승인직원번호 = ${승인직원번호}
			        OR ${승인직원번호} IS NULL)
			   AND A.거래기준년월일 = ${거래기준년월일}
			   AND (A.거래직원번호 = ${거래직원번호}
			        OR ${거래직원번호} IS NULL)
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstSpsrAthTrCrdOccHisByAthEnm" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::책임자승인거래카드발생내역BY승인직원명목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvLstSpsrAthTrCrdOccHisByAthEnm */ 
			       A.거래기준년월일
			     , A.부점코드
			     , A.승인직원번호
			     , A.책임자승인일련번호
			     , A.취급부점코드
			     , A.거래기준시각
			     , A.거래직원번호
			     , A.거래코드
			     , A.취소구분코드
			     , A.거래취소정정사유구분코드
			     , A.마감후거래여부
			     , A.매체구분코드
			     , A.단말번호
			     , A.N1차승인직원번호
			     , A.N1차승인직원명
			     , A.N1차책임자승인부점코드
			     , A.N2차승인직원번호
			     , A.N2차승인직원명
			     , A.N2차책임자승인부점코드
			     , A.책임자승인구분코드
			     , A.책임자승인사유건수
			     , A.책임자승인사유코드1
			     , A.책임자승인사유코드2
			     , A.책임자승인사유코드3
			     , A.책임자승인사유코드4
			     , A.책임자승인사유코드5
			     , A.책임자승인사유코드6
			     , A.책임자승인사유코드7
			     , A.책임자승인사유코드8
			     , A.책임자승인사유코드9
			     , A.책임자승인사유코드10
			     , A.회계기준년월일
			     , A.전표번호
			     , A.고객계좌번호
			     , A.과목코드
			     , A.입출금구분코드
			     , A.고객식별자
			     , A.고객관리번호
			     , A.고객명
			     , A.회계계정과목코드
			     , A.거래금액
			     , A.현금입금금액
			     , A.현금출금금액
			     , A.대체입금금액
			     , A.대체출금금액
			     , A.GUID번호
			     , A.승인완료구분코드
			     , A.전표구분코드
			     , A.책임자승인점검확인여부
			     , A.책임자승인점검확인년월일
			     , A.책임자승인점검확인시각
			     , A.책임자승인점검확인직원번호
			     , A.책임자승인점검여부
			     , A.책임자승인점검년월일
			     , A.책임자승인점검시각
			  FROM INSTC.TBGCBAT01 A        /* GCB책임자승인거래내역 */
			 WHERE A.부점코드 = ${부점코드}
			   AND A.승인직원번호 = ${승인직원번호}
			   AND A.거래기준년월일 = ${거래기준년월일}
			   AND (A.N1차승인직원명 IS NOT NULL OR A.N2차승인직원명 IS NOT NULL)
			ORDER BY A.거래기준시각 DESC
		]]>
    </statement>

    <!--  -->
    <statement name="retvSpsrAthTnhsSttmTtNcn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::책임자승인거래내역명세표총건수조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvSpsrAthTnhsSttmTtNcn */
			       /*+INDEX_SS(A) OPT_PARAM('_OPTIMIZER_SKIP_SCAN_ENABLED','TRUE')*/ 
			       COUNT(*) 조회건수_N5
			  FROM INSTC.TBGCBAT01 A
			 WHERE A.부점코드 = ${부점코드}
			   AND A.책임자승인구분코드 IN ('1','2','3','4','5')
			   AND A.승인직원번호 <> ' '
			   AND A.거래기준년월일 = ${거래기준년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstSpsrAthTnhsSttm" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::책임자승인거래내역명세표목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvLstSpsrAthTnhsSttm */ 
			       C.순번_N10
			     , C.예비_V27
			     , C.책임자승인일련번호
			     , C.N1차승인직원번호
			     , C.N1차책임자승인부점코드
			     , C.N2차승인직원번호
			     , C.N2차책임자승인부점코드
			     , C.승인직원번호
			     , C.N1차승인직원명
			     , C.N2차승인직원명         
			  FROM (SELECT ROW_NUMBER() OVER(ORDER BY B.예비_V27 ASC) 순번_N10
			             , B.예비_V27
			             , B.책임자승인일련번호
			             , B.N1차승인직원번호
			             , B.N1차책임자승인부점코드
			             , B.N2차승인직원번호
			             , B.N2차책임자승인부점코드
			             , B.승인직원번호
			             , B.N1차승인직원명
			             , B.N2차승인직원명    
			          FROM (SELECT /*+INDEX_SS(A) OPT_PARAM('_OPTIMIZER_SKIP_SCAN_ENABLED','TRUE')*/
			                       A.승인직원번호||A.거래기준시각||A.거래기준년월일 예비_V27
			                     , A.책임자승인일련번호
			                     , A.N1차승인직원번호
			                     , A.N1차책임자승인부점코드
			                     , A.N2차승인직원번호
			                     , A.N2차책임자승인부점코드
			                     , A.승인직원번호
			                     , A.N1차승인직원명
			                     , A.N2차승인직원명
			                  FROM INSTC.TBGCBAT01 A
			                 WHERE A.부점코드 = ${부점코드}
			                   AND A.책임자승인구분코드 IN ('1','2','3','4','5')
			                   AND A.승인직원번호 <> ' '
			                   AND A.거래기준년월일 = ${거래기준년월일}
			                ) B
			         WHERE B.예비_V27 >= NVL(${예비_V27}, '000000000000000000000000000')
			        ) C         
			 WHERE C.순번_N10 < 402
		]]>
    </statement>

    <!--  -->
    <statement name="retvSpsrAthTrAdjRldPmaCtgNcn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::책임자승인거래조정관련결제목록건수조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvSpsrAthTrAdjRldPmaCtgNcn */ 
			       COUNT(*) 조회건수_N5
			  FROM INSTC.TBGCBAT01 A        /* GCB책임자승인거래내역 */
			 WHERE A.부점코드 = ${부점코드}
			   AND A.승인완료구분코드 IN ('2', '5', '6') /*0-승인요청 무, 1-승인요청, 2-승인완료, 3-승인거절, 4-승인취소, 5-사전승인완료, 6-책임자승인 사후결재대상*/                     
			   AND A.책임자승인구분코드 IN ('2', '3', '4', '5', 'A', 'B') /*1-단순승인, 2-복수승인(2차책임자결재), 3-복수승인(2차지점장결재), 4-복수승인(2차내부통제자결재), 5-복수승인(2차책임자승인), A-단순결재*/         
			   AND (A.거래기준년월일 = ${거래기준년월일}
			        OR ${거래기준년월일} IS NULL)
			   AND (A.거래직원번호 = ${거래직원번호}
			        OR ${거래직원번호} IS NULL)
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstSpsrAthTrAdjRldPma" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::책임자승인거래조정관련결제목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvLstSpsrAthTrAdjRldPma */ 
			       C.순번_N10
			     , C.예비_V27
			     , C.책임자승인일련번호
			     , C.거래직원번호
			     , C.거래기준시각
			     , C.단말번호
			     , C.전표번호
			     , C.전표구분코드
			     , C.과목코드
			     , C.거래코드
			     , C.고객계좌번호
			     , C.고객명
			     , C.입출금구분코드
			     , C.거래금액
			     , C.책임자승인구분코드
			     , C.N1차승인직원명
			     , C.책임자승인사유코드1
			     , C.책임자승인사유코드2
			     , C.책임자승인사유코드3
			     , C.책임자승인사유코드4
			     , C.책임자승인사유코드5
			     , C.책임자승인사유코드6
			     , C.책임자승인사유코드7
			     , C.책임자승인사유코드8
			     , C.책임자승인사유코드9
			     , C.책임자승인사유코드10
			     , C.고객식별자
			     , C.고객관리번호        
			  FROM (SELECT ROW_NUMBER() OVER(ORDER BY B.예비_V27 ASC) 순번_N10
			             , B.예비_V27
			             , B.책임자승인일련번호
			             , B.거래직원번호
			             , B.거래기준시각
			             , B.단말번호
			             , B.전표번호
			             , B.전표구분코드
			             , B.과목코드
			             , B.거래코드
			             , B.고객계좌번호
			             , B.고객명
			             , B.입출금구분코드
			             , B.거래금액
			             , NVL(B.책임자승인구분코드, '0') 책임자승인구분코드
			             , B.N1차승인직원명
			             , B.책임자승인사유코드1
			             , B.책임자승인사유코드2
			             , B.책임자승인사유코드3
			             , B.책임자승인사유코드4
			             , B.책임자승인사유코드5
			             , B.책임자승인사유코드6
			             , B.책임자승인사유코드7
			             , B.책임자승인사유코드8
			             , B.책임자승인사유코드9
			             , B.책임자승인사유코드10
			             , B.고객식별자
			             , B.고객관리번호  
			          FROM (SELECT A.거래기준시각||A.거래기준년월일||A.거래직원번호 예비_V27
			                     , A.책임자승인일련번호
			                     , A.거래직원번호
			                     , A.거래기준시각
			                     , A.단말번호
			                     , A.전표번호
			                     , A.전표구분코드
			                     , A.과목코드
			                     , A.거래코드
			                     , A.고객계좌번호
			                     , A.고객명
			                     , A.입출금구분코드
			                     , A.거래금액
			                     , NVL(A.책임자승인구분코드, '0') 책임자승인구분코드
			                     , A.N1차승인직원명
			                     , A.책임자승인사유코드1
			                     , A.책임자승인사유코드2
			                     , A.책임자승인사유코드3
			                     , A.책임자승인사유코드4
			                     , A.책임자승인사유코드5
			                     , A.책임자승인사유코드6
			                     , A.책임자승인사유코드7
			                     , A.책임자승인사유코드8
			                     , A.책임자승인사유코드9
			                     , A.책임자승인사유코드10
			                     , A.고객식별자
			                     , A.고객관리번호
			                  FROM INSTC.TBGCBAT01 A        /* GCB책임자승인거래내역 */
			                 WHERE A.부점코드 = ${부점코드}
			                   AND A.승인완료구분코드 IN ('2', '5', '6') /*0-승인요청 무, 1-승인요청, 2-승인완료, 3-승인거절, 4-승인취소, 5-사전승인완료, 6-책임자승인 사후결재대상*/                     
			                   AND A.책임자승인구분코드 IN ('2', '3', '4', '5', 'A', 'B')/*1-단순승인, 2-복수승인(2차책임자결재), 3-복수승인(2차지점장결재), 4-복수승인(2차내부통제자결재), 5-복수승인(2차책임자승인), A-단순결재*/         
			                   AND (A.거래기준년월일 = ${거래기준년월일}
			                        OR ${거래기준년월일} IS NULL)
			                   AND (A.거래직원번호 = ${거래직원번호}
			                        OR ${거래직원번호} IS NULL)
			                ) B
			         WHERE B.예비_V27 >= NVL(${예비_V27}, '000000000000000000000000000') /*27byte*/
			        ) C         
			 WHERE C.순번_N10 < 82
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstSpsrAthTrGnrzSttmCtgInqByErtm" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자승인거래내역Ebi::GCB책임자승인거래내역Dao::책임자승인거래총괄명세표목록조회By실시간목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrAthTnhsEbi/TBGCBAT01/retvLstSpsrAthTrGnrzSttmCtgInqByErtm */ 
			       A.거래기준년월일
			     , A.부점코드
			     , A.승인직원번호
			     , SUM(A.처리건수) 처리건수_N5
			     , SUM(A.점검건수) 점검건수_N5
			     , MAX(A.점검일자) 점검일자_V8
			     , MAX(A.점검시각) 점검시각_V6
			     , CASE WHEN SUBSTR(MAX(A.해제여부), 13, 10) IN ('GCB0331332', 'GCB0331331') AND SUBSTR(MAX(A.해제여부), 23, 3) != '999' THEN '1' ELSE '0' END 해제여부_V1
			     , (SELECT 한글직원명 FROM INSTC.TBGCBHR01 B WHERE B.직원번호  = A.승인직원번호) 한글직원명
			  FROM (SELECT A.거래기준년월일, A.부점코드, A.승인직원번호
			             , COUNT(*) 처리건수
			             , SUM(CASE A.책임자승인점검여부 WHEN '1' THEN 1 ELSE 0 END) 점검건수
			             , SUBSTR(MAX(A.책임자승인점검년월일||A.책임자승인점검시각), 1, 8) 점검일자
			             , SUBSTR(MAX(A.책임자승인점검년월일||A.책임자승인점검시각), 9, 6) 점검시각
			             , ' ' 해제여부
			          FROM INSTC.TBGCBAT01 A        /* GCB책임자승인거래내역 */
			         WHERE A.거래기준년월일   = ${거래기준년월일}
			           AND A.부점코드      = ${부점코드}
			           AND A.책임자승인구분코드 IN ('1', '2', '3', '4', '5')           
			        GROUP BY A.부점코드, A.승인직원번호, A.거래기준년월일
			        UNION ALL
			        SELECT A.거래기준년월일, A.부점코드, A.승인직원번호
			             , 0 처리건수
			             , 0 점검건수
			             , '' 점검일자
			             , '' 점검시각
			             , MAX(A.거래기준시각||A.거래코드||A.단말번호) 해제여부 /*거래기준시각(12)||거래코드(10)||단말번호(3)*/
			          FROM INSTC.TBGCBAT01 A        /* GCB책임자승인거래내역 */
			         WHERE A.거래기준년월일   = ${거래기준년월일}
			           AND A.부점코드      = ${부점코드}
			           AND NVL(A.책임자승인구분코드, '0') = '0'           
			        GROUP BY A.부점코드, A.승인직원번호, A.거래기준년월일
			        ) A
			GROUP BY A.거래기준년월일, A.부점코드, A.승인직원번호
			HAVING SUM(A.처리건수) > 0
		]]>
    </statement>
</statements>
