<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvLstAtrRvcByRtreTg" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한해제By퇴직대상목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRvcByRtreTg */ 
			       A.직원번호
			     , A.지주회사구분코드
			  FROM INSTC.TBGCBHR01 A
			 WHERE A.퇴직년월일 = ${작업기준년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstAtrRvcByTnfcTg" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한해제By재직대상목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRvcByTnfcTg */ 
			       A.직원번호
			     , A.사용자권한구분코드
			     , A.적용시작년월일
			     , A.사용자권한일련번호
			     , A.사용자권한유효여부
			     , A.적용종료년월일
			     , A.소속부점코드
			     , A.사용자업무부점코드
			     , C.지주회사구분코드
			  FROM INSTC.TBGCBAT04 A
			     , INSTC.TBGCBHR01 C
			 WHERE A.직원번호 = C.직원번호
			   AND A.소속부점코드 != C.소속부점코드
			   AND C.지주회사구분코드 = '02'
			   AND C.퇴직년월일 > ${작업기준년월일}   
			ORDER BY A.직원번호
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstAtrRgBySpsr" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한등록By책임자목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRgBySpsr */ 
			       A.직원번호
			     , A.사용자권한구분코드
			     , A.적용시작년월일
			     , A.사용자권한일련번호
			     , A.사용자권한유효여부
			     , A.적용종료년월일
			     , A.소속부점코드
			     , A.사용자업무부점코드     
			     , C.지주회사구분코드
			  FROM INSTC.TBGCBAT04 A
			     , INSTC.TBGCBHR01 C
			 WHERE A.직원번호 = C.직원번호
			   AND A.소속부점코드 = C.소속부점코드
			   AND A.사용자권한유효여부 = '0'
			   AND TO_CHAR(TO_DATE(${작업기준년월일}, 'YYYYMMDD') + 1, 'YYYYMMDD') BETWEEN A.적용시작년월일 AND A.적용종료년월일      
			   AND C.지주회사구분코드 = '02'   
			   AND C.퇴직년월일 > ${작업기준년월일}
			   AND A.사용자권한구분코드 = (CASE WHEN A.사용자권한구분코드 = '1' AND NVL(C.사용자유형구분코드, '00') NOT IN ('01', '02', '03') THEN '1'
			                              WHEN A.사용자권한구분코드 = '2' AND NVL(C.회계처리가능여부, '0') = '0' THEN '2'
			                              ELSE 'X' 
			                         END)
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstAtrRvcBySpsr" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한해제By책임자목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRvcBySpsr */ 
			       A.직원번호
			     , A.사용자권한구분코드
			     , A.적용시작년월일
			     , A.사용자권한일련번호
			     , A.적용종료년월일
			     , A.소속부점코드
			     , A.사용자업무부점코드  
			     , C.지주회사구분코드
			  FROM INSTC.TBGCBAT04 A
			     , INSTC.TBGCBHR01 C
			 WHERE A.직원번호 = C.직원번호
			   AND A.소속부점코드 = C.소속부점코드
			   AND A.사용자권한유효여부 = '1'   
			   AND A.적용종료년월일 = ${작업기준년월일}
			   AND C.지주회사구분코드 = '02'
			   AND C.퇴직년월일 > ${작업기준년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstAtrRvcByBmgr" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한해제By부점장목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRvcByBmgr */ 
			       C.직원번호
			     , C.부점장여부
			     , C.사용자유형구분코드
			  FROM INSTC.TBGCBHR01 C
			 WHERE C.퇴직년월일 > ${작업기준년월일}
			   AND C.지주회사구분코드 = '02'
			   AND (C.부점장여부 <> '1' OR C.부점장여부 IS NULL)
			   AND C.사용자유형구분코드 = '01'
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstAtrRgByBmgr" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한등록By부점장목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRgByBmgr */ 
			       C.직원번호
			     , C.부점장여부
			     , C.사용자유형구분코드
			  FROM INSTC.TBGCBHR01 C
			 WHERE C.퇴직년월일 > ${작업기준년월일}
			   AND C.지주회사구분코드 = '02'
			   AND C.부점장여부 = '1' 
			   AND (C.사용자유형구분코드 <> '01' OR C.사용자유형구분코드 IS NULL)
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstAtrRvcByInnCtrp" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한해제By내부통제자목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRvcByInnCtrp */ 
			       A.직원번호
			     , A.사용자유형구분코드
			  FROM INSTC.TBGCBHR01 A
			 WHERE A.퇴직년월일 > ${작업기준년월일}
			   AND A.지주회사구분코드 = '02'
			   AND A.사용자유형구분코드 = '02'
			   AND (SELECT COUNT(*) 
			          FROM INSTC.TBGCBHM01 B
			         WHERE TO_CHAR(TO_DATE(${작업기준년월일}, 'YYYYMMDD') + 1, 'YYYYMMDD') BETWEEN B.적용시작년월일 AND B.적용종료년월일
			           AND B.사무분담코드 = 'ZZ000004'
			           AND B.부점코드 = A.소속부점코드 
			           AND B.직원번호 = A.직원번호 
			        ) = 0
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstAtrRgByInnCtrp" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한등록By내부통제자목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRgByInnCtrp */ 
			       A.직원번호
			     , A.사용자유형구분코드
			  FROM INSTC.TBGCBHR01 A
			 WHERE A.퇴직년월일 > ${작업기준년월일}
			   AND A.지주회사구분코드 = '02'
			   AND (A.사용자유형구분코드 NOT IN ('01', '02') OR A.사용자유형구분코드 IS NULL)
			   AND (SELECT COUNT(*) 
			          FROM INSTC.TBGCBHM01 B
			         WHERE TO_CHAR(TO_DATE(${작업기준년월일}, 'YYYYMMDD') + 1, 'YYYYMMDD') BETWEEN B.적용시작년월일 AND B.적용종료년월일
			           AND B.사무분담코드 = 'ZZ000004'
			           AND B.부점코드 = A.소속부점코드
			           AND B.직원번호 = A.직원번호
			        ) > 0
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstAtrRgByCnmgr" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한등록By센터장목록조회">
		<![CDATA[
			SELECT /*+ 박재훈::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRgByCnmgr */ 
			       C.직원번호
			     , C.부점장여부
			     , C.사용자유형구분코드
			  FROM INSTC.TBGCBHR01 C
			 WHERE C.퇴직년월일 > ${작업기준년월일}
			   AND C.지주회사구분코드 = '02'
			   AND C.인사직위구분코드 IN ('205','302')
			   AND (C.사용자유형구분코드 <> '01' OR C.사용자유형구분코드 IS NULL)
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstAtrRvcByCnmgr" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한해제By센터장목록조회">
		<![CDATA[
			SELECT /*+ 박재훈::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRvcByCnmgr */ 
			       C.직원번호
			     , C.부점장여부
			     , C.사용자유형구분코드
			  FROM INSTC.TBGCBHR01 C
			 WHERE C.퇴직년월일 > ${작업기준년월일}
			   AND C.지주회사구분코드  = '02'
			   AND C.사용자유형구분코드 = '01'
			   AND C.인사직위구분코드 NOT IN ('205','302')
			   AND SUBSTR(NVL(C.인사직위구분코드,'000'),1,1) <> '2'
			   AND SUBSTR(NVL(C.겸직인사직위구분코드1,'000'),1,1) <> '2' 
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstAtrRgByBwkGnrz" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::03.업무지원::01.책임자정보관리::사용자유형회계처리가능권한관리Job::DAO::사용자유형회계처리가능권한관리Bdao::권한등록By업무총괄목록조회">
		<![CDATA[
			SELECT /*+ 김민교::/gcb/batch/bwkSpt/spsrInfMg/usrPtActgPrcAblAtrMgJob/UsrPtActgPrcAblAtrMg/retvLstAtrRgByBwkGnrz */ 
			       A.직원번호
			     , A.부점장여부
			     , A.사용자유형구분코드
			  FROM INSTC.TBGCBHR01 A        /* GCB직원기본 */
			 WHERE A.퇴직년월일 > ${작업기준년월일}
			   AND A.지주회사구분코드 = '02'
			   AND (A.부점장여부 <> '1' OR A.부점장여부 IS NULL)
			   AND (A.사용자유형구분코드 <> '01' OR A.사용자유형구분코드 IS NULL)
			   AND (SELECT COUNT(*)
			          FROM INSTC.TBGCBHM01 B
			         WHERE TO_CHAR(TO_DATE(${작업기준년월일}, 'YYYYMMDD') + 1, 'YYYYMMDD') BETWEEN B.적용시작년월일 AND B.적용종료년월일
			           AND B.사무분담코드 = 'ZZ000036'
			           AND B.대직여부 = '0'
			           AND B.부점코드 = A.소속부점코드
			           AND B.직원번호 = A.직원번호
			       ) > 0
		]]>
    </statement>
</statements>
