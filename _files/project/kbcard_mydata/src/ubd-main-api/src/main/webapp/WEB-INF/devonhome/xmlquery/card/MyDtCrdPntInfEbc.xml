<?xml version="1.0" encoding="UTF-8"?>
<statements>

    <statement name="selectPntLst">
        <![CDATA[
			SELECT /*+ 장민석::/card/point/retPntLst */ 
			       A.고객식별자
			     , A.고객고유번호
			     , A.고객명
			     , A.CI내용
			     , A.CI최종처리일시 as CI최종처리일시_V20
			  FROM INSTC.TBUBDA001 A /* GAA고객기본(TBGAAA001) */
			 WHERE A.CI내용 = ${CI내용}
			   AND A.CI내용 > ' '
			   AND A.고객식별자 < '6000000000'
			   AND (A.고객상태구분코드  NOT IN ('3','5') OR 1=0)
			   AND ROWNUM <= 1
        ]]>
    </statement>
    
     <statement name="selectCiLnkdNoCsid">
        <![CDATA[
			SELECT /*+ 장민석::/card/MyDtCrdPntInfEbc/selectCiLnkdNoCsid/ */ 
			       A.고객식별자
			     , A.고객고유번호
			     , A.고객명
			     , A.CI내용
			     , A.CI최종처리일시 as CI최종처리일시_V20
			  FROM INSTC.TBUBDA001 A  /* GAA고객기본(TBGAAA001) */
			 WHERE A.CI내용 = ${CI내용}
			   AND A.CI내용 > ' '
			   AND A.고객식별자 < '6000000000'
			   AND (A.고객상태구분코드  NOT IN ('3','5') OR 1=0)
			   AND ROWNUM <= 1
        ]]>
    </statement>    
   
   <statement name="selectSemiMbrBasInqByCiCtt">
        <![CDATA[
			SELECT /*+장민석:: card/MyDtCrdPntInfEbc/selectSemiMbrBasInqByCiCtt */ 
			       A.준회원식별자
			     , A.CI내용
			     , A.고객명
			     , A.준회원생년월일
			     , A.성별구분코드
			     , A.고객식별자
			     , A.등록년월일
			     , A.개별파기처리대상여부
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBUBDA005 A        /* GAA준회원기본(TBGAAN001) */
			 WHERE A.CI내용 = ${CI내용}
        ]]>
    </statement>
   
    <statement name="selectPntRmgBasByPntUseGrp">
        <![CDATA[
			SELECT /*+ 장민석:: card/MyDtCrdPntInfEbc/selectPntRmgBasByPntUseGrp */  
			       SUM(A.포인트적립점수)        AS 포인트적립점수
			     , SUM(A.포인트잔여점수)        AS 포인트잔여점수
			     , MIN(A.최초포인트원장생성년월일) AS 최초포인트원장생성년월일
			     , MAX(A.최종포인트원장반영년월일) AS 최종포인트원장반영년월일
			     FROM INSTC.TBUBDB001 A /* GAB포인트잔여기본(TBGABA002) */
			        , INSTC.TBUBDB004 C /* GAB포인트공통규칙상세(TBGABC009) */
			 WHERE A.고객식별자   = ${고객식별자}
			   AND A.고객관리번호  BETWEEN ${고객관리번호} AND ${고객관리번호2}
			   AND C.포인트공통룰ID = 'UCOD01' -- ?
			   AND C.포인트공통룰조회조건내용1 = '0KP' --?
			   AND C.포인트정보적용종료년월일 = '99991231'   
			   AND A.포인트구분코드 = C.포인트공통룰처리유형내용1
        ]]>
    </statement>

    <statement name="selectLstPntMnAcmBasByExtgSchSmm">
        <![CDATA[
			SELECT /*+ 장민석:: card/MyDtCrdPntInfEbc/retvLstPntMnAcmBasByExtgSchSmm */  
			       A.고객식별자
			     , C.포인트공통룰처리유형내용1 AS 포인트구분코드
			     , A.포인트거래년월
			     , SUM(A.포인트잔여점수) AS 포인트소멸점수
			     , MIN(A.포인트실효예정년월일) AS 포인트실효예정년월일 
			  FROM INSTC.TBUBDB002 A /* GAB포인트월누적기본(TBGABA004)   */
			     , INSTC.TBUBDB004 B /* GAB포인트공통규칙상세(TBGABC009) */
			     , INSTC.TBUBDB004 C /* GAB포인트공통규칙상세(TBGABC009) */
			 WHERE 1=1
			   AND A.고객식별자   = ${고객식별자}
			   AND A.고객관리번호  = ${고객관리번호}   
			   AND B.포인트공통룰ID = 'UCOD01'
			   AND B.포인트정보적용종료년월일 = '99991231'
			   AND B.포인트공통룰조회조건내용1 = '0KP'      -- ?
			   AND B.포인트공통룰처리유형내용1 = A.포인트구분코드
			   AND A.포인트거래년월 >= SUBSTR(${조회시작년월일}, 1, 6)
			   AND A.포인트거래년월 <= '99991231'
			   AND A.포인트실효예정년월일 >= ${포인트실효예정년월일시작}
			   AND A.포인트실효예정년월일 <= ${포인트실효예정년월일종료}
			   AND C.포인트공통룰ID = 'INQR01'              -- ?
			   AND C.포인트공통룰조회조건내용1 = 'ALL'      -- ?
			   AND C.포인트정보적용종료년월일 = '99991231'
			   AND C.포인트공통룰조회조건내용2 = A.포인트구분코드
			 GROUP 
			    BY A.고객식별자
			     , C.포인트공통룰처리유형내용1
			     , A.포인트거래년월
			 ORDER 
			    BY A.포인트거래년월
			     , C.포인트공통룰처리유형내용1
        ]]>
    </statement>
   
   
</statements>
