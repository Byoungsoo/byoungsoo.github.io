<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvGcbTrCtrlHisByItCtrl" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제로그Ebi::GCB거래통제로그Dao::GCB거래통제내역ByIT통제조회">
		<![CDATA[
			SELECT /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlLogEbi/TBGCBTR03/retvGcbTrCtrlHisByItCtrl */ 
			       A.거래통제등록일시
			     , A.거래통제거래제어코드
			     , A.거래통제부점구분코드
			     , A.거래통제부점코드
			     , A.거래통제채널세부구분코드
			     , A.통제등록사유구분코드
			     , A.거래통제등록사유
			     , A.등록부점코드
			     , A.등록직원번호
			     , A.거래통제시작일시
			     , A.거래통제종료일시
			     , A.통제시스템구분코드
			     , A.해제부점코드
			     , A.해제직원번호
			     , A.거래통제해제년월일
			     , A.거래통제해제시각
			  FROM INSTC.TBGCBTR03 A 
			 WHERE A.거래통제등록일시     >= ${거래통제등록일시1}
			   AND A.거래통제등록일시     <= ${거래통제등록일시2}
			   AND (('0' = ${조회구분코드} 
			     AND ${해제부점코드1} IS NULL)
			   OR   ('1' = ${조회구분코드} 
			     AND  A.해제부점코드        IS NULL)
			   OR   ('2' = ${조회구분코드} 
			     AND (A.해제부점코드       >= ${해제부점코드1}
			     AND  A.해제부점코드       <= ${해제부점코드2})))
			   AND (${통제등록사유구분코드1} IS NULL
			   OR (A.통제등록사유구분코드   >= ${통제등록사유구분코드1}
			   AND A.통제등록사유구분코드   <= ${통제등록사유구분코드2}))
		]]>
    </statement>

    <!--  -->
    <statement name="retvLckGcbTrCtrlLog" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제로그Ebi::GCB거래통제로그Dao::GCB거래통제로그락조회">
		<![CDATA[
			SELECT /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlLogEbi/TBGCBTR03/retvLckGcbTrCtrlLog */ 
			       A.거래통제등록일시
			     , A.거래통제거래제어코드
			     , A.거래통제부점구분코드
			     , A.거래통제부점코드
			     , A.거래통제채널세부구분코드
			     , A.통제등록사유구분코드
			     , A.거래통제등록사유
			     , A.등록부점코드
			     , A.등록직원번호
			     , A.거래통제시작일시
			     , A.거래통제종료일시
			     , A.통제시스템구분코드
			     , A.해제부점코드
			     , A.해제직원번호
			     , A.거래통제해제년월일
			     , A.거래통제해제시각
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBTR03 A 
			 WHERE A.거래통제등록일시 = ${거래통제등록일시}
			   FOR UPDATE NOWAIT
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbTrCtrlHisByTrCtrlLog" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제로그Ebi::GCB거래통제로그Dao::GCB거래통제내역By거래통제로그수정" >
		<![CDATA[
			UPDATE /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlLogEbi/TBGCBTR03/uptGcbTrCtrlHisByTrCtrlLog */ 
			       INSTC.TBGCBTR03 
			   SET 해제부점코드     = ${해제부점코드}
			     , 해제직원번호     = ${해제직원번호}
			     , 거래통제해제년월일  = ${거래통제해제년월일}
			     , 거래통제해제시각   = ${거래통제해제시각}
			     , 시스템최종갱신일시  = SYSTIMESTAMP
			     , 시스템최종갱신식별자 = ${시스템최종갱신식별자}
			     , 시스템최종거래일시  = ${시스템최종거래일시}
			 WHERE 거래통제등록일시 = ${거래통제등록일시}
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbTrCtrlLog" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제로그Ebi::GCB거래통제로그Dao::GCB거래통제로그등록">
		<![CDATA[
			INSERT /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlLogEbi/TBGCBTR03/regtGcbTrCtrlLog */
			  INTO INSTC.TBGCBTR03
			(
			   거래통제등록일시
			 , 거래통제거래제어코드
			 , 거래통제부점구분코드
			 , 거래통제부점코드
			 , 거래통제채널세부구분코드
			 , 통제등록사유구분코드
			 , 거래통제등록사유
			 , 등록부점코드
			 , 등록직원번호
			 , 거래통제시작일시
			 , 거래통제종료일시
			 , 통제시스템구분코드
			 , 해제부점코드
			 , 해제직원번호
			 , 거래통제해제년월일
			 , 거래통제해제시각
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${거래통제등록일시}
			 ,${거래통제거래제어코드}
			 ,${거래통제부점구분코드}
			 ,${거래통제부점코드}
			 ,${거래통제채널세부구분코드}
			 ,${통제등록사유구분코드}
			 ,${거래통제등록사유}
			 ,${등록부점코드}
			 ,${등록직원번호}
			 ,${거래통제시작일시}
			 ,${거래통제종료일시}
			 ,${통제시스템구분코드}
			 ,${해제부점코드}
			 ,${해제직원번호}
			 ,${거래통제해제년월일}
			 ,${거래통제해제시각}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>
</statements>
