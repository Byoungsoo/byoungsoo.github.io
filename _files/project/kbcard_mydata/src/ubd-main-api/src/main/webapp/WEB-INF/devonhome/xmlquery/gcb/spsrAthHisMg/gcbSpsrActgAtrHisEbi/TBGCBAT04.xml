<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvLckGcbSpsrActgAtrHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자회계권한내역Ebi::GCB책임자회계권한내역Dao::GCB책임자회계권한내역락조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrActgAtrHisEbi/TBGCBAT04/retvLckGcbSpsrActgAtrHis */ 
			       A.직원번호
			     , A.사용자권한구분코드
			     , A.적용시작년월일
			     , A.사용자권한일련번호
			     , A.사용자권한유효여부
			     , A.적용종료년월일
			     , A.소속부점코드
			     , A.사용자업무부점코드
			  FROM INSTC.TBGCBAT04 A 
			 WHERE A.직원번호      = ${직원번호}
			   AND A.사용자권한구분코드 = ${사용자권한구분코드}
			   AND A.적용시작년월일   = ${적용시작년월일}
			   AND A.사용자권한일련번호 = ${사용자권한일련번호}
			FOR UPDATE WAIT 0   
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbSpsrActgAtrHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자회계권한내역Ebi::GCB책임자회계권한내역Dao::GCB책임자회계권한내역등록" >
		<![CDATA[
			INSERT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrActgAtrHisEbi/TBGCBAT04/regtGcbSpsrActgAtrHis */
			  INTO INSTC.TBGCBAT04
			(
			   직원번호
			 , 사용자권한구분코드
			 , 적용시작년월일
			 , 사용자권한일련번호
			 , 사용자권한유효여부
			 , 적용종료년월일
			 , 소속부점코드
			 , 사용자업무부점코드
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${직원번호}
			 ,${사용자권한구분코드}
			 ,${적용시작년월일}
			 ,${사용자권한일련번호}
			 ,${사용자권한유효여부}
			 ,${적용종료년월일}
			 ,${소속부점코드}
			 ,${사용자업무부점코드}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="delGcbSpsrActgAtrHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자회계권한내역Ebi::GCB책임자회계권한내역Dao::GCB책임자회계권한내역삭제" >
		<![CDATA[
			DELETE /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrActgAtrHisEbi/TBGCBAT04/delGcbSpsrActgAtrHis */
			  FROM INSTC.TBGCBAT04  
			 WHERE 직원번호      = ${직원번호}
			   AND 사용자권한구분코드 = ${사용자권한구분코드}
			   AND 적용시작년월일   = ${적용시작년월일}
			   AND 사용자권한일련번호 = ${사용자권한일련번호}
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbSpsrActgAtrHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자회계권한내역Ebi::GCB책임자회계권한내역Dao::GCB책임자회계권한내역수정" >
		<![CDATA[
			UPDATE /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrActgAtrHisEbi/TBGCBAT04/uptGcbSpsrActgAtrHis */ 
			       INSTC.TBGCBAT04 
			   SET 사용자권한유효여부  = ${사용자권한유효여부}
			     , 적용종료년월일    = ${적용종료년월일}
			     , 소속부점코드     = ${소속부점코드}
			     , 사용자업무부점코드  = ${사용자업무부점코드}
			     , 시스템최종갱신일시  = SYSTIMESTAMP
			     , 시스템최종갱신식별자 = ${시스템최종갱신식별자}
			     , 시스템최종거래일시  = ${시스템최종거래일시}
			 WHERE 직원번호      = ${직원번호}
			   AND 사용자권한구분코드 = ${사용자권한구분코드}
			   AND 적용시작년월일   = ${적용시작년월일}
			   AND 사용자권한일련번호 = ${사용자권한일련번호}
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbSpsrActgAtrHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자회계권한내역Ebi::GCB책임자회계권한내역Dao::GCB책임자회계권한내역조회" >
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrActgAtrHisEbi/TBGCBAT04/retvGcbSpsrActgAtrHis */ 
			       A.직원번호
			     , A.사용자권한구분코드
			     , A.적용시작년월일
			     , A.사용자권한일련번호
			     , A.사용자권한유효여부
			     , A.적용종료년월일
			     , A.소속부점코드
			     , A.사용자업무부점코드
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBAT04 A 
			 WHERE A.직원번호      = ${직원번호}
			   AND A.사용자권한구분코드 = ${사용자권한구분코드}
			   AND A.적용시작년월일   = ${적용시작년월일}
			   AND A.사용자권한일련번호 = ${사용자권한일련번호}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbSpsrAtrTgp" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자회계권한내역Ebi::GCB책임자회계권한내역Dao::GCB책임자권한대상자목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrActgAtrHisEbi/TBGCBAT04/retvLstGcbSpsrAtrTgp */ 
			       A.직원번호
			     , A.사용자권한구분코드
			     , A.적용시작년월일
			     , A.사용자권한일련번호
			     , A.사용자권한유효여부
			     , A.적용종료년월일
			     , A.소속부점코드
			     , A.사용자업무부점코드
			  FROM INSTC.TBGCBAT04 A 
			 WHERE (A.직원번호      = ${직원번호}
			      OR ${직원번호} IS NULL)
			   AND (A.사용자권한구분코드 = ${사용자권한구분코드}
			      OR ${사용자권한구분코드} IS NULL)
			   AND A.적용시작년월일 <= ${조회종료년월일_V8} 
			   AND A.적용종료년월일 >= ${조회시작년월일_V8}
			   AND A.소속부점코드 = ${소속부점코드}
			ORDER BY A.적용시작년월일 DESC, A.직원번호 ASC, A.사용자권한구분코드 ASC
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbSpsrActgAtrHisSnoNbr" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자회계권한내역Ebi::GCB책임자회계권한내역Dao::GCB책임자회계권한내역일련번호채번조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrActgAtrHisEbi/TBGCBAT04/retvGcbSpsrActgAtrHisSnoNbr */ 
			       NVL(MAX(A.사용자권한일련번호), 0) + 1 사용자권한일련번호
			  FROM INSTC.TBGCBAT04 A 
			 WHERE A.직원번호      = ${직원번호}
			   AND A.사용자권한구분코드 = ${사용자권한구분코드}
			   AND A.적용시작년월일   = ${적용시작년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbSpsrActgAtrHisPrvRgYn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자회계권한내역Ebi::GCB책임자회계권한내역Dao::GCB책임자회계권한내역기등록여부조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrActgAtrHisEbi/TBGCBAT04/retvGcbSpsrActgAtrHisPrvRgYn */ 
			       COUNT(*) 조회건수_N3
			  FROM INSTC.TBGCBAT04 A 
			 WHERE A.직원번호      = ${직원번호}
			   AND A.사용자권한구분코드 = ${사용자권한구분코드}
			   AND A.적용시작년월일 <= ${조회종료년월일_V8} 
			   AND A.적용종료년월일 >= ${조회시작년월일_V8}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbSpsrActgAtrByEmpDtl" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자회계권한내역Ebi::GCB책임자회계권한내역Dao::GCB책임자회계권한By직원상세목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrActgAtrHisEbi/TBGCBAT04/retvLstGcbSpsrActgAtrByEmpDtl */ 
			       A.직원번호
			     , A.사용자권한구분코드
			     , A.적용시작년월일
			     , A.사용자권한일련번호
			     , A.사용자권한유효여부
			     , A.적용종료년월일
			     , A.소속부점코드
			     , A.사용자업무부점코드
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBAT04 A 
			 WHERE A.직원번호      = ${직원번호} 
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbSpsrActgAtrVldYn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::14.책임자승인내역관리::GCB책임자회계권한내역Ebi::GCB책임자회계권한내역Dao::GCB책임자회계권한유효여부조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/spsrAthHisMg/gcbSpsrActgAtrHisEbi/TBGCBAT04/retvGcbSpsrActgAtrVldYn */ 
			       COUNT(*) 조회건수_N3
			  FROM INSTC.TBGCBAT04 A 
			 WHERE A.직원번호      = ${직원번호}
			   AND A.사용자권한구분코드 = ${사용자권한구분코드}
			   AND A.사용자권한유효여부 = ${사용자권한유효여부}
			   AND A.적용시작년월일 <= ${적용시작년월일} 
			   AND A.적용종료년월일 >= ${적용종료년월일}
		]]>
    </statement>
</statements>
