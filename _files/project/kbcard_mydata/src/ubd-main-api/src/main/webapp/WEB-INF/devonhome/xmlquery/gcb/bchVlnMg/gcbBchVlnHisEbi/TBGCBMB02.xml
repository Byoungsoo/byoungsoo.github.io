<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvLstGcbBchVlnHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::13.배치검증관리::GCB배치검증내역Ebi::GCB배치검증내역Dao::GCB배치검증내역목록조회">
		<![CDATA[
			SELECT /*+ 위상규::/gcb/bchVlnMg/gcbBchVlnHisEbi/TBGCBMB02/retvLstGcbBchVlnHis */ 
			       A.어플리케이션구분코드
			     , A.배치작업검증대분류내용
			     , A.배치작업검증중분류내용
			     , A.배치작업검증소분류내용
			     , A.배치작업검증분류일련번호
			     , A.생성년월일
			     , A.결제년월일
			     , A.카드결제기관구분코드
			     , A.카드결제방법구분코드
			     , A.배치작업검증대상처리건수
			     , A.배치작업검증대상처리금액
			     , A.배치작업검증대상제외여부
			     , TO_CHAR(시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBMB02 A 
			 WHERE A.어플리케이션구분코드 = ${어플리케이션구분코드}
			   AND A.배치작업검증대분류내용 = ${배치작업검증대분류내용}
			   AND A.배치작업검증중분류내용 = ${배치작업검증중분류내용}
			   AND A.배치작업검증소분류내용 = ${배치작업검증소분류내용}
			   AND A.배치작업검증분류일련번호 = ${배치작업검증분류일련번호}
			   AND A.생성년월일 >= NVL(${생성년월일1}, ' ')
			   AND A.생성년월일 <= ${생성년월일2}
			   AND (${결제년월일} IS NULL OR A.결제년월일 = ${결제년월일})
			   AND (${카드결제기관구분코드} IS NULL OR A.카드결제기관구분코드 = ${카드결제기관구분코드})
			   AND (${카드결제방법구분코드} IS NULL OR A.카드결제방법구분코드 = ${카드결제방법구분코드})
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbBchVlnHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::13.배치검증관리::GCB배치검증내역Ebi::GCB배치검증내역Dao::GCB배치검증내역조회">
		<![CDATA[
			SELECT /*+ 위상규::/gcb/bchVlnMg/gcbBchVlnHisEbi/TBGCBMB02/retvGcbBchVlnHis */ 
			       A.어플리케이션구분코드
			     , A.배치작업검증대분류내용
			     , A.배치작업검증중분류내용
			     , A.배치작업검증소분류내용
			     , A.배치작업검증분류일련번호
			     , A.생성년월일
			     , A.결제년월일
			     , A.카드결제기관구분코드
			     , A.카드결제방법구분코드
			     , A.배치작업검증대상처리건수
			     , A.배치작업검증대상처리금액
			     , A.배치작업검증대상제외여부
			     , TO_CHAR(시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBMB02 A 
			 WHERE A.어플리케이션구분코드  = ${어플리케이션구분코드}
			   AND A.배치작업검증대분류내용 = ${배치작업검증대분류내용}
			   AND A.배치작업검증중분류내용 = ${배치작업검증중분류내용}
			   AND A.배치작업검증소분류내용 = ${배치작업검증소분류내용}
			   AND A.배치작업검증분류일련번호 = ${배치작업검증분류일련번호}
			   AND A.생성년월일 = ${생성년월일}
			   AND (${결제년월일} IS NULL OR A.결제년월일 = ${결제년월일})
			   AND (${카드결제기관구분코드} IS NULL OR A.카드결제기관구분코드 = ${카드결제기관구분코드})
			   AND (${카드결제방법구분코드} IS NULL OR A.카드결제방법구분코드 = ${카드결제방법구분코드})
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbBchVlnHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::13.배치검증관리::GCB배치검증내역Ebi::GCB배치검증내역Dao::GCB배치검증내역수정">
		<![CDATA[
			UPDATE /*+ 위상규::/gcb/bchVlnMg/gcbBchVlnHisEbi/TBGCBMB02/uptGcbBchVlnHis */ 
			       INSTC.TBGCBMB02 
			   SET 배치작업검증대상처리건수 = ${배치작업검증대상처리건수}
			     , 배치작업검증대상처리금액 = ${배치작업검증대상처리금액}
			     , 배치작업검증대상제외여부 = ${배치작업검증대상제외여부}
			     , 시스템최종갱신일시    = SYSTIMESTAMP
			     , 시스템최종갱신식별자   = ${시스템최종갱신식별자}
			     , 시스템최종거래일시    = ${시스템최종거래일시}
			 WHERE 어플리케이션구분코드   = ${어플리케이션구분코드}
			   AND 배치작업검증대분류내용  = ${배치작업검증대분류내용}
			   AND 배치작업검증중분류내용  = ${배치작업검증중분류내용}
			   AND 배치작업검증소분류내용  = ${배치작업검증소분류내용}
			   AND 배치작업검증분류일련번호 = ${배치작업검증분류일련번호}
			   AND 생성년월일        = ${생성년월일}
			   AND (${결제년월일} IS NULL OR 결제년월일 = ${결제년월일})
			   AND (${카드결제기관구분코드} IS NULL OR 카드결제기관구분코드 = ${카드결제기관구분코드})
			   AND (${카드결제방법구분코드} IS NULL OR 카드결제방법구분코드 = ${카드결제방법구분코드})
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbBchVlnHisRst" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::13.배치검증관리::GCB배치검증내역Ebi::GCB배치검증내역Dao::GCB배치검증내역결과조회">
		<![CDATA[
			SELECT /*+ 위상규::/gcb/bchVlnMg/gcbBchVlnHisEbi/TBGCBMB02/retvGcbBchVlnHisRst */ 
			       COUNT(1) 대상건수_N11
			     , NVL(SUM(배치작업검증대상처리건수), 0) 총검증건수_N11
			     , NVL(MIN(배치작업검증대상처리건수), 0) 최소검증건수_N11
			     , NVL(MAX(배치작업검증대상처리건수), 0) 최대검증건수_N11
			     , NVL(SUM(배치작업검증대상처리금액), 0) 총검증금액_N15
			     , NVL(MIN(배치작업검증대상처리금액), 0) 최소검증금액_N15
			     , NVL(MAX(배치작업검증대상처리금액), 0) 최대검증금액_N15
			  FROM INSTC.TBGCBMB02 A
			 WHERE A.어플리케이션구분코드   = ${어플리케이션구분코드}
			   AND A.배치작업검증대분류내용  = ${배치작업검증대분류내용}
			   AND A.배치작업검증중분류내용  = ${배치작업검증중분류내용}
			   AND A.배치작업검증소분류내용  = ${배치작업검증소분류내용}
			   AND A.배치작업검증분류일련번호 = ${배치작업검증분류일련번호}
			   AND A.생성년월일 >= NVL(${생성년월일1}, ' ')
			   AND A.생성년월일 <= ${생성년월일2}
			   AND (${결제년월일1} IS NULL OR ${결제년월일2} IS NULL OR (결제년월일 >= ${결제년월일1} AND 결제년월일 <= ${결제년월일2}))
			   AND (${결제일} IS NULL OR SUBSTR(결제년월일, 7, 2) = ${결제일})
			   AND (${카드결제기관구분코드1} IS NULL OR (카드결제기관구분코드  >= ${카드결제기관구분코드1} AND 카드결제기관구분코드  <= ${카드결제기관구분코드2}))
			   AND (${카드결제방법구분코드1} IS NULL OR (카드결제방법구분코드  >= ${카드결제방법구분코드1} AND 카드결제방법구분코드  <= ${카드결제방법구분코드2}))
			   AND (배치작업검증대상제외여부  = '0' OR 배치작업검증대상제외여부 IS NULL)
		]]>
    </statement>
</statements>
