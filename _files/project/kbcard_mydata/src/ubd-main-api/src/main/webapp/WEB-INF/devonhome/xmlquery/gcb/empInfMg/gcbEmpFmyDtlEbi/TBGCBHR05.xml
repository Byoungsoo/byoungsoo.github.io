<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvGcbEmpFmyDtlByCtrlTg" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::03.직원정보관리::GCB직원가족상세Ebi::GCB직원가족상세Dao::GCB직원가족상세By통제대상조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/empInfMg/gcbEmpFmyDtlEbi/TBGCBHR05/retvGcbEmpFmyDtlByCtrlTg */ 
			       A.직원가족관계구분코드
			     , '1' 통제대상여부_V1
			  FROM INSTC.TBGCBHR05 A 
			 WHERE A.직원번호   = ${직원번호}
			   AND A.고객식별자  = ${고객식별자}
			   AND A.고객관리번호 = ${고객관리번호}
			   AND A.사용여부   = ${사용여부}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbEmpFmyDtlByCtrlTg" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::03.직원정보관리::GCB직원가족상세Ebi::GCB직원가족상세Dao::GCB직원가족상세By통제대상목록조회">
		<![CDATA[
			SELECT /*+ 김남식::/gcb/empInfMg/gcbEmpFmyDtlEbi/TBGCBHR05/retvLstGcbEmpFmyDtlByCtrlTg */ 
			       A.직원번호
			     , A.고객식별자
			     , A.고객관리번호
			     , A.직원가족관계구분코드
			     , A.사용여부
			     , TO_CHAR(시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBHR05 A 
			 WHERE ( '1' = ${조회구분코드}
			   AND A.직원번호   = ${직원번호} )
			    OR ( '2' = ${조회구분코드}
			   AND A.고객식별자  = ${고객식별자})
		]]>
    </statement>

    <!--  -->
    <statement name="retvLckGcbEmpFmyDtl" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::03.직원정보관리::GCB직원가족상세Ebi::GCB직원가족상세Dao::GCB직원가족상세락조회">
		<![CDATA[
			SELECT /*+ 김남식::/gcb/empInfMg/gcbEmpFmyDtlEbi/TBGCBHR05/retvLckGcbEmpFmyDtl */ 
			       A.직원번호
			     , A.고객식별자
			     , A.고객관리번호
			     , A.직원가족관계구분코드
			     , A.사용여부
			     , TO_CHAR(시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBHR05 A 
			 WHERE A.직원번호   = ${직원번호}
			   AND A.고객식별자  = ${고객식별자}
			   AND A.고객관리번호 = ${고객관리번호}
			   FOR UPDATE NOWAIT
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbEmpFmyDtl" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::03.직원정보관리::GCB직원가족상세Ebi::GCB직원가족상세Dao::GCB직원가족상세등록" >
		<![CDATA[
			INSERT /*+ 김남식::/gcb/empInfMg/gcbEmpFmyDtlEbi/TBGCBHR05/regtGcbEmpFmyDtl */
			  INTO INSTC.TBGCBHR05
			(
			   직원번호
			 , 고객식별자
			 , 고객관리번호
			 , 직원가족관계구분코드
			 , 사용여부
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${직원번호}
			 ,${고객식별자}
			 ,${고객관리번호}
			 ,${직원가족관계구분코드}
			 ,${사용여부}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbEmpFmyDtl" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::03.직원정보관리::GCB직원가족상세Ebi::GCB직원가족상세Dao::GCB직원가족상세수정" >
		<![CDATA[
			UPDATE /*+ 김남식::/gcb/empInfMg/gcbEmpFmyDtlEbi/TBGCBHR05/uptGcbEmpFmyDtl */ 
			       INSTC.TBGCBHR05 
			   SET 직원가족관계구분코드 = ${직원가족관계구분코드}
			     , 사용여부       = ${사용여부}
			     , 시스템최종갱신일시  = SYSTIMESTAMP
			     , 시스템최종갱신식별자 = ${시스템최종갱신식별자}
			     , 시스템최종거래일시  = ${시스템최종거래일시}
			 WHERE 직원번호   = ${직원번호}
			   AND 고객식별자  = ${고객식별자}
			   AND 고객관리번호 = ${고객관리번호}
		]]>
    </statement>

    <!--  -->
    <statement name="delGcbEmpFmyDtl" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::03.직원정보관리::GCB직원가족상세Ebi::GCB직원가족상세Dao::GCB직원가족상세삭제" >
		<![CDATA[
			DELETE /*+ 김남식::/gcb/empInfMg/gcbEmpFmyDtlEbi/TBGCBHR05/delGcbEmpFmyDtl */
			  FROM INSTC.TBGCBHR05  
			 WHERE 직원번호   = ${직원번호}
			   AND 고객식별자  = ${고객식별자}
			   AND 고객관리번호 = ${고객관리번호}
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbEmpFmyDtl" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::03.직원정보관리::GCB직원가족상세Ebi::GCB직원가족상세Dao::GCB직원가족상세조회" >
		<![CDATA[
			SELECT /*+ 김남식::/gcb/empInfMg/gcbEmpFmyDtlEbi/TBGCBHR05/retvGcbEmpFmyDtl */ 
			       A.직원번호
			     , A.고객식별자
			     , A.고객관리번호
			     , A.직원가족관계구분코드
			     , A.사용여부
			     , TO_CHAR(시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBHR05 A 
			 WHERE A.직원번호   = ${직원번호}
			   AND A.고객식별자  = ${고객식별자}
			   AND A.고객관리번호 = ${고객관리번호}
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbEmpFmyDtlByCsidCtrlTg" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::03.직원정보관리::GCB직원가족상세Ebi::GCB직원가족상세Dao::GCB직원가족상세By고객식별자통제대상조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/empInfMg/gcbEmpFmyDtlEbi/TBGCBHR05/retvGcbEmpFmyDtlByCsidCtrlTg */ 
			       A.직원번호
			     , A.직원가족관계구분코드
			     , '1' 통제대상여부_V1
			  FROM INSTC.TBGCBHR05 A 
			 WHERE A.고객식별자   = ${고객식별자}
			   AND A.고객관리번호 = ${고객관리번호}
			   AND A.사용여부     = ${사용여부}
			   AND ROWNUM = 1
		]]>
    </statement>
</statements>
