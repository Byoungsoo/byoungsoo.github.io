<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvGcbErrTrMngEcpBseNcn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB오류거래모니터링예외기준Ebi::GCB오류거래모니터링예외기준Dao::GCB오류거래모니터링예외기준건수조회">
		<![CDATA[
			SELECT /*+ 박혜림::/gcb/itObstMgSpt/gcbErrTrMngEcpBseEbi/TBGCBEM14/retvGcbErrTrMngEcpBseNcn */ 
			       A.거래코드
			     , COUNT(*) 검증등록건수_N4
			  FROM INSTC.TBGCBEM14 A        /* GCB오류거래모니터링예외기준 */
			 WHERE (A.거래코드    LIKE ${어플리케이션코드} || '%')
			   AND (A.거래코드 = ${거래코드} OR ${거래코드} IS NULL)
			 GROUP BY A.거래코드
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbErrTrMngEcpBseDtl" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB오류거래모니터링예외기준Ebi::GCB오류거래모니터링예외기준Dao::GCB오류거래모니터링예외기준상세조회">
		<![CDATA[
			SELECT /*+ 박혜림::/gcb/itObstMgSpt/gcbErrTrMngEcpBseEbi/TBGCBEM14/retvGcbErrTrMngEcpBseDtl */ 
			       A.채널구분코드
			     , A.채널세부업무구분코드
			     , A.거래코드
			     , A.상품처리거래검증일련번호
			     , A.상품처리거래검증기준구분코드
			     , A.상품처리거래검증오차허용범위율
			     , A.상품처리거래검증제외여부
			     , A.상품처리거래검증대상구분코드
			     , A.오류메시지코드
			     , A.조치메시지코드
			     , A.IT운영SMS일련번호
			     , A.IT운영SMS부가일련번호
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBEM14 A        /* GCB오류거래모니터링예외기준 */
			 WHERE  A.거래코드         = ${거래코드}
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbErrTrMngEcpBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB오류거래모니터링예외기준Ebi::GCB오류거래모니터링예외기준Dao::GCB오류거래모니터링예외기준등록" >
		<![CDATA[
			INSERT /*+ 박혜림::/gcb/itObstMgSpt/gcbErrTrMngEcpBseEbi/TBGCBEM14/regtGcbErrTrMngEcpBse */
			  INTO INSTC.TBGCBEM14        /* GCB오류거래모니터링예외기준 */
			(
			   채널구분코드
			 , 채널세부업무구분코드
			 , 거래코드
			 , 상품처리거래검증일련번호
			 , 상품처리거래검증기준구분코드
			 , 상품처리거래검증오차허용범위율
			 , 상품처리거래검증제외여부
			 , 상품처리거래검증대상구분코드
			 , 오류메시지코드
			 , 조치메시지코드
			 , IT운영SMS일련번호
			 , IT운영SMS부가일련번호
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${채널구분코드}
			 ,${채널세부업무구분코드}
			 ,${거래코드}
			 ,${상품처리거래검증일련번호}
			 ,${상품처리거래검증기준구분코드}
			 ,${상품처리거래검증오차허용범위율}
			 ,${상품처리거래검증제외여부}
			 ,${상품처리거래검증대상구분코드}
			 ,${오류메시지코드}
			 ,${조치메시지코드}
			 ,${IT운영SMS일련번호}
			 ,${IT운영SMS부가일련번호}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="retvLckGcbErrTrMngEcpBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB오류거래모니터링예외기준Ebi::GCB오류거래모니터링예외기준Dao::GCB오류거래모니터링예외기준락조회">
		<![CDATA[
			SELECT /*+ 박혜림::/gcb/itObstMgSpt/gcbErrTrMngEcpBseEbi/TBGCBEM14/retvLckGcbErrTrMngEcpBse */ 
			       A.채널구분코드
			     , A.채널세부업무구분코드
			     , A.거래코드
			     , A.상품처리거래검증일련번호
			     , A.상품처리거래검증기준구분코드
			     , A.상품처리거래검증오차허용범위율
			     , A.상품처리거래검증제외여부
			     , A.상품처리거래검증대상구분코드
			     , A.오류메시지코드
			     , A.조치메시지코드
			     , A.IT운영SMS일련번호
			     , A.IT운영SMS부가일련번호
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBEM14 A        /* GCB오류거래모니터링예외기준 */
			 WHERE A.채널구분코드       = ${채널구분코드}
			   AND A.채널세부업무구분코드   = ${채널세부업무구분코드}
			   AND A.거래코드         = ${거래코드}
			   AND A.상품처리거래검증일련번호 = ${상품처리거래검증일련번호}
			 FOR UPDATE WAIT 3   
		]]>
    </statement>
</statements>
