<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvLstBhInfByClsrBh" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::02.공통정보관리::01.부점정보관리::은행통폐합영업점부점관계정보등록Job::DAO::은행통폐합영업점부점관계정보등록Bdao::부점정보By폐쇄부점목록조회">
		<![CDATA[
			SELECT /*+ 박재훈::/gcb/batch/cmnInfMg/bhInfMg/bkMergBbrBhRelInfRgJob/BkMergBbrBhRelInfRg/retvLstBhInfByClsrBh */ 
			       A.부점코드
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.부점개점년월일
			     , A.부점폐쇄년월일
			     , A.한글부점명
			     , A.부점구분코드
			     , A.통합부점코드
			     , A.지주회사구분코드
			  FROM INSTC.TBGCBBR01 A        /* GCB부점기본 */
			 WHERE A.지주회사구분코드 = '01'
			 AND   A.부점폐쇄년월일  BETWEEN  ${적용시작년월일}
			 AND   ${적용종료년월일}
			 AND   A.통합부점코드 IS NOT NULL
			 AND   A.부점구분코드 IN ('03','04','09','10','20','21','22','23','24','25','26')
		]]>
    </statement>

    <!--  -->
    <statement name="regtCrdBhUperLowrRel" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::02.공통정보관리::01.부점정보관리::은행통폐합영업점부점관계정보등록Job::DAO::은행통폐합영업점부점관계정보등록Bdao::카드부점상하관계등록" >
		<![CDATA[
			INSERT /*+ 박재훈::/gcb/batch/cmnInfMg/bhInfMg/bkMergBbrBhRelInfRgJob/BkMergBbrBhRelInfRg/regtCrdBhUperLowrRel */
			  INTO INSTC.TBGCBBR02        /* GCB카드부점상하관계 */
			(
			   상위부점코드
			 , 하위부점코드
			 , 카드부점관계구분코드
			 , 변경일련번호
			 , 적용시작년월일
			 , 적용종료년월일
			 , 카드거래매체구분코드
			 , 등록부점코드
			 , 등록직원번호
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${상위부점코드}
			 ,${하위부점코드}
			 ,${카드부점관계구분코드}
			 ,${변경일련번호}
			 ,${적용시작년월일}
			 ,${적용종료년월일}
			 ,${카드거래매체구분코드}
			 ,${등록부점코드}
			 ,${등록직원번호}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstCrdBhUperLowrRelByPrvRgYn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::02.공통정보관리::01.부점정보관리::은행통폐합영업점부점관계정보등록Job::DAO::은행통폐합영업점부점관계정보등록Bdao::카드부점상하관계By기등록여부목록조회">
		<![CDATA[
			SELECT /*+ 박재훈::/gcb/batch/cmnInfMg/bhInfMg/bkMergBbrBhRelInfRgJob/BkMergBbrBhRelInfRg/retvLstCrdBhUperLowrRelByPrvRgYn */ 
			       A.상위부점코드
			     , A.하위부점코드
			     , A.카드부점관계구분코드
			     , A.변경일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.카드거래매체구분코드
			     , A.등록부점코드
			     , A.등록직원번호
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBBR02 A        /* GCB카드부점상하관계 */
			 WHERE A.상위부점코드     = ${상위부점코드}
			   AND A.하위부점코드     = ${하위부점코드}
			   AND A.카드부점관계구분코드 = '83'
			   AND A.적용시작년월일    = ${적용시작년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvCrdBhUperLowrRelVldNcn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::02.공통정보관리::01.부점정보관리::은행통폐합영업점부점관계정보등록Job::DAO::은행통폐합영업점부점관계정보등록Bdao::카드부점상하관계유효건수조회">
		<![CDATA[
			SELECT /*+ 박재훈::/gcb/batch/cmnInfMg/bhInfMg/bkMergBbrBhRelInfRgJob/BkMergBbrBhRelInfRg/retvCrdBhUperLowrRelVldNcn */ 
			       COUNT(*) 조회건수_N5
			  FROM INSTC.TBGCBBR02 A        /* GCB카드부점상하관계 */
			 WHERE A.상위부점코드  = ${상위부점코드}
			   AND A.카드부점관계구분코드 = '83'
			   AND A.적용종료년월일    >= ${적용종료년월일}
		]]>
    </statement>
</statements>
