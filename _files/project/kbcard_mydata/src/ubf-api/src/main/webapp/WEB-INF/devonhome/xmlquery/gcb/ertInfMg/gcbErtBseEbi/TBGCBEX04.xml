<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvGcbErtBseLstErtAplNth" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준최종환율적용회차조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/retvGcbErtBseLstErtAplNth */ 
			       NVL(MAX(A.환율적용회차),0) 최종환율적용회차_N3
			  FROM ( SELECT A.환율적용회차
			           FROM INSTC.TBGCBEX04 A 
			          WHERE A.기준년월일  = ${기준년월일}
			            AND A.환율등록완료여부 = ${환율등록완료여부}
			            AND ${통화코드} IS NULL
			         UNION ALL
			         SELECT A.환율적용회차
			           FROM INSTC.TBGCBEX04 A 
			          WHERE A.기준년월일  = ${기준년월일}
			            AND A.환율등록완료여부 = ${환율등록완료여부}
			            AND ${통화코드} IS NOT NULL AND A.통화코드   = ${통화코드}
			       ) A
			
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbErtBseInf" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준정보조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/retvGcbErtBseInf */ 
			       A.통화코드
			     , A.기준년월일
			     , A.환율적용회차
			     , A.환율등록완료여부
			     , A.환율등록시작시각
			     , A.환율등록완료시각
			     , A.교차환율
			     , A.매매기준율
			     , A.대미환산율
			     , A.전신환매입률
			     , A.전신환매도율
			     , A.현찰매입률
			     , A.현찰매도율
			     , A.TC매도율
			     , A.ISO통화코드
			     , A.ISO국가코드
			     , A.한글ISO국가명
			     , A.N100단위통화여부
			     , A.한글통화코드명
			     , A.영문통화코드명
			     , A.통화코드일련번호
			     , A.통화코드조회순서
			     , B.매매기준율   "1회차매매기준율_N9_4"
			  FROM INSTC.TBGCBEX04 A
			     , INSTC.TBGCBEX04 B
			 WHERE A.통화코드     = ${통화코드}
			   AND A.기준년월일    = ${기준년월일}
			   AND A.환율적용회차   = ${환율적용회차}
			   AND A.환율등록완료여부 = ${환율등록완료여부}
			   AND B.통화코드 = A.통화코드
			   AND B.기준년월일 = A.기준년월일
			   AND B.환율적용회차 = 1
			   AND B.환율등록완료여부 = A.환율등록완료여부
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbErtBseInfCurSnoSeq" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준정보통화일련번호순서목록조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/retvLstGcbErtBseInfCurSnoSeq */
			       A.통화코드
			     , A.기준년월일
			     , A.환율적용회차
			     , A.환율등록완료여부
			     , A.환율등록시작시각
			     , A.환율등록완료시각
			     , A.교차환율
			     , A.매매기준율
			     , A.대미환산율
			     , A.전신환매입률
			     , A.전신환매도율
			     , A.현찰매입률
			     , A.현찰매도율
			     , A.TC매도율
			     , A.ISO통화코드
			     , A.ISO국가코드
			     , A.한글ISO국가명
			     , A.N100단위통화여부
			     , A.한글통화코드명
			     , A.영문통화코드명
			     , A.통화코드일련번호
			     , A.통화코드조회순서
			     , B.매매기준율   "1회차매매기준율_N9_4"
			  FROM INSTC.TBGCBEX04 A 
			     , INSTC.TBGCBEX04 B 
			 WHERE A.기준년월일    = ${기준년월일}
			   AND A.환율적용회차   = ${환율적용회차}
			   AND A.환율등록완료여부 = ${환율등록완료여부}
			   AND ( ( ${조회구분코드_V1} = '1' AND A.통화코드조회순서 > 0 )
			        OR ${조회구분코드_V1} = '2')
			   AND B.통화코드 = A.통화코드
			   AND B.기준년월일 = A.기준년월일
			   AND B.환율적용회차 = 1
			   AND B.환율등록완료여부 = A.환율등록완료여부  
			 ORDER BY A.통화코드일련번호 
			        , A.기준년월일
			        , A.환율적용회차
			        , A.환율등록완료여부
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbErtBseInfCurInqSeq" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준정보통화조회순서목록조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/retvLstGcbErtBseInfCurInqSeq */ 
			       A.통화코드
			     , A.기준년월일
			     , A.환율적용회차
			     , A.환율등록완료여부
			     , A.환율등록시작시각
			     , A.환율등록완료시각
			     , A.교차환율
			     , A.매매기준율
			     , A.대미환산율
			     , A.전신환매입률
			     , A.전신환매도율
			     , A.현찰매입률
			     , A.현찰매도율
			     , A.TC매도율
			     , A.ISO통화코드
			     , A.ISO국가코드
			     , A.한글ISO국가명
			     , A.N100단위통화여부
			     , A.한글통화코드명
			     , A.영문통화코드명
			     , A.통화코드일련번호
			     , A.통화코드조회순서
			     , B.매매기준율   "1회차매매기준율_N9_4"
			  FROM INSTC.TBGCBEX04 A
			     , INSTC.TBGCBEX04 B 
			 WHERE A.기준년월일    = ${기준년월일}
			   AND A.환율적용회차   = ${환율적용회차}
			   AND A.환율등록완료여부 = ${환율등록완료여부}
			   AND ( ( ${조회구분코드_V1} = '1' AND A.통화코드조회순서 > 0 )
			        OR ${조회구분코드_V1} = '2')
			   AND B.통화코드 = A.통화코드
			   AND B.기준년월일 = A.기준년월일
			   AND B.환율적용회차 = 1
			   AND B.환율등록완료여부 = A.환율등록완료여부  
			 ORDER BY A.통화코드조회순서
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbErtBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준등록" >
		<![CDATA[
			INSERT /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/regtGcbErtBse */
			  INTO INSTC.TBGCBEX04
			(
			   통화코드
			 , 기준년월일
			 , 환율적용회차
			 , 환율등록완료여부
			 , 환율등록시작시각
			 , 환율등록완료시각
			 , 교차환율
			 , 매매기준율
			 , 대미환산율
			 , 전신환매입률
			 , 전신환매도율
			 , 현찰매입률
			 , 현찰매도율
			 , TC매도율
			 , ISO통화코드
			 , ISO국가코드
			 , 한글ISO국가명
			 , N100단위통화여부
			 , 한글통화코드명
			 , 영문통화코드명
			 , 통화코드일련번호
			 , 통화코드조회순서
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${통화코드}
			 ,${기준년월일}
			 ,${환율적용회차}
			 ,${환율등록완료여부}
			 ,${환율등록시작시각}
			 ,${환율등록완료시각}
			 ,${교차환율}
			 ,${매매기준율}
			 ,${대미환산율}
			 ,${전신환매입률}
			 ,${전신환매도율}
			 ,${현찰매입률}
			 ,${현찰매도율}
			 ,${TC매도율}
			 ,${ISO통화코드}
			 ,${ISO국가코드}
			 ,${한글ISO국가명}
			 ,${N100단위통화여부}
			 ,${한글통화코드명}
			 ,${영문통화코드명}
			 ,${통화코드일련번호}
			 ,${통화코드조회순서}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="delGcbErtBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준삭제" >
		<![CDATA[
			DELETE /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/delGcbErtBse */
			  FROM INSTC.TBGCBEX04  
			 WHERE 통화코드   = ${통화코드}
			   AND 기준년월일  = ${기준년월일}
			   AND 환율적용회차 = ${환율적용회차}
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbErtBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준수정" >
		<![CDATA[
			UPDATE /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/uptGcbErtBse */ 
			       INSTC.TBGCBEX04 
			   SET 환율등록완료여부   = ${환율등록완료여부}
			     , 환율등록시작시각   = ${환율등록시작시각}
			     , 환율등록완료시각   = ${환율등록완료시각}
			     , 교차환율       = ${교차환율}
			     , 매매기준율      = ${매매기준율}
			     , 대미환산율      = ${대미환산율}
			     , 전신환매입률     = ${전신환매입률}
			     , 전신환매도율     = ${전신환매도율}
			     , 현찰매입률      = ${현찰매입률}
			     , 현찰매도율      = ${현찰매도율}
			     , TC매도율      = ${TC매도율}
			     , ISO통화코드    = ${ISO통화코드}
			     , ISO국가코드    = ${ISO국가코드}
			     , 한글ISO국가명   = ${한글ISO국가명}
			     , N100단위통화여부 = ${N100단위통화여부}
			     , 한글통화코드명    = ${한글통화코드명}
			     , 영문통화코드명    = ${영문통화코드명}
			     , 통화코드일련번호   = ${통화코드일련번호}
			     , 통화코드조회순서   = ${통화코드조회순서}
			     , 시스템최종갱신일시  = SYSTIMESTAMP
			     , 시스템최종갱신식별자 = ${시스템최종갱신식별자}
			     , 시스템최종거래일시  = ${시스템최종거래일시}
			 WHERE 통화코드   = ${통화코드}
			   AND 기준년월일  = ${기준년월일}
			   AND 환율적용회차 = ${환율적용회차}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLckGcbErtBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준락조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/retvLckGcbErtBse */ 
			       A.통화코드
			     , A.기준년월일
			     , A.환율적용회차
			     , A.환율등록완료여부
			     , A.환율등록시작시각
			     , A.환율등록완료시각
			     , A.교차환율
			     , A.매매기준율
			     , A.대미환산율
			     , A.전신환매입률
			     , A.전신환매도율
			     , A.현찰매입률
			     , A.현찰매도율
			     , A.TC매도율
			     , A.ISO통화코드
			     , A.ISO국가코드
			     , A.한글ISO국가명
			     , A.N100단위통화여부
			     , A.한글통화코드명
			     , A.영문통화코드명
			     , A.통화코드일련번호
			     , A.통화코드조회순서
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBEX04 A 
			 WHERE A.통화코드   = ${통화코드}
			   AND A.기준년월일  = ${기준년월일}
			   AND A.환율적용회차 = ${환율적용회차}
			   FOR UPDATE NOWAIT   
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbErtBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준조회" >
		<![CDATA[
			SELECT /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/retvGcbErtBse */ 
			       A.통화코드
			     , A.기준년월일
			     , A.환율적용회차
			     , A.환율등록완료여부
			     , A.환율등록시작시각
			     , A.환율등록완료시각
			     , A.교차환율
			     , A.매매기준율
			     , A.대미환산율
			     , A.전신환매입률
			     , A.전신환매도율
			     , A.현찰매입률
			     , A.현찰매도율
			     , A.TC매도율
			     , A.ISO통화코드
			     , A.ISO국가코드
			     , A.한글ISO국가명
			     , A.N100단위통화여부
			     , A.한글통화코드명
			     , A.영문통화코드명
			     , A.통화코드일련번호
			     , A.통화코드조회순서
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBEX04 A 
			 WHERE A.통화코드   = ${통화코드}
			   AND A.기준년월일  = ${기준년월일}
			   AND A.환율적용회차 = ${환율적용회차}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbErtBseByBkDealBsrt" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준By은행매매기준율목록조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/retvLstGcbErtBseByBkDealBsrt */ 
			       A.통화코드
			     , A.환율적용회차
			     , A.매매기준율
			  FROM INSTC.TBGCBEX04 A 
			 WHERE A.통화코드   = ${통화코드}
			   AND A.기준년월일  =  ${기준년월일}
			   AND A.환율적용회차 IN (${환율적용회차},${최종환율적용회차_N3})
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbErtBseByDrdErtFlxPrgs" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB환율기준Ebi::GCB환율기준Dao::GCB환율기준By일중환율변동추이목록조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/ertInfMg/gcbErtBseEbi/TBGCBEX04/retvLstGcbErtBseByDrdErtFlxPrgs */ 
			       A.통화코드
			     , A.기준년월일
			     , A.환율적용회차
			     , A.환율등록완료여부
			     , A.환율등록시작시각
			     , A.환율등록완료시각
			     , A.교차환율
			     , A.매매기준율
			     , A.대미환산율
			     , A.전신환매입률
			     , A.전신환매도율
			     , A.현찰매입률
			     , A.현찰매도율
			     , A.TC매도율
			     , A.ISO통화코드
			     , A.ISO국가코드
			     , A.한글ISO국가명
			     , A.N100단위통화여부
			     , A.한글통화코드명
			     , A.영문통화코드명
			     , A.통화코드일련번호
			     , A.통화코드조회순서
			  FROM INSTC.TBGCBEX04 A 
			 WHERE A.통화코드     = ${통화코드}
			   AND A.기준년월일    = ${기준년월일}
			   AND A.환율등록완료여부 = '1'
			 ORDER BY A.환율적용회차
		]]>
    </statement>
</statements>
