<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvLstGcbOvsSvcFeeRtByCrcdAplSct" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB해외서비스수수료율기준Ebi::GCB해외서비스수수료율기준Dao::GCB해외서비스수수료율By통화코드적용구간목록조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/ertInfMg/gcbOvsSvcFeeRtBseEbi/TBGCBEX05/retvLstGcbOvsSvcFeeRtByCrcdAplSct */ 
			       A.적용시작년월일
			     , A.해외서비스수수료율적용회차
			     , A.적용종료년월일
			     , A.해외서비스수수료율
			  FROM INSTC.TBGCBEX05 A 
			 WHERE A.통화코드                   = ${통화코드}
			   AND A.해외서비스수수료율구간식별번호 = ${해외서비스수수료율구간식별번호}
			   AND A.기준금리상태구분코드   = '01'
			   AND A.적용시작년월일         <= ${적용종료년월일}
			   AND A.적용종료년월일         >= ${적용시작년월일}
			 ORDER BY A.적용시작년월일  DESC
			        , A.적용종료년월일  DESC
			
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbOvsSvcFeeRtByCrcd" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB해외서비스수수료율기준Ebi::GCB해외서비스수수료율기준Dao::GCB해외서비스수수료율By통화코드목록조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/ertInfMg/gcbOvsSvcFeeRtBseEbi/TBGCBEX05/retvLstGcbOvsSvcFeeRtByCrcd */ 
			       A.통화코드
			     , A.적용시작년월일
			     , MAX(DECODE(A.해외서비스수수료율구간식별번호,'10007',해외서비스수수료율,0.0)) 해외서비스수수료율 
			     , MAX(DECODE(A.해외서비스수수료율구간식별번호,'20001',해외서비스수수료율,0.0)) 해외서비스수수료율1
			     , MAX(DECODE(A.해외서비스수수료율구간식별번호,'20003',해외서비스수수료율,0.0)) 해외서비스수수료율3
			     , MAX(DECODE(A.해외서비스수수료율구간식별번호,'20006',해외서비스수수료율,0.0)) 해외서비스수수료율6
			     , MAX(DECODE(A.해외서비스수수료율구간식별번호,'20009',해외서비스수수료율,0.0)) 해외서비스수수료율9
			     , MAX(DECODE(A.해외서비스수수료율구간식별번호,'20012',해외서비스수수료율,0.0)) 해외서비스수수료율12
			  FROM INSTC.TBGCBEX05 A 
			 WHERE A.통화코드            = ${통화코드}
			   AND A.기준금리상태구분코드   = '01'
			   AND A.해외서비스수수료율적용회차  = 1
			   AND A.적용시작년월일         <= ${적용종료년월일}
			   AND A.적용종료년월일         >= ${적용시작년월일}
			 GROUP BY A.통화코드,A.적용시작년월일
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbOvsSvcFeeRtBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB해외서비스수수료율기준Ebi::GCB해외서비스수수료율기준Dao::GCB해외서비스수수료율기준등록" >
		<![CDATA[
			INSERT /*+ 송재복::/gcb/ertInfMg/gcbOvsSvcFeeRtBseEbi/TBGCBEX05/regtGcbOvsSvcFeeRtBse */
			  INTO INSTC.TBGCBEX05
			(
			   통화코드
			 , 해외서비스수수료율구간식별번호
			 , 적용시작년월일
			 , 해외서비스수수료율적용회차
			 , 적용종료년월일
			 , 기준금리상태구분코드
			 , 해외서비스수수료율
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${통화코드}
			 ,${해외서비스수수료율구간식별번호}
			 ,${적용시작년월일}
			 ,${해외서비스수수료율적용회차}
			 ,${적용종료년월일}
			 ,${기준금리상태구분코드}
			 ,${해외서비스수수료율}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbOvsSvcFeeRtBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::06.환율정보관리::GCB해외서비스수수료율기준Ebi::GCB해외서비스수수료율기준Dao::GCB해외서비스수수료율기준수정" >
		<![CDATA[
			UPDATE /*+ 송재복::/gcb/ertInfMg/gcbOvsSvcFeeRtBseEbi/TBGCBEX05/uptGcbOvsSvcFeeRtBse */ 
			       INSTC.TBGCBEX05 
			   SET 적용종료년월일    = ${적용종료년월일}
			     , 기준금리상태구분코드 = ${기준금리상태구분코드}
			     , 해외서비스수수료율  = ${해외서비스수수료율}
			     , 시스템최종갱신일시  = SYSTIMESTAMP
			     , 시스템최종갱신식별자 = ${시스템최종갱신식별자}
			     , 시스템최종거래일시  = ${시스템최종거래일시}
			 WHERE 통화코드            = ${통화코드}
			   AND 해외서비스수수료율구간식별번호 = ${해외서비스수수료율구간식별번호}
			   AND 적용시작년월일         = ${적용시작년월일}
			   AND 해외서비스수수료율적용회차   = ${해외서비스수수료율적용회차}
		]]>
    </statement>
</statements>
