<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvLstGcbBhRelInfCtgInqByBseYmAftm" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB부점관계정보목록조회By기준년월이후목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvLstGcbBhRelInfCtgInqByBseYmAftm */ 
			       A.상위부점코드
			     , A.하위부점코드
			     , A.카드부점관계구분코드
			     , A.변경일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.카드거래매체구분코드
			     , A.등록부점코드
			     , A.등록직원번호
			  FROM INSTC.TBGCBBR02 A 
			 WHERE A.카드부점관계구분코드 = ${카드부점관계구분코드}
			   AND A.적용시작년월일 >= ${적용시작년월일}
			   AND A.적용종료년월일 >= ${적용종료년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbBhRelInfCtgInqByBseYmApl" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB부점관계정보목록조회By기준년월적용목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvLstGcbBhRelInfCtgInqByBseYmApl */ 
			       A.상위부점코드
			     , A.하위부점코드
			     , A.카드부점관계구분코드
			     , A.변경일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.카드거래매체구분코드
			     , A.등록부점코드
			     , A.등록직원번호
			  FROM INSTC.TBGCBBR02 A 
			 WHERE A.카드부점관계구분코드 = ${카드부점관계구분코드}
			   AND A.적용시작년월일 <= ${적용시작년월일}
			   AND A.적용종료년월일 >= ${적용종료년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbBhRelInfCtgInqByKirkBh" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB부점관계정보목록조회By상위부점목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvLstGcbBhRelInfCtgInqByKirkBh */ 
			       A.상위부점코드
			     , A.하위부점코드
			     , A.카드부점관계구분코드
			     , A.변경일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.카드거래매체구분코드
			     , A.등록부점코드
			     , A.등록직원번호
			  FROM INSTC.TBGCBBR02 A 
			 WHERE A.상위부점코드 = ${상위부점코드}
			   AND A.카드부점관계구분코드 = ${카드부점관계구분코드}
			   AND A.적용시작년월일 <= ${적용시작년월일}
			   AND A.적용종료년월일 >= ${적용종료년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbBhRelInfCtgInqByLwrkBh" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB부점관계정보목록조회By하위부점목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvLstGcbBhRelInfCtgInqByLwrkBh */ 
			       A.상위부점코드
			     , A.하위부점코드
			     , A.카드부점관계구분코드
			     , A.변경일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.카드거래매체구분코드
			     , A.등록부점코드
			     , A.등록직원번호
			  FROM INSTC.TBGCBBR02 A 
			 WHERE A.하위부점코드 = ${하위부점코드}
			   AND A.카드부점관계구분코드 = ${카드부점관계구분코드}
			   AND A.적용시작년월일 <= ${적용시작년월일}
			   AND A.적용종료년월일 >= ${적용종료년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbBhRelInf" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB부점관계정보조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvGcbBhRelInf */ 
			       A.상위부점코드
			     , A.하위부점코드
			     , A.카드부점관계구분코드
			     , A.변경일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.카드거래매체구분코드
			     , A.등록부점코드
			     , A.등록직원번호
			  FROM INSTC.TBGCBBR02 A 
			 WHERE A.상위부점코드     = ${상위부점코드}
			   AND A.하위부점코드     = ${하위부점코드}
			   AND A.카드부점관계구분코드 = ${카드부점관계구분코드}
			   AND A.적용시작년월일 <= ${적용시작년월일}
			   AND A.적용종료년월일 >= ${적용종료년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbCrdBhUperLowrRel" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB카드부점상하관계등록" >
		<![CDATA[
			INSERT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/regtGcbCrdBhUperLowrRel */
			  INTO INSTC.TBGCBBR02
			(
			   상위부점코드
			 , 하위부점코드
			 , 카드부점관계구분코드
			 , 변경일련번호
			 , 적용시작년월일
			 , 적용종료년월일
			 , 카드거래매체구분코드
			 , 등록부점코드
			 , 등록직원번호
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${상위부점코드}
			 ,${하위부점코드}
			 ,${카드부점관계구분코드}
			 ,${변경일련번호}
			 ,${적용시작년월일}
			 ,${적용종료년월일}
			 ,${카드거래매체구분코드}
			 ,${등록부점코드}
			 ,${등록직원번호}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="retvLckGcbCrdBhUperLowrRel" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB카드부점상하관계락조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvLckGcbCrdBhUperLowrRel */ 
			       A.상위부점코드
			     , A.하위부점코드
			     , A.카드부점관계구분코드
			     , A.변경일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.카드거래매체구분코드
			     , A.등록부점코드
			     , A.등록직원번호
			     , TO_CHAR(시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBBR02 A 
			 WHERE A.상위부점코드     = ${상위부점코드}
			   AND A.하위부점코드     = ${하위부점코드}
			   AND A.카드부점관계구분코드 = ${카드부점관계구분코드}
			   AND A.변경일련번호     = ${변경일련번호}
			FOR UPDATE WAIT 0   
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbCrdBhUperLowrRel" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB카드부점상하관계수정" >
		<![CDATA[
			UPDATE /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/uptGcbCrdBhUperLowrRel */ 
			       INSTC.TBGCBBR02 
			   SET 적용시작년월일    = ${적용시작년월일}
			     , 적용종료년월일    = ${적용종료년월일}
			     , 카드거래매체구분코드 = ${카드거래매체구분코드}
			     , 등록부점코드     = ${등록부점코드}
			     , 등록직원번호     = ${등록직원번호}
			     , 시스템최종갱신일시  = SYSTIMESTAMP
			     , 시스템최종갱신식별자 = ${시스템최종갱신식별자}
			     , 시스템최종거래일시  = ${시스템최종거래일시}
			 WHERE 상위부점코드     = ${상위부점코드}
			   AND 하위부점코드     = ${하위부점코드}
			   AND 카드부점관계구분코드 = ${카드부점관계구분코드}
			   AND 변경일련번호     = ${변경일련번호}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbBhRelInfRgByPrvRgYn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB부점관계정보등록By기등록여부목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvLstGcbBhRelInfRgByPrvRgYn */ 
			       A.상위부점코드
			     , A.하위부점코드
			     , A.카드부점관계구분코드
			     , A.변경일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.카드거래매체구분코드
			     , A.등록부점코드
			     , A.등록직원번호
			  FROM INSTC.TBGCBBR02 A 
			 WHERE A.상위부점코드     = ${상위부점코드}
			   AND A.하위부점코드     = ${하위부점코드}
			   AND A.카드부점관계구분코드 = ${카드부점관계구분코드}
			   AND A.적용종료년월일 >= ${적용종료년월일}
			   AND A.적용시작년월일 <= A.적용종료년월일
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbBhRelRgByMdSno" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB부점관계등록By변경일련번호조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvGcbBhRelRgByMdSno */ 
			       NVL(MAX(A.변경일련번호), 0) + 1 변경일련번호
			  FROM INSTC.TBGCBBR02 A
			 WHERE A.상위부점코드     = ${상위부점코드}
			   AND A.하위부점코드     = ${하위부점코드}
			   AND A.카드부점관계구분코드 = ${카드부점관계구분코드}
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbCrdBhUperLowrRelInqByLstDatYn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB카드부점상하관계조회By최종데이터여부조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvGcbCrdBhUperLowrRelInqByLstDatYn */ 
			       COUNT(*) 조회건수_N2
			  FROM INSTC.TBGCBBR02 A 
			 WHERE A.상위부점코드     = ${상위부점코드}
			   AND A.하위부점코드     = ${하위부점코드}
			   AND A.카드부점관계구분코드 = ${카드부점관계구분코드}
			   AND A.적용종료년월일  > ${적용종료년월일}
			   AND A.적용시작년월일  <= A.적용종료년월일
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbBhRelInfByCrdChnRelInf" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB부점관계정보By카드채널관계정보목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvLstGcbBhRelInfByCrdChnRelInf */ 
			       A.상위부점코드
			     , A.하위부점코드
			     , A.카드부점관계구분코드
			     , A.변경일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.카드거래매체구분코드
			     , A.등록부점코드
			     , A.등록직원번호
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBBR02 A 
			 WHERE A.상위부점코드  = ${상위부점코드}
			   AND A.하위부점코드  = ${하위부점코드}
			   AND A.카드부점관계구분코드  = ${카드부점관계구분코드}
			   AND A.적용시작년월일  <= ${적용시작년월일}
			   AND A.적용종료년월일  >= ${적용종료년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbBhRelInfCtgInqByCrdChnRelInf" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB부점관계정보목록조회By카드채널관계정보목록조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvLstGcbBhRelInfCtgInqByCrdChnRelInf */ 
			       A.상위부점코드
			     , A.하위부점코드
			     , A.카드부점관계구분코드
			     , A.변경일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.카드거래매체구분코드
			     , A.등록부점코드
			     , A.등록직원번호
			  FROM INSTC.TBGCBBR02 A 
			 WHERE A.카드부점관계구분코드 IN ('26', '28', '29', '30', '31', '32')
			   AND A.적용시작년월일 <= ${적용시작년월일}
			   AND A.적용종료년월일 >= ${적용종료년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbBhRelInfByCrdChnRelNcn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::16.기타정보관리::GCB카드부점상하관계Ebi::GCB카드부점상하관계Dao::GCB부점관계정보By카드채널관계건수조회">
		<![CDATA[
			SELECT /*+ 김동현::/gcb/etcInfMg/gcbCrdBhUperLowrRelEbi/TBGCBBR02/retvGcbBhRelInfByCrdChnRelNcn */ 
			       COUNT(*) 조회건수_N3
			  FROM INSTC.TBGCBBR02 A        /* GCB카드부점상하관계 */
			 WHERE A.상위부점코드     = ${상위부점코드}
			   AND (A.하위부점코드     = ${하위부점코드}
			        OR ${하위부점코드} IS NULL)
			   AND A.카드부점관계구분코드 = ${카드부점관계구분코드}
			   AND (A.적용시작년월일  <= ${적용시작년월일} 
			        OR ${적용시작년월일} IS NULL)
			   AND (A.적용종료년월일  >= ${적용종료년월일}
			        OR ${적용종료년월일} IS NULL)
		]]>
    </statement>
</statements>
