<?xml version="1.0" encoding="EUC-KR"?>
<statements>

	<!-- 약정계좌일련번호 채번 -->
	<statement name="selectAgmAccSnoSeq">
		<![CDATA[
            SELECT /*+ 박건우::/opnb/opnbMg/opnbUseMg/opnbAgmAccMgEbc/selectAgmAccSnoSeq */ 
			       INSTC.SQ_TBUBFS030_01.NEXTVAL AS 오픈뱅킹약정계좌일련번호
			  FROM DUAL
		]]>
    </statement>

    <!-- 약정계좌 등록 -->
    <statement name="regOpnbAgmAccBas">
		<![CDATA[
			INSERT /*+ 박건우::/opnb/opnbMg/opnbUseMg/opnbAgmAccMgEbc/regOpnbAgmAccBas */
	          INTO INSTC.TBUBFS030        /* UBF오픈뱅킹약정계좌기본 */
		    	 (
		 	           오픈뱅킹약정계좌일련번호
                , 오픈뱅킹약정계좌설명
                , 오픈뱅킹약정계좌기관코드
                , 오픈뱅킹계좌계정구분코드
                , 오픈뱅킹약정계정계좌번호
                , 예금주명
                , 시스템최초생성일시
                , 시스템최초생성식별자
                , 시스템최종갱신일시
                , 시스템최종갱신식별자
                , 시스템최종거래일시			
			    )
			     VALUES
			    (
			      ${오픈뱅킹약정계좌일련번호}      
                , ${오픈뱅킹약정계좌설명}
                , ${오픈뱅킹약정계좌기관코드}
                , ${오픈뱅킹계좌계정구분코드}
                , ${오픈뱅킹약정계정계좌번호}
                , ${예금주명}
                , SYSTIMESTAMP
                , ${시스템최초생성식별자}
                , SYSTIMESTAMP
                , ${시스템최종갱신식별자}
                , ${시스템최종거래일시}
			)
		]]>
    </statement>

    <!-- 약정계좌 조회 -->
    <statement name="retvLstOpnbAgmAccInq">
		<![CDATA[
		    SELECT /*+ 박건우::/opnb/opnbMg/opnbUseMg/opnbAgmAccMgEbc/retvLstOpnbAgmAccInq */ 
			        A.오픈뱅킹약정계좌일련번호
			     ,  A.오픈뱅킹약정계좌설명
			     ,  A.오픈뱅킹약정계좌기관코드
			     ,  A.오픈뱅킹계좌계정구분코드
			     ,  A.오픈뱅킹약정계정계좌번호
			     ,  A.예금주명
			     ,  A.시스템최종갱신일시
			     ,  A.시스템최종갱신식별자
			     ,  A.시스템최종거래일시
			     ,  B.오픈뱅킹모계좌용도구분코드
			     ,  B.오픈뱅킹업무구분명
              FROM INSTC.TBUBFS030 A,      /* UBF오픈뱅킹기관거래내역 */
                   INSTC.TBUBFS031 B       /* UBF오픈뱅킹업무구분기본 */
             WHERE A.오픈뱅킹약정계좌일련번호 = B.오픈뱅킹약정계좌일련번호
               AND B.오픈뱅킹모계좌용도구분코드 = ${오픈뱅킹모계좌용도구분코드}
		]]>
    </statement>


    <statement name="uptOpnbAgmAccBas">
		<![CDATA[
			UPDATE /*+ 박건우::/opnb/opnbMg/opnbUseMg/opnbAgmAccMgEbc/uptOpnbAgmAccBas */ 
                   INSTC.TBUBFS030        /* UBF오픈뱅킹기관거래내역 */
               SET 오픈뱅킹약정계좌설명      = ${오픈뱅킹약정계좌설명}
                 , 오픈뱅킹약정계좌기관코드           = ${오픈뱅킹약정계좌기관코드}        
                 , 오픈뱅킹계좌계정구분코드           = ${오픈뱅킹계좌계정구분코드}        
                 , 오픈뱅킹약정계정계좌번호      = ${오픈뱅킹약정계정계좌번호}     
                 , 예금주명           = ${예금주명}        
                 , 시스템최종갱신일시              = ${시스템최종갱신일시}          
                 , 시스템최종갱신식별자            = ${시스템최종갱신식별자}        
                 , 시스템최종거래일시              = ${시스템최종거래일시}          
             WHERE 오픈뱅킹약정계좌일련번호         = ${오픈뱅킹약정계좌일련번호}
		]]>
    </statement>

    
    <statement name="delOpnbInsTnhs">
		<![CDATA[
			DELETE /*+ 박건우::/opnb/opnbMg/opnbUseMg/opnbAgmAccMgEbc/delOpnbAgmAccBas */ 
              FROM INSTC.TBUBFS030        /* UBF오픈뱅킹기관거래내역 */            
             WHERE 오픈뱅킹약정계좌일련번호          = ${오픈뱅킹약정계좌일련번호}
		]]>
    </statement>
    
    
    <!-- 약정계좌 등록(UBF오픈뱅킹업무구분기본) -->
    <statement name="regOpnbBwkDcBas">
		<![CDATA[
			INSERT /*+ 박건우::/opnb/opnbMg/opnbUseMg/opnbAgmAccMgEbc/regOpnbBwkDcBas */
	          INTO INSTC.TBUBFS031        /* UBF오픈뱅킹업무구분기본 */
		    	 (
		 	           오픈뱅킹모계좌용도구분코드
		 	    , 오픈뱅킹약정계좌일련번호
                , 오픈뱅킹업무구분명
                , 시스템최초생성일시
                , 시스템최초생성식별자
                , 시스템최종갱신일시
                , 시스템최종갱신식별자
                , 시스템최종거래일시			
			    )
			     VALUES
			    (
			      ${오픈뱅킹모계좌용도구분코드}      
                , ${오픈뱅킹약정계좌일련번호}
                , ${오픈뱅킹업무구분명}
                , SYSTIMESTAMP
                , ${시스템최초생성식별자}
                , SYSTIMESTAMP
                , ${시스템최종갱신식별자}
                , ${시스템최종거래일시}	
			)
		]]>
    </statement>
    
     <!-- 약정계좌 업무구분정보 수정 -->
    <statement name="uptOpnbBwkDcBas">
		<![CDATA[
			UPDATE /*+ 박건우::/opnb/opnbMg/opnbUseMg/opnbAgmAccMgEbc/uptOpnbBwkDcBas */ 
                   INSTC.TBUBFS031        /* UBF오픈뱅킹업무구분기본 */
               SET 
                 , 오픈뱅킹업무구분명           = ${오픈뱅킹업무구분명}        
                 , 시스템최종갱신일시              = ${시스템최종갱신일시}          
                 , 시스템최종갱신식별자            = ${시스템최종갱신식별자}        
                 , 시스템최종거래일시              = ${시스템최종거래일시}          
             WHERE 오픈뱅킹약정계좌일련번호         = ${오픈뱅킹약정계좌일련번호}
               AND 오픈뱅킹모계좌용도구분코드      = ${오픈뱅킹모계좌용도구분코드}
		]]>
    </statement>

	<!-- 약정계좌 업무구분정보 삭제 -->
	<statement name="delOpnbBwkDcBas">
		<![CDATA[
			DELETE /*+ 박건우::/opnb/opnbMg/opnbUseMg/opnbAgmAccMgEbc/delOpnbBwkDcBas */ 
              FROM INSTC.TBUBFS031        /* UBF오픈뱅킹업무구분기본 */            
             WHERE 오픈뱅킹약정계좌일련번호          = ${오픈뱅킹약정계좌일련번호}
             AND 오픈뱅킹모계좌용도구분코드      = ${오픈뱅킹모계좌용도구분코드}
		]]>
    </statement>  
    
</statements>
