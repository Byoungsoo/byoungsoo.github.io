<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvGcbBchExeHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB배치실행내역Ebi::GCB배치실행내역Dao::GCB배치실행내역조회" >
		<![CDATA[
			SELECT /*+ 노광희::/gcb/itObstMgSpt/gcbBchExeHisEbi/TBGCBEM03/retvGcbBchExeHis */ 
			       A.JAS작업ID
			     , A.JOBID
			     , A.배치검증번호
			     , A.배치작업년월일
			     , A.배치작업회차
			     , A.GUID번호
			     , A.배치작업수행최종일시
			     , A.배치검증전체건수
			     , A.배치검증성공건수
			     , A.배치검증오류건수
			     , A.배치검증생략건수
			     , A.배치검증개별검증값
			     , A.배치작업수행소요시간
			     , A.등록년월일
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBEM03 A        /* GCB배치실행내역 */
			 WHERE A.JAS작업ID = ${JAS작업ID}
			   AND A.JOBID   = ${JOBID}
			   AND A.배치검증번호  = ${배치검증번호}
			   AND A.배치작업년월일 = ${배치작업년월일}
			   AND A.배치작업회차  = ${배치작업회차}
			
		]]>
    </statement>

    <!--  -->
    <statement name="retvLckGcbBchExeHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB배치실행내역Ebi::GCB배치실행내역Dao::GCB배치실행내역락조회">
		<![CDATA[
			SELECT /*+ 노광희::/gcb/itObstMgSpt/gcbBchExeHisEbi/TBGCBEM03/retvLckGcbBchExeHis */ 
			       A.JAS작업ID
			     , A.JOBID
			     , A.배치검증번호
			     , A.배치작업년월일
			     , A.배치작업회차
			     , A.GUID번호
			     , A.배치작업수행최종일시
			     , A.배치검증전체건수
			     , A.배치검증성공건수
			     , A.배치검증오류건수
			     , A.배치검증생략건수
			     , A.배치검증개별검증값
			     , A.배치작업수행소요시간
			     , A.등록년월일
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBEM03 A        /* GCB배치실행내역 */
			 WHERE A.JAS작업ID = ${JAS작업ID}
			   AND A.JOBID   = ${JOBID}
			   AND A.배치검증번호  = ${배치검증번호}
			   AND A.배치작업년월일 = ${배치작업년월일}
			   AND A.배치작업회차  = ${배치작업회차}
			   FOR UPDATE NOWAIT
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbBchExeHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB배치실행내역Ebi::GCB배치실행내역Dao::GCB배치실행내역등록" >
		<![CDATA[
			INSERT /*+ 노광희::/gcb/itObstMgSpt/gcbBchExeHisEbi/TBGCBEM03/regtGcbBchExeHis */
			  INTO INSTC.TBGCBEM03        /* GCB배치실행내역 */
			(
			   JAS작업ID
			 , JOBID
			 , 배치검증번호
			 , 배치작업년월일
			 , 배치작업회차
			 , GUID번호
			 , 배치작업수행최종일시
			 , 배치검증전체건수
			 , 배치검증성공건수
			 , 배치검증오류건수
			 , 배치검증생략건수
			 , 배치검증개별검증값
			 , 배치작업수행소요시간
			 , 등록년월일
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${JAS작업ID}
			 ,${JOBID}
			 ,${배치검증번호}
			 ,${배치작업년월일}
			 ,${배치작업회차}
			 ,${GUID번호}
			 ,${배치작업수행최종일시}
			 ,${배치검증전체건수}
			 ,${배치검증성공건수}
			 ,${배치검증오류건수}
			 ,${배치검증생략건수}
			 ,${배치검증개별검증값}
			 ,${배치작업수행소요시간}
			 ,${등록년월일}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbBchExeHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB배치실행내역Ebi::GCB배치실행내역Dao::GCB배치실행내역수정" >
		<![CDATA[
			UPDATE /*+ 노광희::/gcb/itObstMgSpt/gcbBchExeHisEbi/TBGCBEM03/uptGcbBchExeHis */ 
			       INSTC.TBGCBEM03        /* GCB배치실행내역 */
			   SET GUID번호     = ${GUID번호}
			     , 배치작업수행최종일시 = ${배치작업수행최종일시}
			     , 배치검증전체건수   = ${배치검증전체건수}
			     , 배치검증성공건수   = ${배치검증성공건수}
			     , 배치검증오류건수   = ${배치검증오류건수}
			     , 배치검증생략건수   = ${배치검증생략건수}
			     , 배치검증개별검증값  = ${배치검증개별검증값}
			     , 배치작업수행소요시간 = ${배치작업수행소요시간}
			     , 등록년월일      = ${등록년월일}
			     , 시스템최종갱신일시  = SYSTIMESTAMP
			     , 시스템최종갱신식별자 = ${시스템최종갱신식별자}
			     , 시스템최종거래일시  = ${시스템최종거래일시}
			 WHERE JAS작업ID = ${JAS작업ID}
			   AND JOBID   = ${JOBID}
			   AND 배치검증번호  = ${배치검증번호}
			   AND 배치작업년월일 = ${배치작업년월일}
			   AND 배치작업회차  = ${배치작업회차}
		]]>
    </statement>

    <!--  -->
    <statement name="delGcbBchExeHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB배치실행내역Ebi::GCB배치실행내역Dao::GCB배치실행내역삭제" >
		<![CDATA[
			DELETE /*+ 노광희::/gcb/itObstMgSpt/gcbBchExeHisEbi/TBGCBEM03/delGcbBchExeHis */
			  FROM INSTC.TBGCBEM03        /* GCB배치실행내역 */
			 WHERE JAS작업ID = ${JAS작업ID}
			   AND JOBID   = ${JOBID}
			   AND 배치검증번호  = ${배치검증번호}
			   AND 배치작업년월일 = ${배치작업년월일}
			   AND 배치작업회차  = ${배치작업회차}
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbBchExeHisRqirTtm" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB배치실행내역Ebi::GCB배치실행내역Dao::GCB배치실행내역소요시간조회">
		<![CDATA[
			SELECT /*+ 노광희::/gcb/itObstMgSpt/gcbBchExeHisEbi/TBGCBEM03/retvGcbBchExeHisRqirTtm */ 
			 (TO_DATE(${배치작업종료일시}, 'YYYYMMDDHH24MISS') - TO_DATE(${배치작업시작일시}, 'YYYYMMDDHH24MISS')) * (24 * 60) 배치작업수행소요시간
			  FROM DUAL
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbBchExeHisNth" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::21.IT장애관리지원::GCB배치실행내역Ebi::GCB배치실행내역Dao::GCB배치실행내역회차조회">
		<![CDATA[
			SELECT /*+ 노광희::/gcb/itObstMgSpt/gcbBchExeHisEbi/TBGCBEM03/retvGcbBchExeHisNth */ 
			    NVL(MAX(A.배치작업회차), 0) + 1 배치작업회차
			  FROM INSTC.TBGCBEM03 A        /* GCB배치실행내역 */
			 WHERE A.JAS작업ID = ${JAS작업ID}
			   AND A.JOBID   = ${JOBID}
			   AND A.배치검증번호  = ${배치검증번호}
			   AND A.배치작업년월일 = ${배치작업년월일}
		]]>
    </statement>
</statements>
