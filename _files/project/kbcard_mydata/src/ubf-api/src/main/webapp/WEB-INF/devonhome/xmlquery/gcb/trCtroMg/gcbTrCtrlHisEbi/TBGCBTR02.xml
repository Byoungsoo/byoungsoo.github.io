<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvGcbTrCtrlHisByCtrlTg" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제내역Ebi::GCB거래통제내역Dao::GCB거래통제내역By통제대상조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/trCtroMg/gcbTrCtrlHisEbi/TBGCBTR02/retvGcbTrCtrlHisByCtrlTg */ 
			       A.거래통제등록사유
			  FROM INSTC.TBGCBTR02 A 
			 WHERE (A.거래통제거래제어코드      IN ( ${거래통제거래제어코드1}
			                                       , ${거래통제거래제어코드2}
			                                       , ${거래통제거래제어코드3}
			                                       , ${거래통제거래제어코드4}) OR A.거래통제거래제어코드  IS NULL )
			   AND (A.거래통제부점구분코드      = ${거래통제부점구분코드}   OR A.거래통제부점구분코드        IS NULL )
			   AND (A.거래통제부점코드          = ${거래통제부점코드}      OR A.거래통제부점코드             IS NULL )
			   AND (A.거래통제채널세부구분코드  = ${거래통제채널세부구분코드} OR A.거래통제채널세부구분코드 IS NULL )
			   AND ${거래통제시작일시}        BETWEEN A.거래통제시작일시 AND A.거래통제종료일시
			   AND ROWNUM = 1
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbTrCtrlHisByTrCtrlExistYn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제내역Ebi::GCB거래통제내역Dao::GCB거래통제내역By거래통제존재여부조회">
		<![CDATA[
			SELECT /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlHisEbi/TBGCBTR02/retvGcbTrCtrlHisByTrCtrlExistYn */ 
			      '1' AS 거래통제여부
			  FROM INSTC.TBGCBTR02 A 
			 WHERE A.거래통제등록일시 = ${거래통제등록일시}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLckGcbTrCtrlHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제내역Ebi::GCB거래통제내역Dao::GCB거래통제내역락조회">
		<![CDATA[
			SELECT /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlHisEbi/TBGCBTR02/retvLckGcbTrCtrlHis */ 
			       A.거래통제등록일시
			     , A.거래통제거래제어코드
			     , A.거래통제부점구분코드
			     , A.거래통제부점코드
			     , A.거래통제채널세부구분코드
			     , A.통제등록사유구분코드
			     , A.거래통제등록사유
			     , A.등록부점코드
			     , A.등록직원번호
			     , A.거래통제시작일시
			     , A.거래통제종료일시
			     , A.통제시스템구분코드
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBTR02 A 
			 WHERE A.거래통제등록일시 = ${거래통제등록일시}
			   FOR UPDATE NOWAIT
		]]>
    </statement>

    <!--  -->
    <statement name="delGcbTrCtrlHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제내역Ebi::GCB거래통제내역Dao::GCB거래통제내역삭제" >
		<![CDATA[
			DELETE /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlHisEbi/TBGCBTR02/delGcbTrCtrlHis */
			  FROM INSTC.TBGCBTR02  
			 WHERE 거래통제등록일시 = ${거래통제등록일시}
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbTrCtrlDelByCtrlSysDc" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제내역Ebi::GCB거래통제내역Dao::Gcb거래통제삭제By통제시스템구분조회">
		<![CDATA[
			SELECT /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlHisEbi/TBGCBTR02/retvGcbTrCtrlDelByCtrlSysDc */ 
			      '1' AS 거래통제여부
			  FROM INSTC.TBGCBTR02 A 
			 WHERE A.통제시스템구분코드 IN ('1','3')
			   AND ROWNUM = 1
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbTrCtrlRgByTrCtrlExistYn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제내역Ebi::GCB거래통제내역Dao::GCB거래통제등록By거래통제존재여부조회">
		<![CDATA[
			SELECT /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlHisEbi/TBGCBTR02/retvGcbTrCtrlRgByTrCtrlExistYn */ 
			      '1' AS 거래통제여부
			  FROM INSTC.TBGCBTR02 A 
			 WHERE (A.거래통제거래제어코드   = ${거래통제거래제어코드} OR A.거래통제거래제어코드 IS NULL)
			   AND (A.거래통제부점구분코드   = ${거래통제부점구분코드} OR A.거래통제부점구분코드 IS NULL)
			   AND (A.거래통제부점코드     = ${거래통제부점코드}      OR A.거래통제부점코드 IS NULL)
			   AND (A.거래통제채널세부구분코드 = ${거래통제채널세부구분코드} OR A.거래통제채널세부구분코드 IS NULL)
			   AND ROWNUM = 1   
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbTrCtrlRgByTrCtrlMaxSno" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제내역Ebi::GCB거래통제내역Dao::GCB거래통제등록By거래통제MAX일련번호조회">
		<![CDATA[
			SELECT /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlHisEbi/TBGCBTR02/retvGcbTrCtrlRgByTrCtrlMaxSno */ 
			       MAX(거래통제등록일시) AS 거래통제등록일시      
			  FROM INSTC.TBGCBTR02 A 
			 WHERE SUBSTR(A.거래통제등록일시,1,14) = ${거래통제등록일시}
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbTrCtrlHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제내역Ebi::GCB거래통제내역Dao::GCB거래통제내역등록">
		<![CDATA[
			INSERT /*+ 김남식::/gcb/trCtroMg/gcbTrCtrlHisEbi/TBGCBTR02/regtGcbTrCtrlHis */
			  INTO INSTC.TBGCBTR02
			(
			   거래통제등록일시
			 , 거래통제거래제어코드
			 , 거래통제부점구분코드
			 , 거래통제부점코드
			 , 거래통제채널세부구분코드
			 , 통제등록사유구분코드
			 , 거래통제등록사유
			 , 등록부점코드
			 , 등록직원번호
			 , 거래통제시작일시
			 , 거래통제종료일시
			 , 통제시스템구분코드
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${거래통제등록일시}
			 ,${거래통제거래제어코드}
			 ,${거래통제부점구분코드}
			 ,${거래통제부점코드}
			 ,${거래통제채널세부구분코드}
			 ,${통제등록사유구분코드}
			 ,${거래통제등록사유}
			 ,${등록부점코드}
			 ,${등록직원번호}
			 ,${거래통제시작일시}
			 ,${거래통제종료일시}
			 ,${통제시스템구분코드}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbTrCtrlHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래통제내역Ebi::GCB거래통제내역Dao::GCB거래통제내역조회">
		<![CDATA[
			SELECT /*+ 위상규::/gcb/trCtroMg/gcbTrCtrlHisEbi/TBGCBTR02/retvGcbTrCtrlHis */ 
			       A.거래통제등록일시
			     , A.거래통제거래제어코드
			     , A.거래통제부점구분코드
			     , A.거래통제부점코드
			     , A.거래통제채널세부구분코드
			     , A.통제등록사유구분코드
			     , A.거래통제등록사유
			     , A.등록부점코드
			     , A.등록직원번호
			     , A.거래통제시작일시
			     , A.거래통제종료일시
			     , A.통제시스템구분코드
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBTR02 A 
			 WHERE A.거래통제등록일시 = ${거래통제등록일시}
		]]>
    </statement>
</statements>
