<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvLstGcbTrprNbSlpRulBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준목록조회">
		<![CDATA[
			SELECT /*+ 위상규::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/retvLstGcbTrprNbSlpRulBse */ 
			       A.거래제어코드
			     , A.거래제어규칙일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.무전표규칙명
			     , A.전표구분코드
			     , A.상품코드
			     , A.매체구분코드
			     , A.취소구분코드
			     , A.기산일거래여부
			     , A.연동거래여부
			     , A.현금대체구분코드
			     , A.책임자승인사유코드
			     , A.거래통화코드
			     , A.거래금액
			     , A.거래금액종류구분코드
			     , A.전표결정목록조건내용
			     , A.시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시 
			  FROM INSTC.TBGCBTR07 A 
			 WHERE 1 = 1
			   AND A.거래제어코드 = ${거래제어코드}
			   AND A.거래제어규칙일련번호 <> 0
			   AND A.적용시작년월일 <= ${적용시작년월일}
			   AND A.적용종료년월일 >= ${적용종료년월일}
			   AND (A.상품코드 IN (${상품코드}, ${상품대분류구분코드}, ${상품중분류구분코드}) OR A.상품코드 IS NULL)
			   AND (A.취소구분코드 = ${취소구분코드} OR A.취소구분코드 IS NULL)
			   AND (((A.거래통화코드 = ${거래통화코드} OR A.거래통화코드 IS NULL) AND A.거래금액 >= ${거래금액} AND (A.거래금액종류구분코드 = ${거래금액종류구분코드} OR A.거래금액종류구분코드 IS NULL))
			    OR (A.거래통화코드 IS NULL AND A.거래금액 = 0 AND A.거래금액종류구분코드 IS NULL))
			   AND A.매체구분코드 IN ( ${매체구분코드},'00' )
			   AND (A.기산일거래여부 = ${기산일거래여부} OR A.기산일거래여부 IS NULL)
			   AND (A.연동거래여부 = ${연동거래여부} OR A.연동거래여부 IS NULL)
			   AND (A.현금대체구분코드 = ${현금대체구분코드} OR A.현금대체구분코드 IS NULL)
			   AND (A.책임자승인사유코드 IN ('A8899999', 'A8888888') OR A.책임자승인사유코드 IS NULL)
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbTrprNbSlpRulBseCpldRpsTr" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준연동대표거래목록조회">
		<![CDATA[
			SELECT /*+ 위상규::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/retvLstGcbTrprNbSlpRulBseCpldRpsTr */ 
			       A.거래제어코드
			     , A.거래제어규칙일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.무전표규칙명
			     , A.전표구분코드
			     , A.상품코드
			     , A.매체구분코드
			     , A.취소구분코드
			     , A.기산일거래여부
			     , A.연동거래여부
			     , A.현금대체구분코드
			     , A.책임자승인사유코드
			     , A.거래통화코드
			     , A.거래금액
			     , A.거래금액종류구분코드
			     , A.전표결정목록조건내용
			     , A.시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시 
			  FROM INSTC.TBGCBTR07 A 
			 WHERE 1 = 1
			   AND A.거래제어코드 = ${거래제어코드}
			   AND A.거래제어규칙일련번호 = ${거래제어규칙일련번호}
			   AND A.적용시작년월일 <= ${적용시작년월일}
			   AND A.적용종료년월일 >= ${적용종료년월일}
			   AND ROWNUM = 1
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbTrprNbSlpRulBseCpldRpsTr" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준연동대표거래조회">
		<![CDATA[
			SELECT /*+ 위상규::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/retvGcbTrprNbSlpRulBseCpldRpsTr */ 
			       A.거래제어코드
			     , A.거래제어규칙일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.무전표규칙명
			     , A.전표구분코드
			     , A.상품코드
			     , A.매체구분코드
			     , A.취소구분코드
			     , A.기산일거래여부
			     , A.연동거래여부
			     , A.현금대체구분코드
			     , A.책임자승인사유코드
			     , A.거래통화코드
			     , A.거래금액
			     , A.거래금액종류구분코드
			     , A.전표결정목록조건내용
			     , TO_CHAR(시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBTR07 A 
			 WHERE A.거래제어코드 = ${거래제어코드}
			   AND A.거래제어규칙일련번호 = ${거래제어규칙일련번호}
			   AND A.적용시작년월일 <= ${적용시작년월일}
			   AND A.적용종료년월일 >= ${적용종료년월일}
			   AND ROWNUM = 1
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbTrprNbSlpRulBseNcn" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준건수조회">
		<![CDATA[
			SELECT /*+ 위상규::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/retvGcbTrprNbSlpRulBseNcn */ 
			       COUNT(1) 건수_N5
			  FROM INSTC.TBGCBTR07 A 
			 WHERE A.거래제어코드 = ${거래제어코드}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbTrprNbSlpRulBseJudg" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준판단목록조회">
		<![CDATA[
			SELECT /*+ 위상규::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/retvLstGcbTrprNbSlpRulBseJudg */ 
			       A.거래제어코드
			     , A.거래제어규칙일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.무전표규칙명
			     , A.전표구분코드
			     , A.상품코드
			     , NVL(A.매체구분코드, '00') 매체구분코드
			     , A.취소구분코드
			     , A.기산일거래여부
			     , A.연동거래여부
			     , A.현금대체구분코드
			     , A.책임자승인사유코드
			     , A.거래통화코드
			     , A.거래금액
			     , A.거래금액종류구분코드
			     , A.전표결정목록조건내용
			     , TO_CHAR(시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBTR07 A 
			 WHERE A.거래제어코드 LIKE ${거래제어코드} || '%'
			   AND A.거래제어규칙일련번호 BETWEEN ${거래제어규칙일련번호1} AND ${거래제어규칙일련번호2}
			   AND A.적용시작년월일 <= ${적용시작년월일}
			   AND A.적용종료년월일 >= ${적용종료년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbTrprNbSlpRulBseSno" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준일련번호조회">
		<![CDATA[
			SELECT /*+ 위상규::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/retvGcbTrprNbSlpRulBseSno */ 
			       NVL(MAX(A.거래제어규칙일련번호), 0) 거래제어규칙일련번호
			  FROM INSTC.TBGCBTR07 A 
			 WHERE A.거래제어코드 = ${거래제어코드}
		]]>
    </statement>

    <!--  -->
    <statement name="regtGcbTrprNbSlpRulBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준등록" >
		<![CDATA[
			INSERT /*+ 위상규::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/regtGcbTrprNbSlpRulBse */
			  INTO INSTC.TBGCBTR07
			(
			   거래제어코드
			 , 거래제어규칙일련번호
			 , 적용시작년월일
			 , 적용종료년월일
			 , 무전표규칙명
			 , 전표구분코드
			 , 상품코드
			 , 매체구분코드
			 , 취소구분코드
			 , 기산일거래여부
			 , 연동거래여부
			 , 현금대체구분코드
			 , 책임자승인사유코드
			 , 거래통화코드
			 , 거래금액
			 , 거래금액종류구분코드
			 , 전표결정목록조건내용
			 , 시스템최종갱신일시
			 , 시스템최종갱신식별자
			 , 시스템최종거래일시
			)
			VALUES
			(
			  ${거래제어코드}
			 ,${거래제어규칙일련번호}
			 ,${적용시작년월일}
			 ,${적용종료년월일}
			 ,${무전표규칙명}
			 ,${전표구분코드}
			 ,${상품코드}
			 ,${매체구분코드}
			 ,${취소구분코드}
			 ,${기산일거래여부}
			 ,${연동거래여부}
			 ,${현금대체구분코드}
			 ,${책임자승인사유코드}
			 ,${거래통화코드}
			 ,${거래금액}
			 ,${거래금액종류구분코드}
			 ,${전표결정목록조건내용}
			 ,SYSTIMESTAMP
			 ,${시스템최종갱신식별자}
			 ,${시스템최종거래일시}
			)
		]]>
    </statement>

    <!--  -->
    <statement name="retvGcbTrprNbSlpRulBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준조회" >
		<![CDATA[
			SELECT /*+ 위상규::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/retvGcbTrprNbSlpRulBse */ 
			       A.거래제어코드
			     , A.거래제어규칙일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.무전표규칙명
			     , A.전표구분코드
			     , A.상품코드
			     , A.매체구분코드
			     , A.취소구분코드
			     , A.기산일거래여부
			     , A.연동거래여부
			     , A.현금대체구분코드
			     , A.책임자승인사유코드
			     , A.거래통화코드
			     , A.거래금액
			     , A.거래금액종류구분코드
			     , A.전표결정목록조건내용
			     , TO_CHAR(시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBTR07 A 
			 WHERE A.거래제어코드     = ${거래제어코드}
			   AND A.거래제어규칙일련번호 = ${거래제어규칙일련번호}
			   AND A.적용시작년월일    = ${적용시작년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="delGcbTrprNbSlpRulBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준삭제" >
		<![CDATA[
			DELETE /*+ 위상규::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/delGcbTrprNbSlpRulBse */
			  FROM INSTC.TBGCBTR07  
			 WHERE 거래제어코드     = ${거래제어코드}
			   AND 거래제어규칙일련번호 = ${거래제어규칙일련번호}
			   AND 적용시작년월일    = ${적용시작년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="uptGcbTrprNbSlpRulBse" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준수정" >
		<![CDATA[
			UPDATE /*+ 위상규::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/uptGcbTrprNbSlpRulBse */ 
			       INSTC.TBGCBTR07 
			   SET 적용종료년월일    = ${적용종료년월일}
			     , 무전표규칙명     = ${무전표규칙명}
			     , 전표구분코드     = ${전표구분코드}
			     , 상품코드       = ${상품코드}
			     , 매체구분코드     = ${매체구분코드}
			     , 취소구분코드     = ${취소구분코드}
			     , 기산일거래여부    = ${기산일거래여부}
			     , 연동거래여부     = ${연동거래여부}
			     , 현금대체구분코드   = ${현금대체구분코드}
			     , 책임자승인사유코드  = ${책임자승인사유코드}
			     , 거래통화코드     = ${거래통화코드}
			     , 거래금액       = ${거래금액}
			     , 거래금액종류구분코드 = ${거래금액종류구분코드}
			     , 전표결정목록조건내용 = ${전표결정목록조건내용}
			     , 시스템최종갱신일시  = SYSTIMESTAMP
			     , 시스템최종갱신식별자 = ${시스템최종갱신식별자}
			     , 시스템최종거래일시  = ${시스템최종거래일시}
			 WHERE 거래제어코드     = ${거래제어코드}
			   AND 거래제어규칙일련번호 = ${거래제어규칙일련번호}
			   AND 적용시작년월일    = ${적용시작년월일}
		]]>
    </statement>

    <!--  -->
    <statement name="retvLstGcbTrprNbSlpRulBseInf" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::05.엔터티컴포넌트::05.거래제어관리::GCB거래별무전표규칙기준Ebi::GCB거래별무전표규칙기준Dao::GCB거래별무전표규칙기준정보목록조회">
		<![CDATA[
			SELECT /*+ 송재복::/gcb/trCtroMg/gcbTrprNbSlpRulBseEbi/TBGCBTR07/retvLstGcbTrprNbSlpRulBseInf */ 
			       A.거래제어코드
			     , A.거래제어규칙일련번호
			     , A.적용시작년월일
			     , A.적용종료년월일
			     , A.무전표규칙명
			     , A.전표구분코드
			     , A.상품코드
			     , A.매체구분코드
			     , A.취소구분코드
			     , A.기산일거래여부
			     , A.연동거래여부
			     , A.현금대체구분코드
			     , A.책임자승인사유코드
			     , A.거래통화코드
			     , A.거래금액
			     , A.거래금액종류구분코드
			     , A.전표결정목록조건내용
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISSFF6') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBTR07 A 
			 WHERE ( A.거래제어코드 > ${거래제어코드}
			    OR ( A.거래제어코드 = ${거래제어코드}
			   AND A.거래제어규칙일련번호 >= ${거래제어규칙일련번호})) 
			   AND A.거래제어코드 BETWEEN ${거래제어코드1} AND ${거래제어코드2}
			   AND A.거래제어코드 BETWEEN ${어플리케이션코드1} || '0000000' AND ${어플리케이션코드2} || '9999999'
			   AND A.시스템최종거래일시 BETWEEN ${적용시작년월일} || '000000000000' AND ${적용종료년월일} || '999999999999'
			   AND ( ${무전표규칙명} IS NULL OR A.무전표규칙명 LIKE ${무전표규칙명} || '%' )
		]]>
    </statement>
</statements>
