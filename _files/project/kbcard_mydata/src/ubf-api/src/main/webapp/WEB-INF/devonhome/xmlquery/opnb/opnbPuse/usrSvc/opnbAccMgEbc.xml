<?xml version="1.0" encoding="EUC-KR"?>
<statements>

	<!-- 채널별계좌정보목록조회 -->
    <statement name="selectChnPrAccInfCtg">
		<![CDATA[
			SELECT /*+ 김상현::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/selectChnPrAccInfCtg */ 
                   B.고객계좌번호
                 , B.계좌개설은행코드
				 , C.채널세부업무구분코드
				 , B.오픈뱅킹이용기관코드
				 , B.오픈뱅킹사용자고유번호
				 , B.핀테크이용번호
				 , B.오픈뱅킹납부자번호
				 , B.오픈뱅킹계좌종류구분코드
				 , B.오픈뱅킹계좌명의구분코드
				 , B.오픈뱅킹계좌상품명
				 , B.오픈뱅킹이메일주소전문내용
				 , B.계좌조회동의여부
				 , TO_CHAR(B.계좌조회동의등록일시, 'yyyymmddhhmiss') AS 계좌조회동의일시
				 , B.조회등록채널세부업무구분코드
				 , TO_CHAR(B.계좌조회동의갱신일시, 'yyyymmddhhmiss') AS 계좌조회동의갱신일시
				 , B.조회갱신채널세부업무구분코드
				 , TO_CHAR(B.계좌조회동의해제일시, 'yyyymmddhhmiss') AS 계좌조회동의해제일시
				 , B.조회해제채널세부업무구분코드
				 , B.출금동의여부
				 , B.출금등록채널세부업무구분코드
				 , TO_CHAR(B.출금동의갱신일시, 'yyyymmddhhmiss') AS 출금동의갱신일시
				 , B.출금갱신채널세부업무구분코드
				 , TO_CHAR(B.출금동의해제일시, 'yyyymmddhhmiss') AS 출금동의해제일시
				 , B.출금해제채널세부업무구분코드
				 , TO_CHAR(B.계좌등록일시, 'yyyymmddhhmiss') AS 계좌등록일시
				 , B.계좌사용여부
				 , B.계좌출금동의등록일시
				 , B.계좌납입회차번호
				 , C.CI내용
				 , C.준회원식별자
				 , C.고객식별자
				 , C.오픈뱅킹플랫폼식별번호
				 , C.개별저축은행명
				 , C.대표계좌여부
				 , C.계좌별명
				 , C.계좌표시순서
				 , C.계좌숨김여부
				 , TO_CHAR(C.계좌숨김일시, 'yyyymmddhhmiss') AS 계좌숨김일시
				 , C.즐겨찾기계좌여부
				 , C.화면노출버튼구분코드
				 , C.계좌상세사용여부
				 , C.개별저축은행코드
              FROM INSTC.TBUBFS001 A, INSTC.TBUBFS002 B, INSTC.TBUBFS003 C
                   /* UBF오픈뱅킹고객정보기본, UBF오픈뱅킹계좌기본, UBF오픈뱅킹계좌상세 */
             WHERE A.오픈뱅킹사용자고유번호	= ${오픈뱅킹사용자고유번호}
               AND A.오픈뱅킹서비스해지여부	= 'N'
               AND A.CI내용				= C.CI내용
               AND C.채널세부업무구분코드		= ${채널세부업무구분코드}
               AND C.계좌상세사용여부		= 'Y'
               AND B.계좌사용여부			= 'Y'
               AND B.고객계좌번호			= C.고객계좌번호
               AND B.계좌개설은행코드		= C.계좌개설은행코드
               AND B.오픈뱅킹이용기관코드		= C.오픈뱅킹이용기관코드
               
		]]>
    </statement>

    <!--  -->
    <statement name="insertOpnbAccBas">
		<![CDATA[
			INSERT /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/insertOpnbAccBas */
	          INTO INSTC.TBUBFS002        /* UBF오픈뱅킹계좌기본 */
		    	 (
		 	             고객계좌번호
                 , 계좌개설은행코드
                 , 오픈뱅킹이용기관코드
                 , 오픈뱅킹사용자고유번호
                 , 핀테크이용번호
                 , 오픈뱅킹납부자번호
                 , 오픈뱅킹계좌종류구분코드
                 , 오픈뱅킹계좌명의구분코드
                 , 오픈뱅킹계좌상품명
                 , 오픈뱅킹이메일주소전문내용
                 , 계좌조회동의여부
                 , 계좌조회동의등록일시
                 , 조회등록채널세부업무구분코드
                 , 계좌조회동의갱신일시
                 , 조회갱신채널세부업무구분코드
                 , 계좌조회동의해제일시
                 , 조회해제채널세부업무구분코드
                 , 출금동의여부
                 , 출금등록채널세부업무구분코드
                 , 출금동의갱신일시
                 , 출금갱신채널세부업무구분코드
                 , 출금동의해제일시
                 , 출금해제채널세부업무구분코드
                 , 계좌등록일시
                 , 계좌사용여부
                 , 계좌출금동의등록일시
                 , 계좌납입회차번호
                 , 시스템최초생성일시
                 , 시스템최초생성식별자
                 , 시스템최종갱신일시
                 , 시스템최종갱신식별자
                 , 시스템최종거래일시			
			    )
			     VALUES
			    (
			      ${고객계좌번호}
                , ${계좌개설은행코드}
                , ${오픈뱅킹이용기관코드}
                , ${오픈뱅킹사용자고유번호}
                , ${핀테크이용번호}
                , ${오픈뱅킹납부자번호}
                , ${오픈뱅킹계좌종류구분코드}
                , ${오픈뱅킹계좌명의구분코드}
                , ${오픈뱅킹계좌상품명}
                , ${오픈뱅킹이메일주소전문내용}
                , ${계좌조회동의여부}
                , TO_DATE(${계좌조회동의등록일시},'YYYYMMDDHH24MISS')
                , ${조회등록채널세부업무구분코드}
                , TO_DATE(${계좌조회동의갱신일시},'YYYYMMDDHH24MISS')
                , ${조회갱신채널세부업무구분코드}
                , TO_DATE(${계좌조회동의해제일시},'YYYYMMDDHH24MISS')
                , ${조회해제채널세부업무구분코드}
                , ${출금동의여부}
                , ${출금등록채널세부업무구분코드}
                , TO_DATE(${출금동의갱신일시},'YYYYMMDDHH24MISS')
                , ${출금갱신채널세부업무구분코드}
                , TO_DATE(${출금동의해제일시},'YYYYMMDDHH24MISS')
                , ${출금해제채널세부업무구분코드}
                , SYSTIMESTAMP
                , ${계좌사용여부}
                , ${계좌출금동의등록일시}
                , ${계좌납입회차번호}
                , SYSTIMESTAMP
                , ${시스템최초생성식별자}
                , SYSTIMESTAMP
                , ${시스템최종갱신식별자}
                , ${시스템최종거래일시}		
			)
			
		]]>
    </statement>

   <!--  -->
    <statement name="updateAccInf">
		<![CDATA[
			UPDATE /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/updateAccInf */ 
                   INSTC.TBUBFS002        /* UBF오픈뱅킹계좌기본 */
               SET 오픈뱅킹이메일주소전문내용   = NVL(${오픈뱅킹이메일주소전문내용}, 오픈뱅킹이메일주소전문내용)
                 , 오픈뱅킹납부자번호             = NVL(${오픈뱅킹납부자번호}, 오픈뱅킹납부자번호 )
                 , 출금동의여부                     = NVL(${출금동의여부}            , 출금동의여부  )
                 , 출금동의갱신일시                = NVL(TO_DATE(${출금동의갱신일시},'YYYYMMDDHH24MISS') , 출금동의갱신일시)
                 , 출금갱신채널세부업무구분코드 = NVL(${출금갱신채널세부업무구분코드} , 출금갱신채널세부업무구분코드)
                 , 시스템최종갱신일시      = SYSTIMESTAMP      
                 , 시스템최종갱신식별자   = ${시스템최종갱신식별자}        
                 , 시스템최종거래일시     = ${시스템최종거래일시}
             WHERE 고객계좌번호             = ${고객계좌번호} 
               AND 계좌개설은행코드        = ${계좌개설은행코드}
               AND 오픈뱅킹이용기관코드   = ${오픈뱅킹이용기관코드}
                               
		]]>
    </statement>
    
    
    <!--  -->
    <statement name="updateAccDtl">
		<![CDATA[
			UPDATE /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/updateAccDtl */ 
                   INSTC.TBUBFS003        /* UBF오픈뱅킹계좌상세 */
               SET 대표계좌여부               = NVL(${대표계좌여부},대표계좌여부)
                 , 계좌별명                    = NVL(${계좌별명},계좌별명)
                 , 계좌표시순서               = NVL(${계좌표시순서},계좌표시순서)
                 , 계좌숨김여부               = NVL(${계좌숨김여부},계좌숨김여부)
                 , 계좌숨김일시               = DECODE(${계좌숨김여부},'Y',SYSTIMESTAMP,NULL,계좌숨김일시)
                 , 즐겨찾기계좌여부          = NVL(${즐겨찾기계좌여부},즐겨찾기계좌여부)
                 , 화면노출버튼구분코드     = NVL(${화면노출버튼구분코드},화면노출버튼구분코드)
                 , 시스템최종갱신일시        = SYSTIMESTAMP      
                 , 시스템최종갱신식별자     = ${시스템최종갱신식별자}        
                 , 시스템최종거래일시        = ${시스템최종거래일시}
             WHERE 채널세부업무구분코드     = ${채널세부업무구분코드}  
               AND 고객계좌번호               = ${고객계좌번호} 
               AND 계좌개설은행코드          = ${계좌개설은행코드}
               AND 오픈뱅킹이용기관코드     = ${오픈뱅킹이용기관코드}
               AND CI내용                      = ${CI내용}       
                        
		]]>
    </statement>
    
         <!-- 오픈뱅킹계좌상세등록 -->
    <statement name="insertOpnbAccDtl">
		<![CDATA[
			INSERT /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/insertOpnbAccDtl */
	          INTO INSTC.TBUBFS003        /* UBF오픈뱅킹계좌상세 */
		    	 (
		 	              고객계좌번호
                  , 계좌개설은행코드 
                  , 채널세부업무구분코드 
                  , 오픈뱅킹이용기관코드 
                  , CI내용
                  , 준회원식별자 
                  , 고객식별자 
                  , 오픈뱅킹플랫폼식별번호 
                  , 계좌납입회차번호
                  , 개별저축은행명 
                  , 출금동의여부 
                  , 출금동의갱신일시 
                  , 출금동의해제일시 
                  , 대표계좌여부 
                  , 계좌별명 
                  , 계좌표시순서 
                  , 계좌숨김여부 
                  , 계좌숨김일시 
                  , 즐겨찾기계좌여부 
                  , 화면노출버튼구분코드
                  , 계좌상세사용여부 
                  , 개별저축은행코드
                  , 시스템최초생성식별자 
                  , 시스템최초생성일시
                  , 시스템최종갱신식별자
                  , 시스템최종갱신일시 
                  , 시스템최종거래일시
                  
			    )
			     VALUES
			    (
			      ${고객계좌번호} 
                , ${계좌개설은행코드} 
                , ${채널세부업무구분코드} 
                , ${오픈뱅킹이용기관코드} 
                , ${CI내용}
                , ${준회원식별자} 
                , ${고객식별자} 
                , ${오픈뱅킹플랫폼식별번호}
                , ${계좌납입회차번호} 
                , ${개별저축은행명} 
                , ${출금동의여부} 
                , TO_DATE(${출금동의갱신일시},'YYYYMMDDHH24MISS') 
                , TO_DATE(${출금동의해제일시},'YYYYMMDDHH24MISS') 
                , ${대표계좌여부} 
                , ${계좌별명} 
                , ${계좌표시순서} 
                , ${계좌숨김여부} 
                , TO_DATE(${계좌숨김일시},'YYYYMMDDHH24MISS') 
                , ${즐겨찾기계좌여부} 
                , ${화면노출버튼구분코드} 
                , ${계좌상세사용여부}
                , ${개별저축은행코드} 
                , ${시스템최초생성식별자} 
                , SYSTIMESTAMP
                , ${시스템최종갱신식별자} 
                , SYSTIMESTAMP
                , ${시스템최종거래일시}	
			)
			
			
		]]>
    </statement>
    
     	<!-- 오픈뱅킹계좌상세조회 -->
    <statement name="selectOpnbAccDtl">
		<![CDATA[ 
			SELECT /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/selectOpnbAccDtl */
                                 고객계좌번호
                 , 계좌개설은행코드
                 , 오픈뱅킹이용기관코드
                 , 채널세부업무구분코드                 
                 , CI내용
                 , 준회원식별자  
                 , 고객식별자
                 , 오픈뱅킹플랫폼식별번호
                 , 계좌납입회차번호 
                 , 개별저축은행명 
                 , 출금동의여부 
                 , TO_CHAR(출금동의갱신일시, 'YYYYMMDDHH24MISS') AS 출금동의갱신일시
                 , TO_CHAR(출금동의해제일시, 'YYYYMMDDHH24MISS') AS 출금동의해제일시
                 , 대표계좌여부
                 , 계좌별명 
                 , 계좌표시순서 
                 , 계좌숨김여부 
                 , TO_CHAR(계좌숨김일시, 'YYYYMMDDHH24MISS') AS 계좌숨김일시
                 , 즐겨찾기계좌여부 
                 , 화면노출버튼구분코드 
                 , 계좌상세사용여부
                 , 개별저축은행코드
              FROM INSTC.TBUBFS003
             WHERE 고객계좌번호            = ${고객계좌번호}
               AND 계좌개설은행코드       = ${계좌개설은행코드} 
               AND 오픈뱅킹이용기관코드  = ${오픈뱅킹이용기관코드} 
               AND 채널세부업무구분코드   = ${채널세부업무구분코드}
               AND CI내용                   = ${CI내용}
               
		]]>
    </statement>
        
    <!-- 계좌기본사용여부수정 -->
    <statement name="updateAccBasUseYn">
		<![CDATA[
			UPDATE /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/updateAccBasUseYn */ 
                   INSTC.TBUBFS002        /* UBF오픈뱅킹계좌기본 */
               SET 계좌사용여부                     = ${계좌사용여부}               
                 , 계좌조회동의여부                = NVL(${계좌조회동의여부}           , 계좌조회동의여부 )
                 , 계좌조회동의갱신일시           = NVL(TO_DATE(${계좌조회동의갱신일시},'YYYYMMDDHH24MISS')        , 계좌조회동의갱신일시)
                 , 조회갱신채널세부업무구분코드 = NVL(${조회갱신채널세부업무구분코드}  , 조회갱신채널세부업무구분코드)
                 , 계좌조회동의해제일시            = NVL(TO_DATE(${계좌조회동의해제일시},'YYYYMMDDHH24MISS')       , 계좌조회동의해제일시 )
                 , 조회해제채널세부업무구분코드  = NVL(${조회해제채널세부업무구분코드}  , 조회해제채널세부업무구분코드 )                 
                 , 출금동의여부                     = NVL(${출금동의여부}              , 출금동의여부  )
                 , 출금동의갱신일시                = NVL(TO_DATE(${출금동의갱신일시},'YYYYMMDDHH24MISS')         , 출금동의갱신일시)
                 , 출금갱신채널세부업무구분코드 = NVL(${출금갱신채널세부업무구분코드}   , 출금갱신채널세부업무구분코드) 
                 , 출금동의해제일시                 = NVL(TO_DATE(${출금동의해제일시},'YYYYMMDDHH24MISS')           , 출금동의해제일시 )
                 , 출금해제채널세부업무구분코드  = NVL(${출금해제채널세부업무구분코드}   , 출금해제채널세부업무구분코드 )
                 , 시스템최종갱신일시              = SYSTIMESTAMP      
                 , 시스템최종갱신식별자           = ${시스템최종갱신식별자}        
                 , 시스템최종거래일시             = ${시스템최종거래일시}
             WHERE 고객계좌번호                     = ${고객계좌번호} 
               AND 계좌개설은행코드                = ${계좌개설은행코드}
               AND 오픈뱅킹이용기관코드           = ${오픈뱅킹이용기관코드}
               
		]]>
    </statement>
    
      <!-- 계좌상세사용여부수정 -->
    <statement name="updateAccDtlUseYn">
		<![CDATA[
			UPDATE /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/updateAccDtlUseYn */ 
                   INSTC.TBUBFS003        /* UBF오픈뱅킹계좌상세 */
               SET 계좌상세사용여부                = NVL(${계좌상세사용여부}, 계좌상세사용여부)
                 , 출금동의여부                     = NVL(${출금동의여부}, 출금동의여부)
                 , 출금동의갱신일시                = NVL(TO_DATE(${출금동의갱신일시},'YYYYMMDDHH24MISS'), 출금동의갱신일시) 
                 , 시스템최종갱신일시             = SYSTIMESTAMP      
                 , 시스템최종갱신식별자           = ${시스템최종갱신식별자}        
                 , 시스템최종거래일시             = ${시스템최종거래일시}
             WHERE 고객계좌번호             = ${고객계좌번호} 
               AND 계좌개설은행코드        = ${계좌개설은행코드}
               AND 오픈뱅킹이용기관코드   = ${오픈뱅킹이용기관코드}
               AND 채널세부업무구분코드   = ${채널세부업무구분코드}
               AND CI내용                    = ${CI내용}
               
		]]>
    </statement>
    
      <!-- 오픈뱅킹계좌상세채널별등록 -->
    <statement name="insertOpnbAccDtlChnPr">
		<![CDATA[
			INSERT /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/insertOpnbAccDtlChnPr */
	          INTO INSTC.TBUBFS003        /* UBF오픈뱅킹계좌상세 */
		    SELECT 고객계좌번호
		         , 계좌개설은행코드
		         , ${채널세부업무구분코드}
		         , 오픈뱅킹이용기관코드
		         , CI내용
                 , 준회원식별자  
                 , 고객식별자
                 , NVL(${오픈뱅킹플랫폼식별번호},오픈뱅킹플랫폼식별번호)
                 , NVL(${계좌납입회차번호},계좌납입회차번호) 
                 , 개별저축은행명 
                 , 출금동의여부 
                 , 출금동의갱신일시 
                 , 출금동의해제일시 
                 , ${대표계좌여부}
                 , ${계좌별명} 
                 , ${계좌표시순서} 
                 , ${계좌숨김여부} 
                 , TO_DATE(${계좌숨김일시},'YYYYMMDDHH24MISS') 
                 , ${즐겨찾기계좌여부} 
                 , ${화면노출버튼구분코드} 
                 , ${계좌상세사용여부}
                 , 개별저축은행코드
                 , ${시스템최초생성식별자} 
                 , SYSTIMESTAMP
                 , ${시스템최종갱신식별자} 
                 , ${시스템최종거래일시}
                 , SYSTIMESTAMP
              FROM INSTC.TBUBFS003
             WHERE 고객계좌번호            = ${고객계좌번호}
               AND 계좌개설은행코드       = ${계좌개설은행코드} 
               AND 오픈뱅킹이용기관코드  = ${오픈뱅킹이용기관코드}
               AND CI내용                   = ${CI내용}	
               AND ROWNUM          = 1
			
		]]>
    </statement>
    
        <!-- 오픈뱅킹계좌상세등록계좌수조회 -->
    <statement name="selectOpnbAccDtlRgAccnt">
		<![CDATA[ 
			SELECT /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/selectOpnbAccDtlRgAccnt */
                   COUNT(*) 등록계좌수
              FROM INSTC.TBUBFS003
             WHERE 고객계좌번호            = ${고객계좌번호}
               AND 계좌개설은행코드       = ${계좌개설은행코드} 
               AND 오픈뱅킹이용기관코드  = ${오픈뱅킹이용기관코드}
               AND CI내용                   = ${CI내용}
               AND 계좌상세사용여부       = ${계좌상세사용여부}
               AND 채널세부업무구분코드  = NVL(${채널세부업무구분코드},채널세부업무구분코드)
               
		]]>
    </statement>
    
     <!-- 오픈뱅킹계좌기본고객삭제 -->         
    <statement name="deleteAcc">
		<![CDATA[ 
			DELETE /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/deleteAcc */
             FROM INSTC.TBUBFS002
            WHERE 오픈뱅킹사용자고유번호 = ${오픈뱅킹사용자고유번호} 
            
               
		]]>
    </statement>

 		<!-- 오픈뱅킹계좌상세고객삭제 -->         
    <statement name="deleteOpnbAccDtlCst">
		<![CDATA[ 
			DELETE /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/deleteOpnbAccDtlCst */                  
             FROM INSTC.TBUBFS003 
            WHERE CI내용 = ${CI내용}              
               
		]]>
    </statement>
    
       <!-- 채널별등록계좌상세조회 -->
    <statement name="selectChnPrRgAccDtl">
		<![CDATA[ 
			SELECT /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/selectChnPrRgAccDtl */
                   A.고객계좌번호
                 , A.계좌개설은행코드 
                 , A.오픈뱅킹이용기관코드 
                 , A.오픈뱅킹사용자고유번호 
                 , A.핀테크이용번호 
                 , A.오픈뱅킹납부자번호
                 , A.오픈뱅킹계좌종류구분코드 
                 , A.오픈뱅킹계좌명의구분코드 
                 , A.오픈뱅킹계좌상품명 
                 , A.오픈뱅킹이메일주소전문내용
                 , A.계좌조회동의여부
                 , TO_CHAR(A.계좌조회동의등록일시 , 'YYYYMMDDHH24MISS') AS 계좌조회동의등록일시
                 , A.조회등록채널세부업무구분코드 
                 , TO_CHAR(A.계좌조회동의갱신일시  , 'YYYYMMDDHH24MISS') AS 계좌조회동의갱신일시
                 , A.조회갱신채널세부업무구분코드 
                 , TO_CHAR(A.계좌조회동의해제일시 , 'YYYYMMDDHH24MISS') AS 계좌조회동의해제일시 
                 , A.조회해제채널세부업무구분코드 
                 , A.출금동의여부 
                 , A.출금등록채널세부업무구분코드
                 , TO_CHAR(A.출금동의갱신일시  , 'YYYYMMDDHH24MISS') AS 출금동의갱신일시
                 , A.출금갱신채널세부업무구분코드 
                 , TO_CHAR(A.출금동의해제일시  , 'YYYYMMDDHH24MISS') AS 출금동의해제일시
                 , A.출금해제채널세부업무구분코드
                 , TO_CHAR(A.계좌등록일시  , 'YYYYMMDDHH24MISS') AS 계좌등록일시
                 , A.계좌사용여부
                 , A.계좌출금동의등록일시
                 , B.채널세부업무구분코드
                 , B.CI내용 
                 , B.준회원식별자 
                 , B.고객식별자
                 , B.오픈뱅킹플랫폼식별번호 
                 , B.계좌납입회차번호 
                 , B.개별저축은행명 
                 , B.대표계좌여부 
                 , B.계좌별명 
                 , B.계좌표시순서 
                 , B.계좌숨김여부 
                 , TO_CHAR(B.계좌숨김일시  , 'YYYYMMDDHH24MISS') AS 계좌숨김일시
                 , B.즐겨찾기계좌여부 
                 , B.화면노출버튼구분코드 
                 , B.계좌상세사용여부 
                 , B.개별저축은행코드
              FROM INSTC.TBUBFS002 A
                 , INSTC.TBUBFS003 B
             WHERE A.고객계좌번호            = B.고객계좌번호
               AND A.계좌개설은행코드       = B.계좌개설은행코드
               AND A.오픈뱅킹이용기관코드  = B.오픈뱅킹이용기관코드                 
               AND B.고객계좌번호            = ${고객계좌번호}
               AND B.계좌개설은행코드       = ${계좌개설은행코드} 
               AND B.오픈뱅킹이용기관코드  = ${오픈뱅킹이용기관코드}
               AND B.CI내용                   = ${CI내용}
               AND B.채널세부업무구분코드  = ${채널세부업무구분코드}
               
		]]>
    </statement>
    
    <!-- 오픈뱅킹채널별약관동의여부조회 -->
    <statement name="selectOpnbChnPrStplCnsYn">
		<![CDATA[ 
			SELECT /*+ 정영훈::/opnb/opnbPuse/usrSvc/opnbAccMgEbc/selectOpnbChnPrStplCnsYn */
                   A.오픈뱅킹동의연장구분코드
              FROM 
            ( 
            SELECT 오픈뱅킹동의연장구분코드
              FROM INSTC.TBUBFS004
             WHERE 오픈뱅킹사용자고유번호     = ${오픈뱅킹사용자고유번호}
               AND 채널세부업무구분코드       = ${채널세부업무구분코드}
               AND 오픈뱅킹약관동의구분코드  = ${오픈뱅킹약관동의구분코드}
             ORDER BY 오픈뱅킹약관동의일련번호 DESC
            ) A
             WHERE ROWNUM = 1
		]]>
    </statement>
    
</statements>
