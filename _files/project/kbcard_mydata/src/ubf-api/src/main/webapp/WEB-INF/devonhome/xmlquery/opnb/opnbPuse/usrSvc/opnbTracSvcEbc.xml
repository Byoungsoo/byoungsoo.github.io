<?xml version="1.0" encoding="EUC-KR"?>
<statements>


    <!-- 이체내역등록 -->
    <statement name="regOpnbTracHis">
		<![CDATA[
			INSERT /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/regOpnbTracHis */
	          INTO INSTC.TBUBFS010        /* UBF오픈뱅킹이체내역 */
		    	 (오픈뱅킹전문거래년월일
                , 참가기관거래고유번호
                , 채널세부업무구분코드
                , 오픈뱅킹이체거래고유번호
                , 오픈뱅킹API거래고유번호
                , 입출금구분코드
                , 오픈뱅킹이체용도업무구분코드
                , 참가기관출금거래고유번호
                , 오픈뱅킹사용자고유번호
                , 오픈뱅킹이용기관계좌번호
                , 입출금금융기관코드
                , 입출금계좌번호
                , 계좌납입회차
                , 핀테크이용번호
                , 입출금금액
                , 이체수수료
                , 입출금계좌인자내용
                , 입출금요청고객명
                , 입출금거래일시
                , 입출금결과금융기관코드
                , 입출금결과금융기관지점별코드
                , 입출금결과출력계좌번호
                , 입출금결과기관명
                , 입출금결과계좌인자내용
                , 입출금결과계좌수취인성명
                , 입출금결과개별저축은행명
                , 오픈뱅킹응답금융기관코드
                , 오픈뱅킹참가기관응답구분코드
                , 오픈뱅킹참가기관응답메시지내용
                , 오픈뱅킹API응답구분코드
                , 오픈뱅킹API응답메시지내용
                , 입출금이체응답거래일시
                , 카드번호
                , 카드식별자
                , KB카드승인번호
                , 시스템최초생성일시
                , 시스템최초생성식별자
                , 시스템최종갱신일시
                , 시스템최종갱신식별자
                , 시스템최종거래일시	
			    )
			     VALUES
			    (
			      ${오픈뱅킹전문거래년월일}      
                , ${참가기관거래고유번호}
                , ${채널세부업무구분코드}
                , ${오픈뱅킹이체거래고유번호}
                , ${오픈뱅킹API거래고유번호}
                , ${입출금구분코드}
                , ${오픈뱅킹이체용도업무구분코드}
                , ${참가기관출금거래고유번호}
                , ${오픈뱅킹사용자고유번호}
                , ${오픈뱅킹이용기관계좌번호}
                , ${입출금금융기관코드}
                , ${입출금계좌번호}
                , ${계좌납입회차}
                , ${핀테크이용번호}
                , ${입출금금액}
                , ${이체수수료}
                , ${입출금계좌인자내용}
                , ${입출금요청고객명}
                , ${입출금거래일시}
                , ${입출금결과금융기관코드}
                , ${입출금결과금융기관지점별코드}
                , ${입출금결과출력계좌번호}
                , ${입출금결과기관명}
                , ${입출금결과계좌인자내용}
                , ${입출금결과계좌수취인성명}
                , ${입출금결과개별저축은행명}
                , ${오픈뱅킹응답금융기관코드}
                , ${오픈뱅킹참가기관응답구분코드}
                , ${오픈뱅킹참가기관응답메시지내용}
                , ${오픈뱅킹API응답구분코드}
                , ${오픈뱅킹API응답메시지내용}
                , ${입출금이체응답거래일시}
                , ${카드번호}
                , ${카드식별자}
                , ${KB카드승인번호}
                , SYSTIMESTAMP
                , ${시스템최초생성식별자}
                , SYSTIMESTAMP
                , ${시스템최종갱신식별자}
                , TO_CHAR(SYSTIMESTAMP, 'YYYYMMDDHH24MISSFF6')		
			    )
		]]>
    </statement>

    <!-- 이체내역목록조회 -->
    <statement name="retvLstOpnbTracHis">
		<![CDATA[
			SELECT /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/retvLstOpnbTracHis */ 
			       오픈뱅킹전문거래년월일
                 , 참가기관거래고유번호
                 , 채널세부업무구분코드
                 , 오픈뱅킹이체거래고유번호
                 , 오픈뱅킹API거래고유번호
                 , 입출금구분코드
                 , 오픈뱅킹이체용도업무구분코드
                 , 참가기관출금거래고유번호
                 , 오픈뱅킹사용자고유번호
                 , 오픈뱅킹이용기관계좌번호
                 , 입출금금융기관코드
                 , 입출금계좌번호
                 , 계좌납입회차
                 , 핀테크이용번호
                 , 입출금금액
                 , 이체수수료
                 , 입출금계좌인자내용
                 , 입출금요청고객명
                 , 입출금거래일시
                 , 입출금결과금융기관코드
                 , 입출금결과금융기관지점별코드
                 , 입출금결과출력계좌번호
                 , 입출금결과기관명
                 , 입출금결과계좌인자내용
                 , 입출금결과계좌수취인성명
                 , 입출금결과개별저축은행명
                 , 오픈뱅킹응답금융기관코드
                 , 오픈뱅킹참가기관응답구분코드
                 , 오픈뱅킹참가기관응답메시지내용
                 , 오픈뱅킹API응답구분코드
                 , 오픈뱅킹API응답메시지내용
                 , 입출금이체응답거래일시
                 , 카드번호
                 , 카드식별자
                 , KB카드승인번호
                 , 시스템최초생성일시
                 , 시스템최초생성식별자
                 , 시스템최종갱신일시
                 , 시스템최종갱신식별자
                 , 시스템최종거래일시	      
              FROM INSTC.TBUBFS010      /* UBF오픈뱅킹이체내역 */       
             WHERE 오픈뱅킹전문거래년월일    BETWEEN ${조회시작년월일}
                                             AND     ${조회종료년월일}
               AND 오픈뱅킹사용자고유번호    = ${오픈뱅킹사용자고유번호}
               AND (${입출금구분코드} IS NULL OR 입출금구분코드 = ${입출금구분코드})
               AND 입출금계좌번호 IS NOT NULL
             ORDER BY 시스템최초생성일시 DESC
             FETCH FIRST 20 ROWS ONLY
		]]>
    </statement>

    <!-- 이체내역조회 -->
    <statement name="retvOpnbTracHis">
		<![CDATA[
			SELECT /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/retvOpnbTracHis */ 
			       오픈뱅킹전문거래년월일
                 , 참가기관거래고유번호
                 , 채널세부업무구분코드
                 , 오픈뱅킹이체거래고유번호
                 , 오픈뱅킹API거래고유번호
                 , 입출금구분코드
                 , 오픈뱅킹이체용도업무구분코드
                 , 참가기관출금거래고유번호
                 , 오픈뱅킹사용자고유번호
                 , 오픈뱅킹이용기관계좌번호
                 , 입출금금융기관코드
                 , 입출금계좌번호
                 , 계좌납입회차
                 , 핀테크이용번호
                 , 입출금금액
                 , 이체수수료
                 , 입출금계좌인자내용
                 , 입출금요청고객명
                 , 입출금거래일시
                 , 입출금결과금융기관코드
                 , 입출금결과금융기관지점별코드
                 , 입출금결과출력계좌번호
                 , 입출금결과기관명
                 , 입출금결과계좌인자내용
                 , 입출금결과계좌수취인성명
                 , 입출금결과개별저축은행명
                 , 오픈뱅킹응답금융기관코드
                 , 오픈뱅킹참가기관응답구분코드
                 , 오픈뱅킹참가기관응답메시지내용
                 , 오픈뱅킹API응답구분코드
                 , 오픈뱅킹API응답메시지내용
                 , 입출금이체응답거래일시
                 , 카드번호
                 , 카드식별자
                 , KB카드승인번호
                 , 시스템최초생성일시
                 , 시스템최초생성식별자
                 , 시스템최종갱신일시
                 , 시스템최종갱신식별자
                 , 시스템최종거래일시	      
              FROM INSTC.TBUBFS010      /* UBF오픈뱅킹이체내역 */       
             WHERE 오픈뱅킹전문거래년월일  = ${오픈뱅킹전문거래년월일}
               AND 참가기관거래고유번호    = ${참가기관거래고유번호}
		]]>
    </statement>

    <!-- 이체거래고유번호조회 -->
    <statement name="retvTracTrUno">
		<![CDATA[
			SELECT /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/retvTracTrUno */ 
			       오픈뱅킹전문거래년월일
                 , 참가기관거래고유번호
                 , 채널세부업무구분코드
                 , 오픈뱅킹이체거래고유번호
                 , 오픈뱅킹API거래고유번호
                 , 입출금구분코드
                 , 오픈뱅킹이체용도업무구분코드
                 , 참가기관출금거래고유번호
                 , 오픈뱅킹사용자고유번호
                 , 오픈뱅킹이용기관계좌번호
                 , 입출금금융기관코드
                 , 입출금계좌번호
                 , 계좌납입회차
                 , 핀테크이용번호
                 , 입출금금액
                 , 이체수수료
                 , 입출금계좌인자내용
                 , 입출금요청고객명
                 , 입출금거래일시
                 , 입출금결과금융기관코드
                 , 입출금결과금융기관지점별코드
                 , 입출금결과출력계좌번호
                 , 입출금결과기관명
                 , 입출금결과계좌인자내용
                 , 입출금결과계좌수취인성명
                 , 입출금결과개별저축은행명
                 , 오픈뱅킹응답금융기관코드
                 , 오픈뱅킹참가기관응답구분코드
                 , 오픈뱅킹참가기관응답메시지내용
                 , 오픈뱅킹API응답구분코드
                 , 오픈뱅킹API응답메시지내용
                 , 입출금이체응답거래일시
                 , 카드번호
                 , 카드식별자
                 , KB카드승인번호
                 , 시스템최초생성일시
                 , 시스템최초생성식별자
                 , 시스템최종갱신일시
                 , 시스템최종갱신식별자
                 , 시스템최종거래일시	      
              FROM INSTC.TBUBFS010      /* UBF오픈뱅킹이체내역 */       
             WHERE 오픈뱅킹이체거래고유번호  = ${오픈뱅킹이체거래고유번호}
		]]>
    </statement>

    <!-- 이체내역수정 -->
    <statement name="uptOpnbTracHis">
		<![CDATA[
			UPDATE /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/uptOpnbTracHis */ 
                   INSTC.TBUBFS010        /* UBF오픈뱅킹이체내역 */
               SET 오픈뱅킹API거래고유번호         = ${오픈뱅킹API거래고유번호}
                 , 입출금결과금융기관코드          = ${입출금결과금융기관코드}
                 , 입출금결과금융기관지점별코드    = ${입출금결과금융기관지점별코드}
                 , 입출금결과출력계좌번호          = ${입출금결과출력계좌번호}
                 , 입출금결과기관명                = ${입출금결과기관명}
                 , 입출금결과계좌인자내용          = ${입출금결과계좌인자내용}
                 , 입출금결과계좌수취인성명        = ${입출금결과계좌수취인성명}
                 , 입출금결과개별저축은행명        = ${입출금결과개별저축은행명}
                 , 오픈뱅킹응답금융기관코드        = ${오픈뱅킹응답금융기관코드}
                 , 오픈뱅킹참가기관응답구분코드    = ${오픈뱅킹참가기관응답구분코드}
                 , 오픈뱅킹참가기관응답메시지내용  = ${오픈뱅킹참가기관응답메시지내용}
                 , 오픈뱅킹API응답구분코드         = ${오픈뱅킹API응답구분코드}
                 , 오픈뱅킹API응답메시지내용       = ${오픈뱅킹API응답메시지내용}
                 , 입출금이체응답거래일시          = ${입출금이체응답거래일시}
                 , 카드번호                        = ${카드번호}
                 , 카드식별자                      = ${카드식별자}
                 , KB카드승인번호                  = ${KB카드승인번호}
                 , 시스템최종갱신일시              = SYSTIMESTAMP
                 , 시스템최종갱신식별자            = ${시스템최종갱신식별자}
                 , 시스템최종거래일시              = TO_CHAR(SYSTIMESTAMP, 'YYYYMMDDHH24MISSFF6')	
             WHERE 오픈뱅킹전문거래년월일  = ${오픈뱅킹전문거래년월일}
               AND 참가기관거래고유번호    = ${참가기관거래고유번호}
		]]>
    </statement>

    <!-- 이체내역결과수정 -->
    <statement name="uptOpnbTracHisRst">
		<![CDATA[
			UPDATE /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/uptOpnbTracHisRst */ 
                   INSTC.TBUBFS010        /* UBF오픈뱅킹이체내역 */
               SET 오픈뱅킹참가기관응답구분코드    = ${오픈뱅킹참가기관응답구분코드}
                 , 오픈뱅킹참가기관응답메시지내용  = ${오픈뱅킹참가기관응답메시지내용}
                 , 오픈뱅킹API응답구분코드         = ${오픈뱅킹API응답구분코드}
                 , 오픈뱅킹API응답메시지내용       = ${오픈뱅킹API응답메시지내용}
                 , 시스템최종갱신일시              = SYSTIMESTAMP
                 , 시스템최종갱신식별자            = ${시스템최종갱신식별자}
                 , 시스템최종거래일시              = TO_CHAR(SYSTIMESTAMP, 'YYYYMMDDHH24MISSFF6')	
             WHERE 오픈뱅킹전문거래년월일  = ${오픈뱅킹전문거래년월일}
               AND 참가기관거래고유번호    = ${참가기관거래고유번호}
		]]>
    </statement>

    <!-- 이체내역삭제 -->
    <statement name="delOpnbTracHis">
		<![CDATA[
			DELETE /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/uptOpnbTracHis */ 
              FROM INSTC.TBUBFS010        /* UBF오픈뱅킹이체내역 */            
             WHERE 오픈뱅킹전문거래년월일  = ${오픈뱅킹전문거래년월일}
               AND 참가기관거래고유번호    = ${참가기관거래고유번호} 
		]]>
    </statement>  
    
    <!-- 오픈뱅킹재전송요청회차조회 -->
    <statement name="retvOpnbTracRstNth">
		<![CDATA[
			SELECT /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/retvOpnbTracRstNth */ 
			       NVL(MAX(오픈뱅킹재전송요청회차), 0) + 1 AS 오픈뱅킹재전송요청회차
              FROM INSTC.TBUBFS016      /* UBF오픈뱅킹이체결과조회요청내역 */       
             WHERE 오픈뱅킹전문거래년월일  = ${오픈뱅킹전문거래년월일}
               AND 참가기관거래고유번호    = ${참가기관거래고유번호}
		]]>
    </statement>

    <!-- 이체결과조회요청내역등록 -->
    <statement name="regOpnbTracRst">
		<![CDATA[
			INSERT /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/regOpnbTracRst */
	          INTO INSTC.TBUBFS016        /* UBF오픈뱅킹이체결과조회요청내역 */
		    	 (오픈뱅킹전문거래년월일
                , 오픈뱅킹재전송요청회차
                , 참가기관거래고유번호
                , 채널세부업무구분코드
                , 오픈뱅킹이체거래고유번호
                , 오픈뱅킹API거래고유번호
                , 입출금구분코드
                , 입출금금액
                , 오픈뱅킹사용자고유번호
                , 오픈뱅킹이체결과조회요청일시
                , 오픈뱅킹API응답구분코드
                , 오픈뱅킹API응답메시지내용
                , 오픈뱅킹응답금융기관코드
                , 오픈뱅킹참가기관응답구분코드
                , 오픈뱅킹참가기관응답메시지내용
                , 출금금융기관코드
                , 출금금융기관지점별코드
                , 출금개별저축은행명
                , 출금계좌핀테크이용번호
                , 출금출력계좌번호
                , 출금계좌인자내용
                , 송금의뢰인명
                , 입금금융기관코드
                , 입금금융기관지점별코드
                , 입금개별저축은행명
                , 입금계좌핀테크이용번호
                , 입금출력계좌번호
                , 입금계좌인자내용
                , 수취인명
                , 시스템최초생성일시
                , 시스템최초생성식별자
                , 시스템최종갱신일시
                , 시스템최종갱신식별자
                , 시스템최종거래일시	
			    )
			     VALUES
			    (
			      ${오픈뱅킹전문거래년월일}
                , ${오픈뱅킹재전송요청회차}
                , ${참가기관거래고유번호}
                , ${채널세부업무구분코드}
                , ${오픈뱅킹이체거래고유번호}
                , ${오픈뱅킹API거래고유번호}
                , ${입출금구분코드}
                , ${입출금금액}
                , ${오픈뱅킹사용자고유번호}
                , ${오픈뱅킹이체결과조회요청일시}
                , ${오픈뱅킹API응답구분코드}
                , ${오픈뱅킹API응답메시지내용}
                , ${오픈뱅킹응답금융기관코드}
                , ${오픈뱅킹참가기관응답구분코드}
                , ${오픈뱅킹참가기관응답메시지내용}
                , ${출금금융기관코드}
                , ${출금금융기관지점별코드}
                , ${출금개별저축은행명}
                , ${출금계좌핀테크이용번호}
                , ${출금출력계좌번호}
                , ${출금계좌인자내용}
                , ${송금의뢰인명}
                , ${입금금융기관코드}
                , ${입금금융기관지점별코드}
                , ${입금개별저축은행명}
                , ${입금계좌핀테크이용번호}
                , ${입금출력계좌번호}
                , ${입금계좌인자내용}
                , ${수취인명}
                , SYSTIMESTAMP
                , ${시스템최초생성식별자}
                , SYSTIMESTAMP
                , ${시스템최종갱신식별자}
                , TO_CHAR(SYSTIMESTAMP, 'YYYYMMDDHH24MISSFF6')		
			    )
		]]>
    </statement>

    <!-- 이체결과조회요청내역수정 -->
    <statement name="uptOpnbTracRst">
		<![CDATA[
			UPDATE /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/uptOpnbTracRst */ 
                   INSTC.TBUBFS016        /* UBF오픈뱅킹이체결과조회요청내역 */
               SET 오픈뱅킹API거래고유번호        = ${오픈뱅킹API거래고유번호}
                 , 입출금구분코드                 = ${입출금구분코드}
                 , 입출금금액                     = ${입출금금액}
                 , 오픈뱅킹사용자고유번호         = ${오픈뱅킹사용자고유번호}
                 , 오픈뱅킹이체결과조회요청일시   = ${오픈뱅킹이체결과조회요청일시}
                 , 오픈뱅킹API응답구분코드        = ${오픈뱅킹API응답구분코드}
                 , 오픈뱅킹API응답메시지내용      = ${오픈뱅킹API응답메시지내용}
                 , 오픈뱅킹응답금융기관코드       = ${오픈뱅킹응답금융기관코드}
                 , 오픈뱅킹참가기관응답구분코드   = ${오픈뱅킹참가기관응답구분코드}
                 , 오픈뱅킹참가기관응답메시지내용 = ${오픈뱅킹참가기관응답메시지내용}
                 , 출금금융기관코드               = ${출금금융기관코드}
                 , 출금금융기관지점별코드         = ${출금금융기관지점별코드}
                 , 출금개별저축은행명             = ${출금개별저축은행명}
                 , 출금계좌핀테크이용번호         = ${출금계좌핀테크이용번호}
                 , 출금출력계좌번호               = ${출금출력계좌번호}
                 , 출금계좌인자내용               = ${출금계좌인자내용}
                 , 송금의뢰인명                   = ${송금의뢰인명}
                 , 입금금융기관코드               = ${입금금융기관코드}
                 , 입금금융기관지점별코드         = ${입금금융기관지점별코드}
                 , 입금개별저축은행명             = ${입금개별저축은행명}
                 , 입금계좌핀테크이용번호         = ${입금계좌핀테크이용번호}
                 , 입금출력계좌번호               = ${입금출력계좌번호}
                 , 입금계좌인자내용               = ${입금계좌인자내용}
                 , 수취인명                       = ${수취인명}
                 , 시스템최종갱신일시              = SYSTIMESTAMP
                 , 시스템최종갱신식별자            = ${시스템최종갱신식별자}
                 , 시스템최종거래일시              = TO_CHAR(SYSTIMESTAMP, 'YYYYMMDDHH24MISSFF6')
             WHERE 오픈뱅킹전문거래년월일  = ${오픈뱅킹전문거래년월일}
               AND 오픈뱅킹재전송요청회차  = ${오픈뱅킹재전송요청회차}
               AND 참가기관거래고유번호    = ${참가기관거래고유번호}
		]]>
    </statement>

    <!-- 자금반환청구내역등록 -->
    <statement name="regOpnbFndsRtun">
		<![CDATA[
			INSERT /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/regOpnbFndsRtun */
	          INTO INSTC.TBUBFS009        /* UBF오픈뱅킹자금청구요청내역 */
		    	 (오픈뱅킹전문거래년월일
                , 참가기관거래고유번호
                , 채널세부업무구분코드
                , 오픈뱅킹사용자고유번호
                , 오픈뱅킹API거래고유번호
                , 오픈뱅킹원거래고유번호
                , 오픈뱅킹원거래금액
                , 오픈뱅킹원거래년월일
                , 오픈뱅킹원거래입금기관대표코드
                , 오픈뱅킹원거래입금계좌번호
                , 핀테크이용번호
                , 오픈뱅킹원거래출금기관대표코드
                , 오픈뱅킹반환입금계좌번호
                , 담당자휴대폰번호
                , 자금반환청구사유구분코드
                , 오픈뱅킹자금반환청구사유
                , 오픈뱅킹전액반환여부
                , 오픈뱅킹API응답구분코드
                , 오픈뱅킹API응답메시지내용
                , 오픈뱅킹참가기관응답구분코드
                , 오픈뱅킹참가기관응답메시지내용
                , 오픈뱅킹자금반환청구정상여부  
                , 자금반환결과구분코드
                , 자금반환불가사유구분코드
                , 오픈뱅킹자금반환불가사유
                , 오픈뱅킹반환금액
                , 오픈뱅킹자금반환년월일
                , 시스템최초생성일시
                , 시스템최초생성식별자
                , 시스템최종갱신일시
                , 시스템최종갱신식별자
                , 시스템최종거래일시	
			    )
			     VALUES
			    (
			      ${오픈뱅킹전문거래년월일}
                , ${참가기관거래고유번호}
                , ${채널세부업무구분코드}
                , ${오픈뱅킹사용자고유번호}
                , ${오픈뱅킹API거래고유번호}
                , ${오픈뱅킹원거래고유번호}
                , ${오픈뱅킹원거래금액}
                , ${오픈뱅킹원거래년월일}
                , ${오픈뱅킹원거래입금기관대표코드}
                , ${오픈뱅킹원거래입금계좌번호}
                , ${핀테크이용번호}
                , ${오픈뱅킹원거래출금기관대표코드}
                , ${오픈뱅킹반환입금계좌번호}
                , ${담당자휴대폰번호}
                , ${자금반환청구사유구분코드}
                , ${오픈뱅킹자금반환청구사유}
                , ${오픈뱅킹전액반환여부}
                , ${오픈뱅킹API응답구분코드}
                , ${오픈뱅킹API응답메시지내용}
                , ${오픈뱅킹참가기관응답구분코드}
                , ${오픈뱅킹참가기관응답메시지내용}
                , ${오픈뱅킹자금반환청구정상여부}
                , ${자금반환결과구분코드}
                , ${자금반환불가사유구분코드}
                , ${오픈뱅킹자금반환불가사유}
                , ${오픈뱅킹반환금액}
                , ${오픈뱅킹자금반환년월일}
                , SYSTIMESTAMP
                , ${시스템최초생성식별자}
                , SYSTIMESTAMP
                , ${시스템최종갱신식별자}
                , TO_CHAR(SYSTIMESTAMP, 'YYYYMMDDHH24MISSFF6')		
			    )
		]]>
    </statement>

    <!-- 자금반환청구내역조회 -->
    <statement name="retvOpnbFndsRtun">
		<![CDATA[
			SELECT /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/retvOpnbFndsRtun */ 
			       오픈뱅킹전문거래년월일
                 , 참가기관거래고유번호
                 , 채널세부업무구분코드
                 , 오픈뱅킹사용자고유번호
                 , 오픈뱅킹API거래고유번호
                 , 오픈뱅킹원거래고유번호
                 , 오픈뱅킹원거래금액
                 , 오픈뱅킹원거래년월일
                 , 오픈뱅킹원거래입금기관대표코드
                 , 오픈뱅킹원거래입금계좌번호
                 , 핀테크이용번호
                 , 오픈뱅킹원거래출금기관대표코드
                 , 오픈뱅킹반환입금계좌번호
                 , 담당자휴대폰번호
                 , 자금반환청구사유구분코드
                 , 오픈뱅킹자금반환청구사유
                 , 오픈뱅킹전액반환여부
                 , 오픈뱅킹API응답구분코드
                 , 오픈뱅킹API응답메시지내용
                 , 오픈뱅킹참가기관응답구분코드
                 , 오픈뱅킹참가기관응답메시지내용
                 , 오픈뱅킹자금반환청구정상여부  
                 , 자금반환결과구분코드
                 , 자금반환불가사유구분코드
                 , 오픈뱅킹자금반환불가사유
                 , 오픈뱅킹반환금액
                 , 오픈뱅킹자금반환년월일
                 , 시스템최초생성일시
                 , 시스템최초생성식별자
                 , 시스템최종갱신일시
                 , 시스템최종갱신식별자
                 , 시스템최종거래일시	      
              FROM INSTC.TBUBFS009      /* UBF오픈뱅킹자금청구내역 */       
             WHERE 오픈뱅킹전문거래년월일  = ${오픈뱅킹전문거래년월일}
               AND 참가기관거래고유번호    = ${참가기관거래고유번호}
		]]>
    </statement>

    <!-- 원거래접수여부조회 -->
    <statement name="retvOgtnRcpYn">
		<![CDATA[
			SELECT /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/retvOgtnRcpYn */ 
			       오픈뱅킹전문거래년월일
                 , 참가기관거래고유번호
                 , 채널세부업무구분코드
                 , 오픈뱅킹사용자고유번호
                 , 오픈뱅킹API거래고유번호
                 , 오픈뱅킹원거래고유번호
                 , 오픈뱅킹원거래금액
                 , 오픈뱅킹원거래년월일
                 , 오픈뱅킹원거래입금기관대표코드
                 , 오픈뱅킹원거래입금계좌번호
                 , 핀테크이용번호
                 , 오픈뱅킹원거래출금기관대표코드
                 , 오픈뱅킹반환입금계좌번호
                 , 담당자휴대폰번호
                 , 자금반환청구사유구분코드
                 , 오픈뱅킹자금반환청구사유
                 , 오픈뱅킹전액반환여부
                 , 오픈뱅킹API응답구분코드
                 , 오픈뱅킹API응답메시지내용
                 , 오픈뱅킹참가기관응답구분코드
                 , 오픈뱅킹참가기관응답메시지내용
                 , 오픈뱅킹자금반환청구정상여부  
                 , 자금반환결과구분코드
                 , 자금반환불가사유구분코드
                 , 오픈뱅킹자금반환불가사유
                 , 오픈뱅킹반환금액
                 , 오픈뱅킹자금반환년월일
                 , 시스템최초생성일시
                 , 시스템최초생성식별자
                 , 시스템최종갱신일시
                 , 시스템최종갱신식별자
                 , 시스템최종거래일시	      
              FROM INSTC.TBUBFS009      /* UBF오픈뱅킹자금청구내역 */       
             WHERE 오픈뱅킹원거래년월일    = ${오픈뱅킹원거래년월일}
               AND 오픈뱅킹원거래고유번호  = ${오픈뱅킹원거래고유번호}
               AND (오픈뱅킹자금반환청구정상여부 = 'Y'
                OR  (오픈뱅킹API응답구분코드 = 'A0000'
                 AND 오픈뱅킹참가기관응답구분코드 = '000')) 
		]]>
    </statement>

    <!-- 자금반환청구내역수정 -->
    <statement name="uptOpnbFndsRtun">
		<![CDATA[
			UPDATE /*+ 임헌택::/opnb/opnbPuse/usrSvc/opnbTracSvcEbc/uptOpnbFndsRtun */ 
                   INSTC.TBUBFS009        /* UBF오픈뱅킹자금청구요청내역 */
               SET 오픈뱅킹자금반환청구정상여부  = ${오픈뱅킹자금반환청구정상여부}
                 , 자금반환결과구분코드          = ${자금반환결과구분코드}
                 , 자금반환불가사유구분코드      = ${자금반환불가사유구분코드}
                 , 오픈뱅킹자금반환불가사유      = ${오픈뱅킹자금반환불가사유}
                 , 오픈뱅킹반환금액              = ${오픈뱅킹반환금액}
                 , 오픈뱅킹자금반환년월일        = ${오픈뱅킹자금반환년월일}
                 , 시스템최종갱신일시            = SYSTIMESTAMP
                 , 시스템최종갱신식별자          = ${시스템최종갱신식별자}
                 , 시스템최종거래일시            = TO_CHAR(SYSTIMESTAMP, 'YYYYMMDDHH24MISSFF6')
             WHERE 오픈뱅킹전문거래년월일  = ${오픈뱅킹전문거래년월일}
               AND 참가기관거래고유번호    = ${참가기관거래고유번호}
		]]>
    </statement>

</statements>
