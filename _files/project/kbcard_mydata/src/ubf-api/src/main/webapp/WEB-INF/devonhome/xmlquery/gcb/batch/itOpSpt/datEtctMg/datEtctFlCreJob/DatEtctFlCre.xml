<?xml version="1.0" encoding="EUC-KR"?>
<statements>

    <!--  -->
    <statement name="retvDatEtctHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::05.IT운영지원::11.데이터추출관리::데이터추출파일생성Job::DAO::데이터추출파일생성Bdao::데이터추출내역조회" >
		<![CDATA[
			SELECT /*+ 김민교::/gcb/batch/itOpSpt/datEtctMg/datEtctFlCreJob/DatEtctFlCre/retvDatEtctHis */ 
			       A.어플리케이션코드
			     , A.원장데이터추출일련번호
			     , A.사용여부
			     , A.원장데이터추출처리구분코드
			     , A.원장데이터추출파일명
			     , A.원장데이터추출처리내용
			     , A.원장데이터추출SQL내용1
			     , A.원장데이터추출SQL내용2
			     , A.원장데이터추출SQL내용3
			     , A.배치작업수행횟수
			     , A.배치작업수행제한횟수
			     , A.배치작업수행최종일시
			     , A.등록직원번호
			     , A.등록일시
			     , TO_CHAR(A.시스템최종갱신일시, 'YYYYMMDDHH24MISS') as 시스템최종갱신일시
			     , A.시스템최종갱신식별자
			     , A.시스템최종거래일시
			  FROM INSTC.TBGCBDE01 A        /* GCB데이터추출내역 */
			 WHERE A.어플리케이션코드    = ${어플리케이션코드}
			   AND A.원장데이터추출일련번호 = ${원장데이터추출일련번호}
			
		]]>
    </statement>

    <!--  -->
    <statement name="uptDatEtctHisAmdByBchJbHis" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::05.IT운영지원::11.데이터추출관리::데이터추출파일생성Job::DAO::데이터추출파일생성Bdao::데이터추출내역수정By배치작업내역수정">
		<![CDATA[
			UPDATE /*+ 김민교::/gcb/batch/itOpSpt/datEtctMg/datEtctFlCreJob/DatEtctFlCre/uptDatEtctHisAmdByBchJbHis */ 
			       INSTC.TBGCBDE01        /* GCB데이터추출내역 */
			   SET 사용여부       = ${사용여부}
			     , 원장데이터추출파일명   = ${원장데이터추출파일명}
			     , 배치작업수행횟수   = ${배치작업수행횟수}
			     , 배치작업수행최종일시 = ${배치작업수행최종일시}
			     , 시스템최종갱신일시  = SYSTIMESTAMP
			     , 시스템최종갱신식별자 = ${시스템최종갱신식별자}
			     , 시스템최종거래일시  = ${시스템최종거래일시}
			 WHERE 어플리케이션코드    = ${어플리케이션코드}
			   AND 원장데이터추출일련번호 = ${원장데이터추출일련번호}
		]]>
    </statement>

    <!--  -->
    <statement name="retvDatEtctHisInqByBchJbAcmpTmcntNbr" qPath="[GCB_MODEL_업무공통] 2.시스템명세모델::06.배치컴포넌트::05.IT운영지원::11.데이터추출관리::데이터추출파일생성Job::DAO::데이터추출파일생성Bdao::데이터추출내역조회By배치작업수행횟수채번조회">
		<![CDATA[
			SELECT /*+ 김민교::/gcb/batch/itOpSpt/datEtctMg/datEtctFlCreJob/DatEtctFlCre/retvDatEtctHisInqByBchJbAcmpTmcntNbr */ 
			       NVL(MAX(A.배치작업수행횟수), 0) + 1 배치작업수행횟수
			  FROM INSTC.TBGCBDE01 A        /* GCB데이터추출내역 */
			 WHERE A.어플리케이션코드    = ${어플리케이션코드}
			   AND A.원장데이터추출일련번호 = ${원장데이터추출일련번호}
		]]>
    </statement>
</statements>
